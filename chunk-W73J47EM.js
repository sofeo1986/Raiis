import{b as Wo,c as Jo,f as Nc,g as Ko}from"./chunk-SZXJF6TW.js";import{$ as yi,$b as Xr,Ac as Qr,B as gi,Ba as bi,Bc as Ho,C as et,Ca as rt,Cc as en,D as uo,Da as nt,Ea as Eo,F as tt,Fa as So,G as Ee,Ga as Ao,H as mi,Ha as Ro,I as ho,Ia as To,J as fo,Ja as Do,Ka as Io,La as Ve,Ma as Oo,N as po,O as H,Oa as Pt,Ob as ce,P as go,Pb as Fo,Qa as D,R as V,Ra as Mo,S as M,T as ae,U as A,V as Se,Va as xo,W as mo,Wa as Nt,Wb as Hr,X as O,Xb as Wr,Y as vi,Ya as te,Yb as Ai,Z as E,Za as Ci,Zb as Jr,_ as y,_a as ko,_b as Kr,a as no,aa as vo,ab as J,ac as Zr,b as io,ba as Mt,bb as Po,c as so,ca as W,cb as No,cc as Uo,d as hi,da as yo,db as Ei,dc as it,e as di,ea as Ae,eb as qr,f as we,fa as j,g as Q,ga as xt,gb as jt,gc as Vo,h as be,ha as _o,hc as st,i as U,ia as Re,ib as Si,ic as Lo,j as _,ja as le,jc as $o,k as Ot,ka as Te,kc as z,l as oo,lc as Bo,m as ao,mc as Ft,n as R,nc as zo,o as zr,oc as Go,p as q,pa as ve,pc as Ut,q as fi,qa as wo,qc as Yr,r as lo,ra as Gr,rb as jo,s as pi,sa as _i,t as co,ta as kt,ua as ee,w as me,wa as bo,xa as wi,y as Qe,ya as Co,yb as De,yc as qo,z as Ce,za as Ue}from"./chunk-PB4YG3C4.js";import{a as m,b as P,e as ge,g as kc,h as Pc,i as d}from"./chunk-P2VZOJAX.js";var il=ge(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});var Cs=class extends Error{constructor(t){super(t.message),this.name="PostgrestError",this.details=t.details,this.hint=t.hint,this.code=t.code}};Es.default=Cs});var As=ge(gr=>{"use strict";var sl=gr&&gr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(gr,"__esModule",{value:!0});var Td=sl((Ko(),Pc(Nc))),Dd=sl(il()),Ss=class{constructor(t){this.shouldThrowOnError=!1,this.method=t.method,this.url=t.url,this.headers=t.headers,this.schema=t.schema,this.body=t.body,this.shouldThrowOnError=t.shouldThrowOnError,this.signal=t.signal,this.isMaybeSingle=t.isMaybeSingle,t.fetch?this.fetch=t.fetch:typeof fetch>"u"?this.fetch=Td.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(t,e){return this.headers=Object.assign({},this.headers),this.headers[t]=e,this}then(t,e){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");let n=this.fetch,i=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(s=>d(this,null,function*(){var o,a,l;let c=null,u=null,h=null,f=s.status,p=s.statusText;if(s.ok){if(this.method!=="HEAD"){let T=yield s.text();T===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=T:u=JSON.parse(T))}let g=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),v=(a=s.headers.get("content-range"))===null||a===void 0?void 0:a.split("/");g&&v&&v.length>1&&(h=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(c={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,p="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{let g=yield s.text();try{c=JSON.parse(g),Array.isArray(c)&&s.status===404&&(u=[],c=null,f=200,p="OK")}catch{s.status===404&&g===""?(f=204,p="No Content"):c={message:g}}if(c&&this.isMaybeSingle&&(!((l=c?.details)===null||l===void 0)&&l.includes("0 rows"))&&(c=null,f=200,p="OK"),c&&this.shouldThrowOnError)throw new Dd.default(c)}return{error:c,data:u,count:h,status:f,statusText:p}}));return this.shouldThrowOnError||(i=i.catch(s=>{var o,a,l;return{error:{message:`${(o=s?.name)!==null&&o!==void 0?o:"FetchError"}: ${s?.message}`,details:`${(a=s?.stack)!==null&&a!==void 0?a:""}`,hint:"",code:`${(l=s?.code)!==null&&l!==void 0?l:""}`},data:null,count:null,status:0,statusText:""}})),i.then(t,e)}};gr.default=Ss});var Ts=ge(mr=>{"use strict";var Id=mr&&mr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(mr,"__esModule",{value:!0});var Od=Id(As()),Rs=class extends Od.default{select(t){let e=!1,n=(t??"*").split("").map(i=>/\s/.test(i)&&!e?"":(i==='"'&&(e=!e),i)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(t,{ascending:e=!0,nullsFirst:n,foreignTable:i,referencedTable:s=i}={}){let o=s?`${s}.order`:"order",a=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${a?`${a},`:""}${t}.${e?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(t,{foreignTable:e,referencedTable:n=e}={}){let i=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(i,`${t}`),this}range(t,e,{foreignTable:n,referencedTable:i=n}={}){let s=typeof i>"u"?"offset":`${i}.offset`,o=typeof i>"u"?"limit":`${i}.limit`;return this.url.searchParams.set(s,`${t}`),this.url.searchParams.set(o,`${e-t+1}`),this}abortSignal(t){return this.signal=t,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:t=!1,verbose:e=!1,settings:n=!1,buffers:i=!1,wal:s=!1,format:o="text"}={}){var a;let l=[t?"analyze":null,e?"verbose":null,n?"settings":null,i?"buffers":null,s?"wal":null].filter(Boolean).join("|"),c=(a=this.headers.Accept)!==null&&a!==void 0?a:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${c}"; options=${l};`,o==="json"?this:this}rollback(){var t;return((t=this.headers.Prefer)!==null&&t!==void 0?t:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};mr.default=Rs});var xn=ge(vr=>{"use strict";var Md=vr&&vr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(vr,"__esModule",{value:!0});var xd=Md(Ts()),Ds=class extends xd.default{eq(t,e){return this.url.searchParams.append(t,`eq.${e}`),this}neq(t,e){return this.url.searchParams.append(t,`neq.${e}`),this}gt(t,e){return this.url.searchParams.append(t,`gt.${e}`),this}gte(t,e){return this.url.searchParams.append(t,`gte.${e}`),this}lt(t,e){return this.url.searchParams.append(t,`lt.${e}`),this}lte(t,e){return this.url.searchParams.append(t,`lte.${e}`),this}like(t,e){return this.url.searchParams.append(t,`like.${e}`),this}likeAllOf(t,e){return this.url.searchParams.append(t,`like(all).{${e.join(",")}}`),this}likeAnyOf(t,e){return this.url.searchParams.append(t,`like(any).{${e.join(",")}}`),this}ilike(t,e){return this.url.searchParams.append(t,`ilike.${e}`),this}ilikeAllOf(t,e){return this.url.searchParams.append(t,`ilike(all).{${e.join(",")}}`),this}ilikeAnyOf(t,e){return this.url.searchParams.append(t,`ilike(any).{${e.join(",")}}`),this}is(t,e){return this.url.searchParams.append(t,`is.${e}`),this}in(t,e){let n=Array.from(new Set(e)).map(i=>typeof i=="string"&&new RegExp("[,()]").test(i)?`"${i}"`:`${i}`).join(",");return this.url.searchParams.append(t,`in.(${n})`),this}contains(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cs.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cs.{${e.join(",")}}`):this.url.searchParams.append(t,`cs.${JSON.stringify(e)}`),this}containedBy(t,e){return typeof e=="string"?this.url.searchParams.append(t,`cd.${e}`):Array.isArray(e)?this.url.searchParams.append(t,`cd.{${e.join(",")}}`):this.url.searchParams.append(t,`cd.${JSON.stringify(e)}`),this}rangeGt(t,e){return this.url.searchParams.append(t,`sr.${e}`),this}rangeGte(t,e){return this.url.searchParams.append(t,`nxl.${e}`),this}rangeLt(t,e){return this.url.searchParams.append(t,`sl.${e}`),this}rangeLte(t,e){return this.url.searchParams.append(t,`nxr.${e}`),this}rangeAdjacent(t,e){return this.url.searchParams.append(t,`adj.${e}`),this}overlaps(t,e){return typeof e=="string"?this.url.searchParams.append(t,`ov.${e}`):this.url.searchParams.append(t,`ov.{${e.join(",")}}`),this}textSearch(t,e,{config:n,type:i}={}){let s="";i==="plain"?s="pl":i==="phrase"?s="ph":i==="websearch"&&(s="w");let o=n===void 0?"":`(${n})`;return this.url.searchParams.append(t,`${s}fts${o}.${e}`),this}match(t){return Object.entries(t).forEach(([e,n])=>{this.url.searchParams.append(e,`eq.${n}`)}),this}not(t,e,n){return this.url.searchParams.append(t,`not.${e}.${n}`),this}or(t,{foreignTable:e,referencedTable:n=e}={}){let i=n?`${n}.or`:"or";return this.url.searchParams.append(i,`(${t})`),this}filter(t,e,n){return this.url.searchParams.append(t,`${e}.${n}`),this}};vr.default=Ds});var Os=ge(_r=>{"use strict";var kd=_r&&_r.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(_r,"__esModule",{value:!0});var yr=kd(xn()),Is=class{constructor(t,{headers:e={},schema:n,fetch:i}){this.url=t,this.headers=e,this.schema=n,this.fetch=i}select(t,{head:e=!1,count:n}={}){let i=e?"HEAD":"GET",s=!1,o=(t??"*").split("").map(a=>/\s/.test(a)&&!s?"":(a==='"'&&(s=!s),a)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new yr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(t,{count:e,defaultToNull:n=!0}={}){let i="POST",s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),e&&s.push(`count=${e}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(t)){let o=t.reduce((a,l)=>a.concat(Object.keys(l)),[]);if(o.length>0){let a=[...new Set(o)].map(l=>`"${l}"`);this.url.searchParams.set("columns",a.join(","))}}return new yr.default({method:i,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}upsert(t,{onConflict:e,ignoreDuplicates:n=!1,count:i,defaultToNull:s=!0}={}){let o="POST",a=[`resolution=${n?"ignore":"merge"}-duplicates`];if(e!==void 0&&this.url.searchParams.set("on_conflict",e),this.headers.Prefer&&a.push(this.headers.Prefer),i&&a.push(`count=${i}`),s||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(t)){let l=t.reduce((c,u)=>c.concat(Object.keys(u)),[]);if(l.length>0){let c=[...new Set(l)].map(u=>`"${u}"`);this.url.searchParams.set("columns",c.join(","))}}return new yr.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}update(t,{count:e}={}){let n="PATCH",i=[];return this.headers.Prefer&&i.push(this.headers.Prefer),e&&i.push(`count=${e}`),this.headers.Prefer=i.join(","),new yr.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:this.fetch,allowEmpty:!1})}delete({count:t}={}){let e="DELETE",n=[];return t&&n.push(`count=${t}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new yr.default({method:e,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};_r.default=Is});var ol=ge(kn=>{"use strict";Object.defineProperty(kn,"__esModule",{value:!0});kn.version=void 0;kn.version="0.0.0-automated"});var al=ge(Pn=>{"use strict";Object.defineProperty(Pn,"__esModule",{value:!0});Pn.DEFAULT_HEADERS=void 0;var Pd=ol();Pn.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${Pd.version}`}});var cl=ge(wr=>{"use strict";var ll=wr&&wr.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(wr,"__esModule",{value:!0});var Nd=ll(Os()),jd=ll(xn()),Fd=al(),Ms=class r{constructor(t,{headers:e={},schema:n,fetch:i}={}){this.url=t,this.headers=Object.assign(Object.assign({},Fd.DEFAULT_HEADERS),e),this.schemaName=n,this.fetch=i}from(t){let e=new URL(`${this.url}/${t}`);return new Nd.default(e,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new r(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(t,e={},{head:n=!1,get:i=!1,count:s}={}){let o,a=new URL(`${this.url}/rpc/${t}`),l;n||i?(o=n?"HEAD":"GET",Object.entries(e).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{a.searchParams.append(u,h)})):(o="POST",l=e);let c=Object.assign({},this.headers);return s&&(c.Prefer=`count=${s}`),new jd.default({method:o,url:a,headers:c,schema:this.schemaName,body:l,fetch:this.fetch,allowEmpty:!1})}};wr.default=Ms});var gl=ge(B=>{"use strict";var br=B&&B.__importDefault||function(r){return r&&r.__esModule?r:{default:r}};Object.defineProperty(B,"__esModule",{value:!0});B.PostgrestBuilder=B.PostgrestTransformBuilder=B.PostgrestFilterBuilder=B.PostgrestQueryBuilder=B.PostgrestClient=void 0;var ul=br(cl());B.PostgrestClient=ul.default;var hl=br(Os());B.PostgrestQueryBuilder=hl.default;var dl=br(xn());B.PostgrestFilterBuilder=dl.default;var fl=br(Ts());B.PostgrestTransformBuilder=fl.default;var pl=br(As());B.PostgrestBuilder=pl.default;B.default={PostgrestClient:ul.default,PostgrestQueryBuilder:hl.default,PostgrestFilterBuilder:dl.default,PostgrestTransformBuilder:fl.default,PostgrestBuilder:pl.default}});var Lt=class{},rn=class{},Le=class r{constructor(t){this.normalizedNames=new Map,this.lazyUpdate=null,t?typeof t=="string"?this.lazyInit=()=>{this.headers=new Map,t.split(`
`).forEach(e=>{let n=e.indexOf(":");if(n>0){let i=e.slice(0,n),s=i.toLowerCase(),o=e.slice(n+1).trim();this.maybeSetNormalizedName(i,s),this.headers.has(s)?this.headers.get(s).push(o):this.headers.set(s,[o])}})}:typeof Headers<"u"&&t instanceof Headers?(this.headers=new Map,t.forEach((e,n)=>{this.setHeaderEntries(n,e)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(t).forEach(([e,n])=>{this.setHeaderEntries(e,n)})}:this.headers=new Map}has(t){return this.init(),this.headers.has(t.toLowerCase())}get(t){this.init();let e=this.headers.get(t.toLowerCase());return e&&e.length>0?e[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(t){return this.init(),this.headers.get(t.toLowerCase())||null}append(t,e){return this.clone({name:t,value:e,op:"a"})}set(t,e){return this.clone({name:t,value:e,op:"s"})}delete(t,e){return this.clone({name:t,value:e,op:"d"})}maybeSetNormalizedName(t,e){this.normalizedNames.has(e)||this.normalizedNames.set(e,t)}init(){this.lazyInit&&(this.lazyInit instanceof r?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(t=>this.applyUpdate(t)),this.lazyUpdate=null))}copyFrom(t){t.init(),Array.from(t.headers.keys()).forEach(e=>{this.headers.set(e,t.headers.get(e)),this.normalizedNames.set(e,t.normalizedNames.get(e))})}clone(t){let e=new r;return e.lazyInit=this.lazyInit&&this.lazyInit instanceof r?this.lazyInit:this,e.lazyUpdate=(this.lazyUpdate||[]).concat([t]),e}applyUpdate(t){let e=t.name.toLowerCase();switch(t.op){case"a":case"s":let n=t.value;if(typeof n=="string"&&(n=[n]),n.length===0)return;this.maybeSetNormalizedName(t.name,e);let i=(t.op==="a"?this.headers.get(e):void 0)||[];i.push(...n),this.headers.set(e,i);break;case"d":let s=t.value;if(!s)this.headers.delete(e),this.normalizedNames.delete(e);else{let o=this.headers.get(e);if(!o)return;o=o.filter(a=>s.indexOf(a)===-1),o.length===0?(this.headers.delete(e),this.normalizedNames.delete(e)):this.headers.set(e,o)}break}}setHeaderEntries(t,e){let n=(Array.isArray(e)?e:[e]).map(s=>s.toString()),i=t.toLowerCase();this.headers.set(i,n),this.maybeSetNormalizedName(t,i)}forEach(t){this.init(),Array.from(this.normalizedNames.keys()).forEach(e=>t(this.normalizedNames.get(e),this.headers.get(e)))}};var Ti=class{encodeKey(t){return Xo(t)}encodeValue(t){return Xo(t)}decodeKey(t){return decodeURIComponent(t)}decodeValue(t){return decodeURIComponent(t)}};function Lc(r,t){let e=new Map;return r.length>0&&r.replace(/^\?/,"").split("&").forEach(i=>{let s=i.indexOf("="),[o,a]=s==-1?[t.decodeKey(i),""]:[t.decodeKey(i.slice(0,s)),t.decodeValue(i.slice(s+1))],l=e.get(o)||[];l.push(a),e.set(o,l)}),e}var $c=/%(\d[a-f0-9])/gi,Bc={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Xo(r){return encodeURIComponent(r).replace($c,(t,e)=>Bc[e]??t)}function tn(r){return`${r}`}var Ie=class r{constructor(t={}){if(this.updates=null,this.cloneFrom=null,this.encoder=t.encoder||new Ti,t.fromString){if(t.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=Lc(t.fromString,this.encoder)}else t.fromObject?(this.map=new Map,Object.keys(t.fromObject).forEach(e=>{let n=t.fromObject[e],i=Array.isArray(n)?n.map(tn):[tn(n)];this.map.set(e,i)})):this.map=null}has(t){return this.init(),this.map.has(t)}get(t){this.init();let e=this.map.get(t);return e?e[0]:null}getAll(t){return this.init(),this.map.get(t)||null}keys(){return this.init(),Array.from(this.map.keys())}append(t,e){return this.clone({param:t,value:e,op:"a"})}appendAll(t){let e=[];return Object.keys(t).forEach(n=>{let i=t[n];Array.isArray(i)?i.forEach(s=>{e.push({param:n,value:s,op:"a"})}):e.push({param:n,value:i,op:"a"})}),this.clone(e)}set(t,e){return this.clone({param:t,value:e,op:"s"})}delete(t,e){return this.clone({param:t,value:e,op:"d"})}toString(){return this.init(),this.keys().map(t=>{let e=this.encoder.encodeKey(t);return this.map.get(t).map(n=>e+"="+this.encoder.encodeValue(n)).join("&")}).filter(t=>t!=="").join("&")}clone(t){let e=new r({encoder:this.encoder});return e.cloneFrom=this.cloneFrom||this,e.updates=(this.updates||[]).concat(t),e}init(){this.map===null&&(this.map=new Map),this.cloneFrom!==null&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(t=>this.map.set(t,this.cloneFrom.map.get(t))),this.updates.forEach(t=>{switch(t.op){case"a":case"s":let e=(t.op==="a"?this.map.get(t.param):void 0)||[];e.push(tn(t.value)),this.map.set(t.param,e);break;case"d":if(t.value!==void 0){let n=this.map.get(t.param)||[],i=n.indexOf(tn(t.value));i!==-1&&n.splice(i,1),n.length>0?this.map.set(t.param,n):this.map.delete(t.param)}else{this.map.delete(t.param);break}}}),this.cloneFrom=this.updates=null)}};var Di=class{constructor(){this.map=new Map}set(t,e){return this.map.set(t,e),this}get(t){return this.map.has(t)||this.map.set(t,t.defaultValue()),this.map.get(t)}delete(t){return this.map.delete(t),this}has(t){return this.map.has(t)}keys(){return this.map.keys()}};function zc(r){switch(r){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}function Zo(r){return typeof ArrayBuffer<"u"&&r instanceof ArrayBuffer}function Yo(r){return typeof Blob<"u"&&r instanceof Blob}function Qo(r){return typeof FormData<"u"&&r instanceof FormData}function Gc(r){return typeof URLSearchParams<"u"&&r instanceof URLSearchParams}var Vt=class r{constructor(t,e,n,i){this.url=e,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=t.toUpperCase();let s;if(zc(this.method)||i?(this.body=n!==void 0?n:null,s=i):s=n,s&&(this.reportProgress=!!s.reportProgress,this.withCredentials=!!s.withCredentials,s.responseType&&(this.responseType=s.responseType),s.headers&&(this.headers=s.headers),s.context&&(this.context=s.context),s.params&&(this.params=s.params),this.transferCache=s.transferCache),this.headers??=new Le,this.context??=new Di,!this.params)this.params=new Ie,this.urlWithParams=e;else{let o=this.params.toString();if(o.length===0)this.urlWithParams=e;else{let a=e.indexOf("?"),l=a===-1?"?":a<e.length-1?"&":"";this.urlWithParams=e+l+o}}}serializeBody(){return this.body===null?null:typeof this.body=="string"||Zo(this.body)||Yo(this.body)||Qo(this.body)||Gc(this.body)?this.body:this.body instanceof Ie?this.body.toString():typeof this.body=="object"||typeof this.body=="boolean"||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return this.body===null||Qo(this.body)?null:Yo(this.body)?this.body.type||null:Zo(this.body)?null:typeof this.body=="string"?"text/plain":this.body instanceof Ie?"application/x-www-form-urlencoded;charset=UTF-8":typeof this.body=="object"||typeof this.body=="number"||typeof this.body=="boolean"?"application/json":null}clone(t={}){let e=t.method||this.method,n=t.url||this.url,i=t.responseType||this.responseType,s=t.transferCache??this.transferCache,o=t.body!==void 0?t.body:this.body,a=t.withCredentials??this.withCredentials,l=t.reportProgress??this.reportProgress,c=t.headers||this.headers,u=t.params||this.params,h=t.context??this.context;return t.setHeaders!==void 0&&(c=Object.keys(t.setHeaders).reduce((f,p)=>f.set(p,t.setHeaders[p]),c)),t.setParams&&(u=Object.keys(t.setParams).reduce((f,p)=>f.set(p,t.setParams[p]),u)),new r(e,n,o,{params:u,headers:c,context:h,reportProgress:l,responseType:i,withCredentials:a,transferCache:s})}},ot=function(r){return r[r.Sent=0]="Sent",r[r.UploadProgress=1]="UploadProgress",r[r.ResponseHeader=2]="ResponseHeader",r[r.DownloadProgress=3]="DownloadProgress",r[r.Response=4]="Response",r[r.User=5]="User",r}(ot||{}),$t=class{constructor(t,e=on.Ok,n="OK"){this.headers=t.headers||new Le,this.status=t.status!==void 0?t.status:e,this.statusText=t.statusText||n,this.url=t.url||null,this.ok=this.status>=200&&this.status<300}},Ii=class r extends $t{constructor(t={}){super(t),this.type=ot.ResponseHeader}clone(t={}){return new r({headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},nn=class r extends $t{constructor(t={}){super(t),this.type=ot.Response,this.body=t.body!==void 0?t.body:null}clone(t={}){return new r({body:t.body!==void 0?t.body:this.body,headers:t.headers||this.headers,status:t.status!==void 0?t.status:this.status,statusText:t.statusText||this.statusText,url:t.url||this.url||void 0})}},sn=class extends $t{constructor(t){super(t,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.status>=200&&this.status<300?this.message=`Http failure during parsing for ${t.url||"(unknown url)"}`:this.message=`Http failure response for ${t.url||"(unknown url)"}: ${t.status} ${t.statusText}`,this.error=t.error||null}},on=function(r){return r[r.Continue=100]="Continue",r[r.SwitchingProtocols=101]="SwitchingProtocols",r[r.Processing=102]="Processing",r[r.EarlyHints=103]="EarlyHints",r[r.Ok=200]="Ok",r[r.Created=201]="Created",r[r.Accepted=202]="Accepted",r[r.NonAuthoritativeInformation=203]="NonAuthoritativeInformation",r[r.NoContent=204]="NoContent",r[r.ResetContent=205]="ResetContent",r[r.PartialContent=206]="PartialContent",r[r.MultiStatus=207]="MultiStatus",r[r.AlreadyReported=208]="AlreadyReported",r[r.ImUsed=226]="ImUsed",r[r.MultipleChoices=300]="MultipleChoices",r[r.MovedPermanently=301]="MovedPermanently",r[r.Found=302]="Found",r[r.SeeOther=303]="SeeOther",r[r.NotModified=304]="NotModified",r[r.UseProxy=305]="UseProxy",r[r.Unused=306]="Unused",r[r.TemporaryRedirect=307]="TemporaryRedirect",r[r.PermanentRedirect=308]="PermanentRedirect",r[r.BadRequest=400]="BadRequest",r[r.Unauthorized=401]="Unauthorized",r[r.PaymentRequired=402]="PaymentRequired",r[r.Forbidden=403]="Forbidden",r[r.NotFound=404]="NotFound",r[r.MethodNotAllowed=405]="MethodNotAllowed",r[r.NotAcceptable=406]="NotAcceptable",r[r.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",r[r.RequestTimeout=408]="RequestTimeout",r[r.Conflict=409]="Conflict",r[r.Gone=410]="Gone",r[r.LengthRequired=411]="LengthRequired",r[r.PreconditionFailed=412]="PreconditionFailed",r[r.PayloadTooLarge=413]="PayloadTooLarge",r[r.UriTooLong=414]="UriTooLong",r[r.UnsupportedMediaType=415]="UnsupportedMediaType",r[r.RangeNotSatisfiable=416]="RangeNotSatisfiable",r[r.ExpectationFailed=417]="ExpectationFailed",r[r.ImATeapot=418]="ImATeapot",r[r.MisdirectedRequest=421]="MisdirectedRequest",r[r.UnprocessableEntity=422]="UnprocessableEntity",r[r.Locked=423]="Locked",r[r.FailedDependency=424]="FailedDependency",r[r.TooEarly=425]="TooEarly",r[r.UpgradeRequired=426]="UpgradeRequired",r[r.PreconditionRequired=428]="PreconditionRequired",r[r.TooManyRequests=429]="TooManyRequests",r[r.RequestHeaderFieldsTooLarge=431]="RequestHeaderFieldsTooLarge",r[r.UnavailableForLegalReasons=451]="UnavailableForLegalReasons",r[r.InternalServerError=500]="InternalServerError",r[r.NotImplemented=501]="NotImplemented",r[r.BadGateway=502]="BadGateway",r[r.ServiceUnavailable=503]="ServiceUnavailable",r[r.GatewayTimeout=504]="GatewayTimeout",r[r.HttpVersionNotSupported=505]="HttpVersionNotSupported",r[r.VariantAlsoNegotiates=506]="VariantAlsoNegotiates",r[r.InsufficientStorage=507]="InsufficientStorage",r[r.LoopDetected=508]="LoopDetected",r[r.NotExtended=510]="NotExtended",r[r.NetworkAuthenticationRequired=511]="NetworkAuthenticationRequired",r}(on||{});function Ri(r,t){return{body:t,headers:r.headers,context:r.context,observe:r.observe,params:r.params,reportProgress:r.reportProgress,responseType:r.responseType,withCredentials:r.withCredentials,transferCache:r.transferCache}}var qc=(()=>{class r{constructor(e){this.handler=e}request(e,n,i={}){let s;if(e instanceof Vt)s=e;else{let l;i.headers instanceof Le?l=i.headers:l=new Le(i.headers);let c;i.params&&(i.params instanceof Ie?c=i.params:c=new Ie({fromObject:i.params})),s=new Vt(e,n,i.body!==void 0?i.body:null,{headers:l,context:i.context,params:c,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials,transferCache:i.transferCache})}let o=_(s).pipe(Ce(l=>this.handler.handle(l)));if(e instanceof Vt||i.observe==="events")return o;let a=o.pipe(me(l=>l instanceof nn));switch(i.observe||"body"){case"body":switch(s.responseType){case"arraybuffer":return a.pipe(R(l=>{if(l.body!==null&&!(l.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return l.body}));case"blob":return a.pipe(R(l=>{if(l.body!==null&&!(l.body instanceof Blob))throw new Error("Response is not a Blob.");return l.body}));case"text":return a.pipe(R(l=>{if(l.body!==null&&typeof l.body!="string")throw new Error("Response is not a string.");return l.body}));case"json":default:return a.pipe(R(l=>l.body))}case"response":return a;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(e,n={}){return this.request("DELETE",e,n)}get(e,n={}){return this.request("GET",e,n)}head(e,n={}){return this.request("HEAD",e,n)}jsonp(e,n){return this.request("JSONP",e,{params:new Ie().append(n,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(e,n={}){return this.request("OPTIONS",e,n)}patch(e,n,i={}){return this.request("PATCH",e,Ri(i,n))}post(e,n,i={}){return this.request("POST",e,Ri(i,n))}put(e,n,i={}){return this.request("PUT",e,Ri(i,n))}static{this.\u0275fac=function(n){return new(n||r)(E(Lt))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();function Hc(r,t){return t(r)}function Wc(r,t,e){return(n,i)=>le(e,()=>t(n,s=>r(s,i)))}var ra=new O(""),Jc=new O(""),Kc=new O("");var ea=(()=>{class r extends Lt{constructor(e,n){super(),this.backend=e,this.injector=n,this.chain=null,this.pendingTasks=y(qr);let i=y(Kc,{optional:!0});this.backend=i??e}handle(e){if(this.chain===null){let i=Array.from(new Set([...this.injector.get(ra),...this.injector.get(Jc,[])]));this.chain=i.reduceRight((s,o)=>Wc(s,o,this.injector),Hc)}let n=this.pendingTasks.add();return this.chain(e,i=>this.backend.handle(i)).pipe(tt(()=>this.pendingTasks.remove(n)))}static{this.\u0275fac=function(n){return new(n||r)(E(rn),E(Re))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();var Xc=/^\)\]\}',?\n/;function Zc(r){return"responseURL"in r&&r.responseURL?r.responseURL:/^X-Request-URL:/m.test(r.getAllResponseHeaders())?r.getResponseHeader("X-Request-URL"):null}var ta=(()=>{class r{constructor(e){this.xhrFactory=e}handle(e){if(e.method==="JSONP")throw new M(-2800,!1);let n=this.xhrFactory;return(n.\u0275loadImpl?U(n.\u0275loadImpl()):_(null)).pipe(H(()=>new so(s=>{let o=n.build();if(o.open(e.method,e.urlWithParams),e.withCredentials&&(o.withCredentials=!0),e.headers.forEach((g,v)=>o.setRequestHeader(g,v.join(","))),e.headers.has("Accept")||o.setRequestHeader("Accept","application/json, text/plain, */*"),!e.headers.has("Content-Type")){let g=e.detectContentTypeHeader();g!==null&&o.setRequestHeader("Content-Type",g)}if(e.responseType){let g=e.responseType.toLowerCase();o.responseType=g!=="json"?g:"text"}let a=e.serializeBody(),l=null,c=()=>{if(l!==null)return l;let g=o.statusText||"OK",v=new Le(o.getAllResponseHeaders()),T=Zc(o)||e.url;return l=new Ii({headers:v,status:o.status,statusText:g,url:T}),l},u=()=>{let{headers:g,status:v,statusText:T,url:Y}=c(),k=null;v!==on.NoContent&&(k=typeof o.response>"u"?o.responseText:o.response),v===0&&(v=k?on.Ok:0);let $=v>=200&&v<300;if(e.responseType==="json"&&typeof k=="string"){let L=k;k=k.replace(Xc,"");try{k=k!==""?JSON.parse(k):null}catch(xc){k=L,$&&($=!1,k={error:xc,text:k})}}$?(s.next(new nn({body:k,headers:g,status:v,statusText:T,url:Y||void 0})),s.complete()):s.error(new sn({error:k,headers:g,status:v,statusText:T,url:Y||void 0}))},h=g=>{let{url:v}=c(),T=new sn({error:g,status:o.status||0,statusText:o.statusText||"Unknown Error",url:v||void 0});s.error(T)},f=!1,p=g=>{f||(s.next(c()),f=!0);let v={type:ot.DownloadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),e.responseType==="text"&&o.responseText&&(v.partialText=o.responseText),s.next(v)},C=g=>{let v={type:ot.UploadProgress,loaded:g.loaded};g.lengthComputable&&(v.total=g.total),s.next(v)};return o.addEventListener("load",u),o.addEventListener("error",h),o.addEventListener("timeout",h),o.addEventListener("abort",h),e.reportProgress&&(o.addEventListener("progress",p),a!==null&&o.upload&&o.upload.addEventListener("progress",C)),o.send(a),s.next({type:ot.Sent}),()=>{o.removeEventListener("error",h),o.removeEventListener("abort",h),o.removeEventListener("load",u),o.removeEventListener("timeout",h),e.reportProgress&&(o.removeEventListener("progress",p),a!==null&&o.upload&&o.upload.removeEventListener("progress",C)),o.readyState!==o.DONE&&o.abort()}})))}static{this.\u0275fac=function(n){return new(n||r)(E(en))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),na=new O(""),Yc="XSRF-TOKEN",Qc=new O("",{providedIn:"root",factory:()=>Yc}),eu="X-XSRF-TOKEN",tu=new O("",{providedIn:"root",factory:()=>eu}),an=class{},ru=(()=>{class r{constructor(e,n,i){this.doc=e,this.platform=n,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if(this.platform==="server")return null;let e=this.doc.cookie||"";return e!==this.lastCookieString&&(this.parseCount++,this.lastToken=Yr(e,this.cookieName),this.lastCookieString=e),this.lastToken}static{this.\u0275fac=function(n){return new(n||r)(E(z),E(Ue),E(Qc))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();function nu(r,t){let e=r.url.toLowerCase();if(!y(na)||r.method==="GET"||r.method==="HEAD"||e.startsWith("http://")||e.startsWith("https://"))return t(r);let n=y(an).getToken(),i=y(tu);return n!=null&&!r.headers.has(i)&&(r=r.clone({headers:r.headers.set(i,n)})),t(r)}function vp(...r){let t=[qc,ta,ea,{provide:Lt,useExisting:ea},{provide:rn,useExisting:ta},{provide:ra,useValue:nu,multi:!0},{provide:na,useValue:!0},{provide:an,useClass:ru}];for(let e of r)t.push(...e.\u0275providers);return xt(t)}var xi=class extends $o{constructor(){super(...arguments),this.supportsDOMEvents=!0}},ki=class r extends xi{static makeCurrent(){Lo(new r)}onAndCancel(t,e,n){return t.addEventListener(e,n),()=>{t.removeEventListener(e,n)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){t.parentNode&&t.parentNode.removeChild(t)}createElement(t,e){return e=e||this.getDefaultDocument(),e.createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return e==="window"?window:e==="document"?t:e==="body"?t.body:null}getBaseHref(t){let e=su();return e==null?null:ou(e)}resetBaseElement(){Bt=null}getUserAgent(){return window.navigator.userAgent}getCookie(t){return Yr(document.cookie,t)}},Bt=null;function su(){return Bt=Bt||document.querySelector("base"),Bt?Bt.getAttribute("href"):null}function ou(r){return new URL(r,document.baseURI).pathname}var au=(()=>{class r{build(){return new XMLHttpRequest}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),Pi=new O(""),la=(()=>{class r{constructor(e,n){this._zone=n,this._eventNameToPlugin=new Map,e.forEach(i=>{i.manager=this}),this._plugins=e.slice().reverse()}addEventListener(e,n,i){return this._findPluginFor(n).addEventListener(e,n,i)}getZone(){return this._zone}_findPluginFor(e){let n=this._eventNameToPlugin.get(e);if(n)return n;if(n=this._plugins.find(s=>s.supports(e)),!n)throw new M(5101,!1);return this._eventNameToPlugin.set(e,n),n}static{this.\u0275fac=function(n){return new(n||r)(E(Pi),E(te))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),cn=class{constructor(t){this._doc=t}},Oi="ng-app-id",ca=(()=>{class r{constructor(e,n,i,s={}){this.doc=e,this.appId=n,this.nonce=i,this.platformId=s,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=Qr(s),this.resetHostNodes()}addStyles(e){for(let n of e)this.changeUsageCount(n,1)===1&&this.onStyleAdded(n)}removeStyles(e){for(let n of e)this.changeUsageCount(n,-1)<=0&&this.onStyleRemoved(n)}ngOnDestroy(){let e=this.styleNodesInDOM;e&&(e.forEach(n=>n.remove()),e.clear());for(let n of this.getAllStyles())this.onStyleRemoved(n);this.resetHostNodes()}addHost(e){this.hostNodes.add(e);for(let n of this.getAllStyles())this.addStyleToHost(e,n)}removeHost(e){this.hostNodes.delete(e)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(e){for(let n of this.hostNodes)this.addStyleToHost(n,e)}onStyleRemoved(e){let n=this.styleRef;n.get(e)?.elements?.forEach(i=>i.remove()),n.delete(e)}collectServerRenderedStyles(){let e=this.doc.head?.querySelectorAll(`style[${Oi}="${this.appId}"]`);if(e?.length){let n=new Map;return e.forEach(i=>{i.textContent!=null&&n.set(i.textContent,i)}),n}return null}changeUsageCount(e,n){let i=this.styleRef;if(i.has(e)){let s=i.get(e);return s.usage+=n,s.usage}return i.set(e,{usage:n,elements:[]}),n}getStyleElement(e,n){let i=this.styleNodesInDOM,s=i?.get(n);if(s?.parentNode===e)return i.delete(n),s.removeAttribute(Oi),s;{let o=this.doc.createElement("style");return this.nonce&&o.setAttribute("nonce",this.nonce),o.textContent=n,this.platformIsServer&&o.setAttribute(Oi,this.appId),e.appendChild(o),o}}addStyleToHost(e,n){let i=this.getStyleElement(e,n),s=this.styleRef,o=s.get(n)?.elements;o?o.push(i):s.set(n,{elements:[i],usage:1})}resetHostNodes(){let e=this.hostNodes;e.clear(),e.add(this.doc.head)}static{this.\u0275fac=function(n){return new(n||r)(E(z),E(wi),E(bi,8),E(Ue))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),Mi={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},ji=/%COMP%/g,ua="%COMP%",lu=`_nghost-${ua}`,cu=`_ngcontent-${ua}`,uu=!0,hu=new O("",{providedIn:"root",factory:()=>uu});function du(r){return cu.replace(ji,r)}function fu(r){return lu.replace(ji,r)}function ha(r,t){return t.map(e=>e.replace(ji,r))}var ia=(()=>{class r{constructor(e,n,i,s,o,a,l,c=null){this.eventManager=e,this.sharedStylesHost=n,this.appId=i,this.removeStylesOnCompDestroy=s,this.doc=o,this.platformId=a,this.ngZone=l,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=Qr(a),this.defaultRenderer=new zt(e,o,l,this.platformIsServer)}createRenderer(e,n){if(!e||!n)return this.defaultRenderer;this.platformIsServer&&n.encapsulation===Mt.ShadowDom&&(n=P(m({},n),{encapsulation:Mt.Emulated}));let i=this.getOrCreateRenderer(e,n);return i instanceof un?i.applyToHost(e):i instanceof Gt&&i.applyStyles(),i}getOrCreateRenderer(e,n){let i=this.rendererByCompId,s=i.get(n.id);if(!s){let o=this.doc,a=this.ngZone,l=this.eventManager,c=this.sharedStylesHost,u=this.removeStylesOnCompDestroy,h=this.platformIsServer;switch(n.encapsulation){case Mt.Emulated:s=new un(l,c,n,this.appId,u,o,a,h);break;case Mt.ShadowDom:return new Ni(l,c,e,n,o,a,this.nonce,h);default:s=new Gt(l,c,n,u,o,a,h);break}i.set(n.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}static{this.\u0275fac=function(n){return new(n||r)(E(la),E(ca),E(wi),E(hu),E(z),E(Ue),E(te),E(bi))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),zt=class{constructor(t,e,n,i){this.eventManager=t,this.doc=e,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(t,e){return e?this.doc.createElementNS(Mi[e]||e,t):this.doc.createElement(t)}createComment(t){return this.doc.createComment(t)}createText(t){return this.doc.createTextNode(t)}appendChild(t,e){(sa(t)?t.content:t).appendChild(e)}insertBefore(t,e,n){t&&(sa(t)?t.content:t).insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n=typeof t=="string"?this.doc.querySelector(t):t;if(!n)throw new M(-5104,!1);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,i){if(i){e=i+":"+e;let s=Mi[i];s?t.setAttributeNS(s,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){let i=Mi[n];i?t.removeAttributeNS(i,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(Pt.DashCase|Pt.Important)?t.style.setProperty(e,n,i&Pt.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&Pt.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t!=null&&(t[e]=n)}setValue(t,e){t.nodeValue=e}listen(t,e,n){if(typeof t=="string"&&(t=st().getGlobalEventTarget(this.doc,t),!t))throw new Error(`Unsupported event target ${t} for event ${e}`);return this.eventManager.addEventListener(t,e,this.decoratePreventDefault(n))}decoratePreventDefault(t){return e=>{if(e==="__ngUnwrap__")return t;(this.platformIsServer?this.ngZone.runGuarded(()=>t(e)):t(e))===!1&&e.preventDefault()}}};function sa(r){return r.tagName==="TEMPLATE"&&r.content!==void 0}var Ni=class extends zt{constructor(t,e,n,i,s,o,a,l){super(t,s,o,l),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let c=ha(i.id,i.styles);for(let u of c){let h=document.createElement("style");a&&h.setAttribute("nonce",a),h.textContent=u,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Gt=class extends zt{constructor(t,e,n,i,s,o,a,l){super(t,s,o,a),this.sharedStylesHost=e,this.removeStylesOnCompDestroy=i,this.styles=l?ha(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},un=class extends Gt{constructor(t,e,n,i,s,o,a,l){let c=i+"-"+n.id;super(t,e,n,s,o,a,l,c),this.contentAttr=du(c),this.hostAttr=fu(c)}applyToHost(t){this.applyStyles(),this.setAttribute(t,this.hostAttr,"")}createElement(t,e){let n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}},pu=(()=>{class r extends cn{constructor(e){super(e)}supports(e){return!0}addEventListener(e,n,i){return e.addEventListener(n,i,!1),()=>this.removeEventListener(e,n,i)}removeEventListener(e,n,i){return e.removeEventListener(n,i)}static{this.\u0275fac=function(n){return new(n||r)(E(z))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})(),oa=["alt","control","meta","shift"],gu={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},mu={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey},vu=(()=>{class r extends cn{constructor(e){super(e)}supports(e){return r.parseEventName(e)!=null}addEventListener(e,n,i){let s=r.parseEventName(n),o=r.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>st().onAndCancel(e,s.domEventName,o))}static parseEventName(e){let n=e.toLowerCase().split("."),i=n.shift();if(n.length===0||!(i==="keydown"||i==="keyup"))return null;let s=r._normalizeKey(n.pop()),o="",a=n.indexOf("code");if(a>-1&&(n.splice(a,1),o="code."),oa.forEach(c=>{let u=n.indexOf(c);u>-1&&(n.splice(u,1),o+=c+".")}),o+=s,n.length!=0||s.length===0)return null;let l={};return l.domEventName=i,l.fullKey=o,l}static matchEventFullKeyCode(e,n){let i=gu[e.key]||e.key,s="";return n.indexOf("code.")>-1&&(i=e.code,s="code."),i==null||!i?!1:(i=i.toLowerCase(),i===" "?i="space":i==="."&&(i="dot"),oa.forEach(o=>{if(o!==i){let a=mu[o];a(e)&&(s+=o+".")}}),s+=i,s===n)}static eventCallback(e,n,i){return s=>{r.matchEventFullKeyCode(s,e)&&i.runGuarded(()=>n(s))}}static _normalizeKey(e){return e==="esc"?"escape":e}static{this.\u0275fac=function(n){return new(n||r)(E(z))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();function Up(r,t){return Uo(m({rootComponent:r},yu(t)))}function yu(r){return{appProviders:[...Eu,...r?.providers??[]],platformProviders:Cu}}function _u(){ki.makeCurrent()}function wu(){return new _i}function bu(){return bo(document),document}var Cu=[{provide:Ue,useValue:qo},{provide:Co,useValue:_u,multi:!0},{provide:z,useFactory:bu,deps:[]}];var Eu=[{provide:_o,useValue:"root"},{provide:_i,useFactory:wu,deps:[]},{provide:Pi,useClass:pu,multi:!0,deps:[z,te,Ue]},{provide:Pi,useClass:vu,multi:!0,deps:[z]},ia,ca,la,{provide:xo,useExisting:ia},{provide:en,useClass:au,deps:[]},[]];var da=(()=>{class r{constructor(e){this._doc=e}getTitle(){return this._doc.title}setTitle(e){this._doc.title=e||""}static{this.\u0275fac=function(n){return new(n||r)(E(z))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var Su=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:function(n){let i=null;return n?i=new(n||r):i=E(Au),i},providedIn:"root"})}}return r})(),Au=(()=>{class r extends Su{constructor(e){super(),this._doc=e}sanitize(e,n){if(n==null)return null;switch(e){case Ve.NONE:return n;case Ve.HTML:return nt(n,"HTML")?rt(n):Io(this._doc,String(n)).toString();case Ve.STYLE:return nt(n,"Style")?rt(n):n;case Ve.SCRIPT:if(nt(n,"Script"))return rt(n);throw new M(5200,!1);case Ve.URL:return nt(n,"URL")?rt(n):Do(String(n));case Ve.RESOURCE_URL:if(nt(n,"ResourceURL"))return rt(n);throw new M(5201,!1);default:throw new M(5202,!1)}}bypassSecurityTrustHtml(e){return Eo(e)}bypassSecurityTrustStyle(e){return So(e)}bypassSecurityTrustScript(e){return Ao(e)}bypassSecurityTrustUrl(e){return Ro(e)}bypassSecurityTrustResourceUrl(e){return To(e)}static{this.\u0275fac=function(n){return new(n||r)(E(z))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var w="primary",or=Symbol("RouteTitle"),$i=class{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){let e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}};function ht(r){return new $i(r)}function Tu(r,t,e){let n=e.path.split("/");if(n.length>r.length||e.pathMatch==="full"&&(t.hasChildren()||n.length<r.length))return null;let i={};for(let s=0;s<n.length;s++){let o=n[s],a=r[s];if(o.startsWith(":"))i[o.substring(1)]=a;else if(o!==a.path)return null}return{consumed:r.slice(0,n.length),posParams:i}}function Du(r,t){if(r.length!==t.length)return!1;for(let e=0;e<r.length;++e)if(!ue(r[e],t[e]))return!1;return!0}function ue(r,t){let e=r?Bi(r):void 0,n=t?Bi(t):void 0;if(!e||!n||e.length!=n.length)return!1;let i;for(let s=0;s<e.length;s++)if(i=e[s],!ba(r[i],t[i]))return!1;return!0}function Bi(r){return[...Object.keys(r),...Object.getOwnPropertySymbols(r)]}function ba(r,t){if(Array.isArray(r)&&Array.isArray(t)){if(r.length!==t.length)return!1;let e=[...r].sort(),n=[...t].sort();return e.every((i,s)=>n[s]===i)}else return r===t}function Ca(r){return r.length>0?r[r.length-1]:null}function Pe(r){return oo(r)?r:Wr(r)?U(Promise.resolve(r)):_(r)}var Iu={exact:Sa,subset:Aa},Ea={exact:Ou,subset:Mu,ignored:()=>!0};function fa(r,t,e){return Iu[e.paths](r.root,t.root,e.matrixParams)&&Ea[e.queryParams](r.queryParams,t.queryParams)&&!(e.fragment==="exact"&&r.fragment!==t.fragment)}function Ou(r,t){return ue(r,t)}function Sa(r,t,e){if(!Be(r.segments,t.segments)||!fn(r.segments,t.segments,e)||r.numberOfChildren!==t.numberOfChildren)return!1;for(let n in t.children)if(!r.children[n]||!Sa(r.children[n],t.children[n],e))return!1;return!0}function Mu(r,t){return Object.keys(t).length<=Object.keys(r).length&&Object.keys(t).every(e=>ba(r[e],t[e]))}function Aa(r,t,e){return Ra(r,t,t.segments,e)}function Ra(r,t,e,n){if(r.segments.length>e.length){let i=r.segments.slice(0,e.length);return!(!Be(i,e)||t.hasChildren()||!fn(i,e,n))}else if(r.segments.length===e.length){if(!Be(r.segments,e)||!fn(r.segments,e,n))return!1;for(let i in t.children)if(!r.children[i]||!Aa(r.children[i],t.children[i],n))return!1;return!0}else{let i=e.slice(0,r.segments.length),s=e.slice(r.segments.length);return!Be(r.segments,i)||!fn(r.segments,i,n)||!r.children[w]?!1:Ra(r.children[w],t,s,n)}}function fn(r,t,e){return t.every((n,i)=>Ea[e](r[i].parameters,n.parameters))}var Oe=class{constructor(t=new I([],{}),e={},n=null){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap??=ht(this.queryParams),this._queryParamMap}toString(){return Pu.serialize(this)}},I=class{constructor(t,e){this.segments=t,this.children=e,this.parent=null,Object.values(e).forEach(n=>n.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return pn(this)}},$e=class{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap??=ht(this.parameters),this._parameterMap}toString(){return Da(this)}};function xu(r,t){return Be(r,t)&&r.every((e,n)=>ue(e.parameters,t[n].parameters))}function Be(r,t){return r.length!==t.length?!1:r.every((e,n)=>e.path===t[n].path)}function ku(r,t){let e=[];return Object.entries(r.children).forEach(([n,i])=>{n===w&&(e=e.concat(t(i,n)))}),Object.entries(r.children).forEach(([n,i])=>{n!==w&&(e=e.concat(t(i,n)))}),e}var ar=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:()=>new Zt,providedIn:"root"})}}return r})(),Zt=class{parse(t){let e=new Gi(t);return new Oe(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){let e=`/${qt(t.root,!0)}`,n=Fu(t.queryParams),i=typeof t.fragment=="string"?`#${Nu(t.fragment)}`:"";return`${e}${n}${i}`}},Pu=new Zt;function pn(r){return r.segments.map(t=>Da(t)).join("/")}function qt(r,t){if(!r.hasChildren())return pn(r);if(t){let e=r.children[w]?qt(r.children[w],!1):"",n=[];return Object.entries(r.children).forEach(([i,s])=>{i!==w&&n.push(`${i}:${qt(s,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}else{let e=ku(r,(n,i)=>i===w?[qt(r.children[w],!1)]:[`${i}:${qt(n,!1)}`]);return Object.keys(r.children).length===1&&r.children[w]!=null?`${pn(r)}/${e[0]}`:`${pn(r)}/(${e.join("//")})`}}function Ta(r){return encodeURIComponent(r).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function hn(r){return Ta(r).replace(/%3B/gi,";")}function Nu(r){return encodeURI(r)}function zi(r){return Ta(r).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function gn(r){return decodeURIComponent(r)}function pa(r){return gn(r.replace(/\+/g,"%20"))}function Da(r){return`${zi(r.path)}${ju(r.parameters)}`}function ju(r){return Object.entries(r).map(([t,e])=>`;${zi(t)}=${zi(e)}`).join("")}function Fu(r){let t=Object.entries(r).map(([e,n])=>Array.isArray(n)?n.map(i=>`${hn(e)}=${hn(i)}`).join("&"):`${hn(e)}=${hn(n)}`).filter(e=>e);return t.length?`?${t.join("&")}`:""}var Uu=/^[^\/()?;#]+/;function Fi(r){let t=r.match(Uu);return t?t[0]:""}var Vu=/^[^\/()?;=#]+/;function Lu(r){let t=r.match(Vu);return t?t[0]:""}var $u=/^[^=?&#]+/;function Bu(r){let t=r.match($u);return t?t[0]:""}var zu=/^[^&#]+/;function Gu(r){let t=r.match(zu);return t?t[0]:""}var Gi=class{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),this.remaining===""||this.peekStartsWith("?")||this.peekStartsWith("#")?new I([],{}):new I([],this.parseChildren())}parseQueryParams(){let t={};if(this.consumeOptional("?"))do this.parseQueryParam(t);while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(this.remaining==="")return{};this.consumeOptional("/");let t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n[w]=new I(t,e)),n}parseSegment(){let t=Fi(this.remaining);if(t===""&&this.peekStartsWith(";"))throw new M(4009,!1);return this.capture(t),new $e(gn(t),this.parseMatrixParams())}parseMatrixParams(){let t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){let e=Lu(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let i=Fi(this.remaining);i&&(n=i,this.capture(n))}t[gn(e)]=gn(n)}parseQueryParam(t){let e=Bu(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){let o=Gu(this.remaining);o&&(n=o,this.capture(n))}let i=pa(e),s=pa(n);if(t.hasOwnProperty(i)){let o=t[i];Array.isArray(o)||(o=[o],t[i]=o),o.push(s)}else t[i]=s}parseParens(t){let e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){let n=Fi(this.remaining),i=this.remaining[n.length];if(i!=="/"&&i!==")"&&i!==";")throw new M(4010,!1);let s;n.indexOf(":")>-1?(s=n.slice(0,n.indexOf(":")),this.capture(s),this.capture(":")):t&&(s=w);let o=this.parseChildren();e[s]=Object.keys(o).length===1?o[w]:new I([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return this.peekStartsWith(t)?(this.remaining=this.remaining.substring(t.length),!0):!1}capture(t){if(!this.consumeOptional(t))throw new M(4011,!1)}};function Ia(r){return r.segments.length>0?new I([],{[w]:r}):r}function Oa(r){let t={};for(let[n,i]of Object.entries(r.children)){let s=Oa(i);if(n===w&&s.segments.length===0&&s.hasChildren())for(let[o,a]of Object.entries(s.children))t[o]=a;else(s.segments.length>0||s.hasChildren())&&(t[n]=s)}let e=new I(r.segments,t);return qu(e)}function qu(r){if(r.numberOfChildren===1&&r.children[w]){let t=r.children[w];return new I(r.segments.concat(t.segments),t.children)}return r}function dt(r){return r instanceof Oe}function Hu(r,t,e=null,n=null){let i=Ma(r);return xa(i,t,e,n)}function Ma(r){let t;function e(s){let o={};for(let l of s.children){let c=e(l);o[l.outlet]=c}let a=new I(s.url,o);return s===r&&(t=a),a}let n=e(r.root),i=Ia(n);return t??i}function xa(r,t,e,n){let i=r;for(;i.parent;)i=i.parent;if(t.length===0)return Ui(i,i,i,e,n);let s=Wu(t);if(s.toRoot())return Ui(i,i,new I([],{}),e,n);let o=Ju(s,i,r),a=o.processChildren?Jt(o.segmentGroup,o.index,s.commands):Pa(o.segmentGroup,o.index,s.commands);return Ui(i,o.segmentGroup,a,e,n)}function mn(r){return typeof r=="object"&&r!=null&&!r.outlets&&!r.segmentPath}function Yt(r){return typeof r=="object"&&r!=null&&r.outlets}function Ui(r,t,e,n,i){let s={};n&&Object.entries(n).forEach(([l,c])=>{s[l]=Array.isArray(c)?c.map(u=>`${u}`):`${c}`});let o;r===t?o=e:o=ka(r,t,e);let a=Ia(Oa(o));return new Oe(a,s,i)}function ka(r,t,e){let n={};return Object.entries(r.children).forEach(([i,s])=>{s===t?n[i]=e:n[i]=ka(s,t,e)}),new I(r.segments,n)}var vn=class{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&mn(n[0]))throw new M(4003,!1);let i=n.find(Yt);if(i&&i!==Ca(n))throw new M(4004,!1)}toRoot(){return this.isAbsolute&&this.commands.length===1&&this.commands[0]=="/"}};function Wu(r){if(typeof r[0]=="string"&&r.length===1&&r[0]==="/")return new vn(!0,0,r);let t=0,e=!1,n=r.reduce((i,s,o)=>{if(typeof s=="object"&&s!=null){if(s.outlets){let a={};return Object.entries(s.outlets).forEach(([l,c])=>{a[l]=typeof c=="string"?c.split("/"):c}),[...i,{outlets:a}]}if(s.segmentPath)return[...i,s.segmentPath]}return typeof s!="string"?[...i,s]:o===0?(s.split("/").forEach((a,l)=>{l==0&&a==="."||(l==0&&a===""?e=!0:a===".."?t++:a!=""&&i.push(a))}),i):[...i,s]},[]);return new vn(e,t,n)}var ct=class{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}};function Ju(r,t,e){if(r.isAbsolute)return new ct(t,!0,0);if(!e)return new ct(t,!1,NaN);if(e.parent===null)return new ct(e,!0,0);let n=mn(r.commands[0])?0:1,i=e.segments.length-1+n;return Ku(e,i,r.numberOfDoubleDots)}function Ku(r,t,e){let n=r,i=t,s=e;for(;s>i;){if(s-=i,n=n.parent,!n)throw new M(4005,!1);i=n.segments.length}return new ct(n,!1,i-s)}function Xu(r){return Yt(r[0])?r[0].outlets:{[w]:r}}function Pa(r,t,e){if(r??=new I([],{}),r.segments.length===0&&r.hasChildren())return Jt(r,t,e);let n=Zu(r,t,e),i=e.slice(n.commandIndex);if(n.match&&n.pathIndex<r.segments.length){let s=new I(r.segments.slice(0,n.pathIndex),{});return s.children[w]=new I(r.segments.slice(n.pathIndex),r.children),Jt(s,0,i)}else return n.match&&i.length===0?new I(r.segments,{}):n.match&&!r.hasChildren()?qi(r,t,e):n.match?Jt(r,0,i):qi(r,t,e)}function Jt(r,t,e){if(e.length===0)return new I(r.segments,{});{let n=Xu(e),i={};if(Object.keys(n).some(s=>s!==w)&&r.children[w]&&r.numberOfChildren===1&&r.children[w].segments.length===0){let s=Jt(r.children[w],t,e);return new I(r.segments,s.children)}return Object.entries(n).forEach(([s,o])=>{typeof o=="string"&&(o=[o]),o!==null&&(i[s]=Pa(r.children[s],t,o))}),Object.entries(r.children).forEach(([s,o])=>{n[s]===void 0&&(i[s]=o)}),new I(r.segments,i)}}function Zu(r,t,e){let n=0,i=t,s={match:!1,pathIndex:0,commandIndex:0};for(;i<r.segments.length;){if(n>=e.length)return s;let o=r.segments[i],a=e[n];if(Yt(a))break;let l=`${a}`,c=n<e.length-1?e[n+1]:null;if(i>0&&l===void 0)break;if(l&&c&&typeof c=="object"&&c.outlets===void 0){if(!ma(l,c,o))return s;n+=2}else{if(!ma(l,{},o))return s;n++}i++}return{match:!0,pathIndex:i,commandIndex:n}}function qi(r,t,e){let n=r.segments.slice(0,t),i=0;for(;i<e.length;){let s=e[i];if(Yt(s)){let l=Yu(s.outlets);return new I(n,l)}if(i===0&&mn(e[0])){let l=r.segments[t];n.push(new $e(l.path,ga(e[0]))),i++;continue}let o=Yt(s)?s.outlets[w]:`${s}`,a=i<e.length-1?e[i+1]:null;o&&a&&mn(a)?(n.push(new $e(o,ga(a))),i+=2):(n.push(new $e(o,{})),i++)}return new I(n,{})}function Yu(r){let t={};return Object.entries(r).forEach(([e,n])=>{typeof n=="string"&&(n=[n]),n!==null&&(t[e]=qi(new I([],{}),0,n))}),t}function ga(r){let t={};return Object.entries(r).forEach(([e,n])=>t[e]=`${n}`),t}function ma(r,t,e){return r==e.path&&ue(t,e.parameters)}var Kt="imperative",F=function(r){return r[r.NavigationStart=0]="NavigationStart",r[r.NavigationEnd=1]="NavigationEnd",r[r.NavigationCancel=2]="NavigationCancel",r[r.NavigationError=3]="NavigationError",r[r.RoutesRecognized=4]="RoutesRecognized",r[r.ResolveStart=5]="ResolveStart",r[r.ResolveEnd=6]="ResolveEnd",r[r.GuardsCheckStart=7]="GuardsCheckStart",r[r.GuardsCheckEnd=8]="GuardsCheckEnd",r[r.RouteConfigLoadStart=9]="RouteConfigLoadStart",r[r.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",r[r.ChildActivationStart=11]="ChildActivationStart",r[r.ChildActivationEnd=12]="ChildActivationEnd",r[r.ActivationStart=13]="ActivationStart",r[r.ActivationEnd=14]="ActivationEnd",r[r.Scroll=15]="Scroll",r[r.NavigationSkipped=16]="NavigationSkipped",r}(F||{}),re=class{constructor(t,e){this.id=t,this.url=e}},ft=class extends re{constructor(t,e,n="imperative",i=null){super(t,e),this.type=F.NavigationStart,this.navigationTrigger=n,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}},he=class extends re{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n,this.type=F.NavigationEnd}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}},X=function(r){return r[r.Redirect=0]="Redirect",r[r.SupersededByNewNavigation=1]="SupersededByNewNavigation",r[r.NoDataFromResolver=2]="NoDataFromResolver",r[r.GuardRejected=3]="GuardRejected",r}(X||{}),yn=function(r){return r[r.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",r[r.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",r}(yn||{}),Me=class extends re{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=F.NavigationCancel}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}},xe=class extends re{constructor(t,e,n,i){super(t,e),this.reason=n,this.code=i,this.type=F.NavigationSkipped}},Qt=class extends re{constructor(t,e,n,i){super(t,e),this.error=n,this.target=i,this.type=F.NavigationError}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}},_n=class extends re{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=F.RoutesRecognized}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Hi=class extends re{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=F.GuardsCheckStart}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Wi=class extends re{constructor(t,e,n,i,s){super(t,e),this.urlAfterRedirects=n,this.state=i,this.shouldActivate=s,this.type=F.GuardsCheckEnd}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}},Ji=class extends re{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=F.ResolveStart}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Ki=class extends re{constructor(t,e,n,i){super(t,e),this.urlAfterRedirects=n,this.state=i,this.type=F.ResolveEnd}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}},Xi=class{constructor(t){this.route=t,this.type=F.RouteConfigLoadStart}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}},Zi=class{constructor(t){this.route=t,this.type=F.RouteConfigLoadEnd}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}},Yi=class{constructor(t){this.snapshot=t,this.type=F.ChildActivationStart}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},Qi=class{constructor(t){this.snapshot=t,this.type=F.ChildActivationEnd}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},es=class{constructor(t){this.snapshot=t,this.type=F.ActivationStart}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},ts=class{constructor(t){this.snapshot=t,this.type=F.ActivationEnd}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}},wn=class{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n,this.type=F.Scroll}toString(){let t=this.position?`${this.position[0]}, ${this.position[1]}`:null;return`Scroll(anchor: '${this.anchor}', position: '${t}')`}},er=class{},tr=class{constructor(t){this.url=t}};var rs=class{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new lr,this.attachRef=null}},lr=(()=>{class r{constructor(){this.contexts=new Map}onChildOutletCreated(e,n){let i=this.getOrCreateContext(e);i.outlet=n,this.contexts.set(e,i)}onChildOutletDestroyed(e){let n=this.getContext(e);n&&(n.outlet=null,n.attachRef=null)}onOutletDeactivated(){let e=this.contexts;return this.contexts=new Map,e}onOutletReAttached(e){this.contexts=e}getOrCreateContext(e){let n=this.getContext(e);return n||(n=new rs,this.contexts.set(e,n)),n}getContext(e){return this.contexts.get(e)||null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),bn=class{constructor(t){this._root=t}get root(){return this._root.value}parent(t){let e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){let e=ns(t,this._root);return e?e.children.map(n=>n.value):[]}firstChild(t){let e=ns(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){let e=is(t,this._root);return e.length<2?[]:e[e.length-2].children.map(i=>i.value).filter(i=>i!==t)}pathFromRoot(t){return is(t,this._root).map(e=>e.value)}};function ns(r,t){if(r===t.value)return t;for(let e of t.children){let n=ns(r,e);if(n)return n}return null}function is(r,t){if(r===t.value)return[t];for(let e of t.children){let n=is(r,e);if(n.length)return n.unshift(t),n}return[]}var K=class{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}};function lt(r){let t={};return r&&r.children.forEach(e=>t[e.value.outlet]=e),t}var Cn=class extends bn{constructor(t,e){super(t),this.snapshot=e,ps(this,t)}toString(){return this.snapshot.toString()}};function Na(r){let t=Qu(r),e=new Q([new $e("",{})]),n=new Q({}),i=new Q({}),s=new Q({}),o=new Q(""),a=new ke(e,n,s,o,i,w,r,t.root);return a.snapshot=t.root,new Cn(new K(a,[]),t)}function Qu(r){let t={},e={},n={},i="",s=new rr([],t,n,i,e,w,r,null,{});return new En("",new K(s,[]))}var ke=class{constructor(t,e,n,i,s,o,a,l){this.urlSubject=t,this.paramsSubject=e,this.queryParamsSubject=n,this.fragmentSubject=i,this.dataSubject=s,this.outlet=o,this.component=a,this._futureSnapshot=l,this.title=this.dataSubject?.pipe(R(c=>c[or]))??_(void 0),this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=s}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(R(t=>ht(t))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(R(t=>ht(t))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}};function fs(r,t,e="emptyOnly"){let n,{routeConfig:i}=r;return t!==null&&(e==="always"||i?.path===""||!t.component&&!t.routeConfig?.loadComponent)?n={params:m(m({},t.params),r.params),data:m(m({},t.data),r.data),resolve:m(m(m(m({},r.data),t.data),i?.data),r._resolvedData)}:n={params:m({},r.params),data:m({},r.data),resolve:m(m({},r.data),r._resolvedData??{})},i&&Fa(i)&&(n.resolve[or]=i.title),n}var rr=class{get title(){return this.data?.[or]}constructor(t,e,n,i,s,o,a,l,c){this.url=t,this.params=e,this.queryParams=n,this.fragment=i,this.data=s,this.outlet=o,this.component=a,this.routeConfig=l,this._resolve=c}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=ht(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=ht(this.queryParams),this._queryParamMap}toString(){let t=this.url.map(n=>n.toString()).join("/"),e=this.routeConfig?this.routeConfig.path:"";return`Route(url:'${t}', path:'${e}')`}},En=class extends bn{constructor(t,e){super(e),this.url=t,ps(this,e)}toString(){return ja(this._root)}};function ps(r,t){t.value._routerState=r,t.children.forEach(e=>ps(r,e))}function ja(r){let t=r.children.length>0?` { ${r.children.map(ja).join(", ")} } `:"";return`${r.value}${t}`}function Vi(r){if(r.snapshot){let t=r.snapshot,e=r._futureSnapshot;r.snapshot=e,ue(t.queryParams,e.queryParams)||r.queryParamsSubject.next(e.queryParams),t.fragment!==e.fragment&&r.fragmentSubject.next(e.fragment),ue(t.params,e.params)||r.paramsSubject.next(e.params),Du(t.url,e.url)||r.urlSubject.next(e.url),ue(t.data,e.data)||r.dataSubject.next(e.data)}else r.snapshot=r._futureSnapshot,r.dataSubject.next(r._futureSnapshot.data)}function ss(r,t){let e=ue(r.params,t.params)&&xu(r.url,t.url),n=!r.parent!=!t.parent;return e&&!n&&(!r.parent||ss(r.parent,t.parent))}function Fa(r){return typeof r.title=="string"||r.title===null}var eh=(()=>{class r{constructor(){this.activated=null,this._activatedRoute=null,this.name=w,this.activateEvents=new ee,this.deactivateEvents=new ee,this.attachEvents=new ee,this.detachEvents=new ee,this.parentContexts=y(lr),this.location=y(ko),this.changeDetector=y(Zr),this.environmentInjector=y(Re),this.inputBinder=y(Tn,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(e){if(e.name){let{firstChange:n,previousValue:i}=e.name;if(n)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(e){return this.parentContexts.getContext(e)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;let e=this.parentContexts.getContext(this.name);e?.route&&(e.attachRef?this.attach(e.attachRef,e.route):this.activateWith(e.route,e.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new M(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new M(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new M(4012,!1);this.location.detach();let e=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(e.instance),e}attach(e,n){this.activated=e,this._activatedRoute=n,this.location.insert(e.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(e.instance)}deactivate(){if(this.activated){let e=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(e)}}activateWith(e,n){if(this.isActivated)throw new M(4013,!1);this._activatedRoute=e;let i=this.location,o=e.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,l=new os(e,a,i.injector);this.activated=i.createComponent(o,{index:i.length,injector:l,environmentInjector:n??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=j({type:r,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[Te]})}}return r})(),os=class r{__ngOutletInjector(t){return new r(this.route,this.childContexts,t)}constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===ke?this.route:t===lr?this.childContexts:this.parent.get(t,e)}},Tn=new O(""),va=(()=>{class r{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(e){this.unsubscribeFromRouteData(e),this.subscribeToRouteData(e)}unsubscribeFromRouteData(e){this.outletDataSubscriptions.get(e)?.unsubscribe(),this.outletDataSubscriptions.delete(e)}subscribeToRouteData(e){let{activatedRoute:n}=e,i=zr([n.queryParams,n.params,n.data]).pipe(H(([s,o,a],l)=>(a=m(m(m({},s),o),a),l===0?_(a):Promise.resolve(a)))).subscribe(s=>{if(!e.isActivated||!e.activatedComponentRef||e.activatedRoute!==n||n.component===null){this.unsubscribeFromRouteData(e);return}let o=Vo(n.component);if(!o){this.unsubscribeFromRouteData(e);return}for(let{templateName:a}of o.inputs)e.activatedComponentRef.setInput(a,s[a])});this.outletDataSubscriptions.set(e,i)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();function th(r,t,e){let n=nr(r,t._root,e?e._root:void 0);return new Cn(n,t)}function nr(r,t,e){if(e&&r.shouldReuseRoute(t.value,e.value.snapshot)){let n=e.value;n._futureSnapshot=t.value;let i=rh(r,t,e);return new K(n,i)}else{if(r.shouldAttach(t.value)){let s=r.retrieve(t.value);if(s!==null){let o=s.route;return o.value._futureSnapshot=t.value,o.children=t.children.map(a=>nr(r,a)),o}}let n=nh(t.value),i=t.children.map(s=>nr(r,s));return new K(n,i)}}function rh(r,t,e){return t.children.map(n=>{for(let i of e.children)if(r.shouldReuseRoute(n.value,i.value.snapshot))return nr(r,n,i);return nr(r,n)})}function nh(r){return new ke(new Q(r.url),new Q(r.params),new Q(r.queryParams),new Q(r.fragment),new Q(r.data),r.outlet,r.component,r)}var Ua="ngNavigationCancelingError";function Va(r,t){let{redirectTo:e,navigationBehaviorOptions:n}=dt(t)?{redirectTo:t,navigationBehaviorOptions:void 0}:t,i=La(!1,X.Redirect);return i.url=e,i.navigationBehaviorOptions=n,i}function La(r,t){let e=new Error(`NavigationCancelingError: ${r||""}`);return e[Ua]=!0,e.cancellationCode=t,e}function ih(r){return $a(r)&&dt(r.url)}function $a(r){return!!r&&r[Ua]}var sh=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275cmp=yo({type:r,selectors:[["ng-component"]],standalone:!0,features:[Fo],decls:1,vars:0,template:function(n,i){n&1&&jo(0,"router-outlet")},dependencies:[eh],encapsulation:2})}}return r})();function oh(r,t){return r.providers&&!r._injector&&(r._injector=Ei(r.providers,t,`Route: ${r.path}`)),r._injector??t}function gs(r){let t=r.children&&r.children.map(gs),e=t?P(m({},r),{children:t}):m({},r);return!e.component&&!e.loadComponent&&(t||e.loadChildren)&&e.outlet&&e.outlet!==w&&(e.component=sh),e}function de(r){return r.outlet||w}function ah(r,t){let e=r.filter(n=>de(n)===t);return e.push(...r.filter(n=>de(n)!==t)),e}function cr(r){if(!r)return null;if(r.routeConfig?._injector)return r.routeConfig._injector;for(let t=r.parent;t;t=t.parent){let e=t.routeConfig;if(e?._loadedInjector)return e._loadedInjector;if(e?._injector)return e._injector}return null}var lh=(r,t,e,n)=>R(i=>(new as(t,i.targetRouterState,i.currentRouterState,e,n).activate(r),i)),as=class{constructor(t,e,n,i,s){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=i,this.inputBindingEnabled=s}activate(t){let e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),Vi(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){let i=lt(e);t.children.forEach(s=>{let o=s.value.outlet;this.deactivateRoutes(s,i[o],n),delete i[o]}),Object.values(i).forEach(s=>{this.deactivateRouteAndItsChildren(s,n)})}deactivateRoutes(t,e,n){let i=t.value,s=e?e.value:null;if(i===s)if(i.component){let o=n.getContext(i.outlet);o&&this.deactivateChildRoutes(t,e,o.children)}else this.deactivateChildRoutes(t,e,n);else s&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){t.value.component&&this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,s=lt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);if(n&&n.outlet){let o=n.outlet.detach(),a=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:o,route:t,contexts:a})}}deactivateRouteAndOutlet(t,e){let n=e.getContext(t.value.outlet),i=n&&t.value.component?n.children:e,s=lt(t);for(let o of Object.values(s))this.deactivateRouteAndItsChildren(o,i);n&&(n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated()),n.attachRef=null,n.route=null)}activateChildRoutes(t,e,n){let i=lt(e);t.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],n),this.forwardEvent(new ts(s.value.snapshot))}),t.children.length&&this.forwardEvent(new Qi(t.value.snapshot))}activateRoutes(t,e,n){let i=t.value,s=e?e.value:null;if(Vi(i),i===s)if(i.component){let o=n.getOrCreateContext(i.outlet);this.activateChildRoutes(t,e,o.children)}else this.activateChildRoutes(t,e,n);else if(i.component){let o=n.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){let a=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),o.children.onOutletReAttached(a.contexts),o.attachRef=a.componentRef,o.route=a.route.value,o.outlet&&o.outlet.attach(a.componentRef,a.route.value),Vi(a.route.value),this.activateChildRoutes(t,null,o.children)}else{let a=cr(i.snapshot);o.attachRef=null,o.route=i,o.injector=a,o.outlet&&o.outlet.activateWith(i,o.injector),this.activateChildRoutes(t,null,o.children)}}else this.activateChildRoutes(t,null,n)}},Sn=class{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}},ut=class{constructor(t,e){this.component=t,this.route=e}};function ch(r,t,e){let n=r._root,i=t?t._root:null;return Ht(n,i,e,[n.value])}function uh(r){let t=r.routeConfig?r.routeConfig.canActivateChild:null;return!t||t.length===0?null:{node:r,guards:t}}function gt(r,t){let e=Symbol(),n=t.get(r,e);return n===e?typeof r=="function"&&!mo(r)?r:t.get(r):n}function Ht(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=lt(t);return r.children.forEach(o=>{hh(o,s[o.value.outlet],e,n.concat([o.value]),i),delete s[o.value.outlet]}),Object.entries(s).forEach(([o,a])=>Xt(a,e.getContext(o),i)),i}function hh(r,t,e,n,i={canDeactivateChecks:[],canActivateChecks:[]}){let s=r.value,o=t?t.value:null,a=e?e.getContext(r.value.outlet):null;if(o&&s.routeConfig===o.routeConfig){let l=dh(o,s,s.routeConfig.runGuardsAndResolvers);l?i.canActivateChecks.push(new Sn(n)):(s.data=o.data,s._resolvedData=o._resolvedData),s.component?Ht(r,t,a?a.children:null,n,i):Ht(r,t,e,n,i),l&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new ut(a.outlet.component,o))}else o&&Xt(t,a,i),i.canActivateChecks.push(new Sn(n)),s.component?Ht(r,null,a?a.children:null,n,i):Ht(r,null,e,n,i);return i}function dh(r,t,e){if(typeof e=="function")return e(r,t);switch(e){case"pathParamsChange":return!Be(r.url,t.url);case"pathParamsOrQueryParamsChange":return!Be(r.url,t.url)||!ue(r.queryParams,t.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!ss(r,t)||!ue(r.queryParams,t.queryParams);case"paramsChange":default:return!ss(r,t)}}function Xt(r,t,e){let n=lt(r),i=r.value;Object.entries(n).forEach(([s,o])=>{i.component?t?Xt(o,t.children.getContext(s),e):Xt(o,null,e):Xt(o,t,e)}),i.component?t&&t.outlet&&t.outlet.isActivated?e.canDeactivateChecks.push(new ut(t.outlet.component,i)):e.canDeactivateChecks.push(new ut(null,i)):e.canDeactivateChecks.push(new ut(null,i))}function ur(r){return typeof r=="function"}function fh(r){return typeof r=="boolean"}function ph(r){return r&&ur(r.canLoad)}function gh(r){return r&&ur(r.canActivate)}function mh(r){return r&&ur(r.canActivateChild)}function vh(r){return r&&ur(r.canDeactivate)}function yh(r){return r&&ur(r.canMatch)}function Ba(r){return r instanceof ao||r?.name==="EmptyError"}var dn=Symbol("INITIAL_VALUE");function pt(){return H(r=>zr(r.map(t=>t.pipe(et(1),po(dn)))).pipe(R(t=>{for(let e of t)if(e!==!0){if(e===dn)return dn;if(e===!1||e instanceof Oe)return e}return!0}),me(t=>t!==dn),et(1)))}function _h(r,t){return q(e=>{let{targetSnapshot:n,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:o}}=e;return o.length===0&&s.length===0?_(P(m({},e),{guardsResult:!0})):wh(o,n,i,r).pipe(q(a=>a&&fh(a)?bh(n,s,r,t):_(a)),R(a=>P(m({},e),{guardsResult:a})))})}function wh(r,t,e,n){return U(r).pipe(q(i=>Rh(i.component,i.route,e,t,n)),Ee(i=>i!==!0,!0))}function bh(r,t,e,n){return U(t).pipe(Ce(i=>lo(Eh(i.route.parent,n),Ch(i.route,n),Ah(r,i.path,e),Sh(r,i.route,e))),Ee(i=>i!==!0,!0))}function Ch(r,t){return r!==null&&t&&t(new es(r)),_(!0)}function Eh(r,t){return r!==null&&t&&t(new Yi(r)),_(!0)}function Sh(r,t,e){let n=t.routeConfig?t.routeConfig.canActivate:null;if(!n||n.length===0)return _(!0);let i=n.map(s=>pi(()=>{let o=cr(t)??e,a=gt(s,o),l=gh(a)?a.canActivate(t,r):le(o,()=>a(t,r));return Pe(l).pipe(Ee())}));return _(i).pipe(pt())}function Ah(r,t,e){let n=t[t.length-1],s=t.slice(0,t.length-1).reverse().map(o=>uh(o)).filter(o=>o!==null).map(o=>pi(()=>{let a=o.guards.map(l=>{let c=cr(o.node)??e,u=gt(l,c),h=mh(u)?u.canActivateChild(n,r):le(c,()=>u(n,r));return Pe(h).pipe(Ee())});return _(a).pipe(pt())}));return _(s).pipe(pt())}function Rh(r,t,e,n,i){let s=t&&t.routeConfig?t.routeConfig.canDeactivate:null;if(!s||s.length===0)return _(!0);let o=s.map(a=>{let l=cr(t)??i,c=gt(a,l),u=vh(c)?c.canDeactivate(r,t,e,n):le(l,()=>c(r,t,e,n));return Pe(u).pipe(Ee())});return _(o).pipe(pt())}function Th(r,t,e,n){let i=t.canLoad;if(i===void 0||i.length===0)return _(!0);let s=i.map(o=>{let a=gt(o,r),l=ph(a)?a.canLoad(t,e):le(r,()=>a(t,e));return Pe(l)});return _(s).pipe(pt(),za(n))}function za(r){return io(V(t=>{if(dt(t))throw Va(r,t)}),R(t=>t===!0))}function Dh(r,t,e,n){let i=t.canMatch;if(!i||i.length===0)return _(!0);let s=i.map(o=>{let a=gt(o,r),l=yh(a)?a.canMatch(t,e):le(r,()=>a(t,e));return Pe(l)});return _(s).pipe(pt(),za(n))}var ir=class{constructor(t){this.segmentGroup=t||null}},An=class extends Error{constructor(t){super(),this.urlTree=t}};function at(r){return Ot(new ir(r))}function Ih(r){return Ot(new M(4e3,!1))}function Oh(r){return Ot(La(!1,X.GuardRejected))}var ls=class{constructor(t,e){this.urlSerializer=t,this.urlTree=e}lineralizeSegments(t,e){let n=[],i=e.root;for(;;){if(n=n.concat(i.segments),i.numberOfChildren===0)return _(n);if(i.numberOfChildren>1||!i.children[w])return Ih(t.redirectTo);i=i.children[w]}}applyRedirectCommands(t,e,n){let i=this.applyRedirectCreateUrlTree(e,this.urlSerializer.parse(e),t,n);if(e.startsWith("/"))throw new An(i);return i}applyRedirectCreateUrlTree(t,e,n,i){let s=this.createSegmentGroup(t,e.root,n,i);return new Oe(s,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){let n={};return Object.entries(t).forEach(([i,s])=>{if(typeof s=="string"&&s.startsWith(":")){let a=s.substring(1);n[i]=e[a]}else n[i]=s}),n}createSegmentGroup(t,e,n,i){let s=this.createSegments(t,e.segments,n,i),o={};return Object.entries(e.children).forEach(([a,l])=>{o[a]=this.createSegmentGroup(t,l,n,i)}),new I(s,o)}createSegments(t,e,n,i){return e.map(s=>s.path.startsWith(":")?this.findPosParam(t,s,i):this.findOrReturn(s,n))}findPosParam(t,e,n){let i=n[e.path.substring(1)];if(!i)throw new M(4001,!1);return i}findOrReturn(t,e){let n=0;for(let i of e){if(i.path===t.path)return e.splice(n),i;n++}return t}},cs={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Mh(r,t,e,n,i){let s=ms(r,t,e);return s.matched?(n=oh(t,n),Dh(n,t,e,i).pipe(R(o=>o===!0?s:m({},cs)))):_(s)}function ms(r,t,e){if(t.path==="**")return xh(e);if(t.path==="")return t.pathMatch==="full"&&(r.hasChildren()||e.length>0)?m({},cs):{matched:!0,consumedSegments:[],remainingSegments:e,parameters:{},positionalParamSegments:{}};let i=(t.matcher||Tu)(e,r,t);if(!i)return m({},cs);let s={};Object.entries(i.posParams??{}).forEach(([a,l])=>{s[a]=l.path});let o=i.consumed.length>0?m(m({},s),i.consumed[i.consumed.length-1].parameters):s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:e.slice(i.consumed.length),parameters:o,positionalParamSegments:i.posParams??{}}}function xh(r){return{matched:!0,parameters:r.length>0?Ca(r).parameters:{},consumedSegments:r,remainingSegments:[],positionalParamSegments:{}}}function ya(r,t,e,n){return e.length>0&&Nh(r,e,n)?{segmentGroup:new I(t,Ph(n,new I(e,r.children))),slicedSegments:[]}:e.length===0&&jh(r,e,n)?{segmentGroup:new I(r.segments,kh(r,e,n,r.children)),slicedSegments:e}:{segmentGroup:new I(r.segments,r.children),slicedSegments:e}}function kh(r,t,e,n){let i={};for(let s of e)if(Dn(r,t,s)&&!n[de(s)]){let o=new I([],{});i[de(s)]=o}return m(m({},n),i)}function Ph(r,t){let e={};e[w]=t;for(let n of r)if(n.path===""&&de(n)!==w){let i=new I([],{});e[de(n)]=i}return e}function Nh(r,t,e){return e.some(n=>Dn(r,t,n)&&de(n)!==w)}function jh(r,t,e){return e.some(n=>Dn(r,t,n))}function Dn(r,t,e){return(r.hasChildren()||t.length>0)&&e.pathMatch==="full"?!1:e.path===""}function Fh(r,t,e,n){return de(r)!==n&&(n===w||!Dn(t,e,r))?!1:ms(t,r,e).matched}function Uh(r,t,e){return t.length===0&&!r.children[e]}var us=class{};function Vh(r,t,e,n,i,s,o="emptyOnly"){return new hs(r,t,e,n,i,o,s).recognize()}var Lh=31,hs=class{constructor(t,e,n,i,s,o,a){this.injector=t,this.configLoader=e,this.rootComponentType=n,this.config=i,this.urlTree=s,this.paramsInheritanceStrategy=o,this.urlSerializer=a,this.applyRedirects=new ls(this.urlSerializer,this.urlTree),this.absoluteRedirectCount=0,this.allowRedirects=!0}noMatchError(t){return new M(4002,`'${t.segmentGroup}'`)}recognize(){let t=ya(this.urlTree.root,[],[],this.config).segmentGroup;return this.match(t).pipe(R(e=>{let n=new rr([],Object.freeze({}),Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,{},w,this.rootComponentType,null,{}),i=new K(n,e),s=new En("",i),o=Hu(n,[],this.urlTree.queryParams,this.urlTree.fragment);return o.queryParams=this.urlTree.queryParams,s.url=this.urlSerializer.serialize(o),this.inheritParamsAndData(s._root,null),{state:s,tree:o}}))}match(t){return this.processSegmentGroup(this.injector,this.config,t,w).pipe(Qe(n=>{if(n instanceof An)return this.urlTree=n.urlTree,this.match(n.urlTree.root);throw n instanceof ir?this.noMatchError(n):n}))}inheritParamsAndData(t,e){let n=t.value,i=fs(n,e,this.paramsInheritanceStrategy);n.params=Object.freeze(i.params),n.data=Object.freeze(i.data),t.children.forEach(s=>this.inheritParamsAndData(s,n))}processSegmentGroup(t,e,n,i){return n.segments.length===0&&n.hasChildren()?this.processChildren(t,e,n):this.processSegment(t,e,n,n.segments,i,!0).pipe(R(s=>s instanceof K?[s]:[]))}processChildren(t,e,n){let i=[];for(let s of Object.keys(n.children))s==="primary"?i.unshift(s):i.push(s);return U(i).pipe(Ce(s=>{let o=n.children[s],a=ah(e,s);return this.processSegmentGroup(t,a,o,s)}),fo((s,o)=>(s.push(...o),s)),gi(null),ho(),q(s=>{if(s===null)return at(n);let o=Ga(s);return $h(o),_(o)}))}processSegment(t,e,n,i,s,o){return U(e).pipe(Ce(a=>this.processSegmentAgainstRoute(a._injector??t,e,a,n,i,s,o).pipe(Qe(l=>{if(l instanceof ir)return _(null);throw l}))),Ee(a=>!!a),Qe(a=>{if(Ba(a))return Uh(n,i,s)?_(new us):at(n);throw a}))}processSegmentAgainstRoute(t,e,n,i,s,o,a){return Fh(n,i,s,o)?n.redirectTo===void 0?this.matchSegmentAgainstRoute(t,i,n,s,o):this.allowRedirects&&a?this.expandSegmentAgainstRouteUsingRedirect(t,i,e,n,s,o):at(i):at(i)}expandSegmentAgainstRouteUsingRedirect(t,e,n,i,s,o){let{matched:a,consumedSegments:l,positionalParamSegments:c,remainingSegments:u}=ms(e,i,s);if(!a)return at(e);i.redirectTo.startsWith("/")&&(this.absoluteRedirectCount++,this.absoluteRedirectCount>Lh&&(this.allowRedirects=!1));let h=this.applyRedirects.applyRedirectCommands(l,i.redirectTo,c);return this.applyRedirects.lineralizeSegments(i,h).pipe(q(f=>this.processSegment(t,n,e,f.concat(u),o,!1)))}matchSegmentAgainstRoute(t,e,n,i,s){let o=Mh(e,n,i,t,this.urlSerializer);return n.path==="**"&&(e.children={}),o.pipe(H(a=>a.matched?(t=n._injector??t,this.getChildConfig(t,n,i).pipe(H(({routes:l})=>{let c=n._loadedInjector??t,{consumedSegments:u,remainingSegments:h,parameters:f}=a,p=new rr(u,f,Object.freeze(m({},this.urlTree.queryParams)),this.urlTree.fragment,zh(n),de(n),n.component??n._loadedComponent??null,n,Gh(n)),{segmentGroup:C,slicedSegments:g}=ya(e,u,h,l);if(g.length===0&&C.hasChildren())return this.processChildren(c,l,C).pipe(R(T=>T===null?null:new K(p,T)));if(l.length===0&&g.length===0)return _(new K(p,[]));let v=de(n)===s;return this.processSegment(c,l,C,g,v?w:s,!0).pipe(R(T=>new K(p,T instanceof K?[T]:[])))}))):at(e)))}getChildConfig(t,e,n){return e.children?_({routes:e.children,injector:t}):e.loadChildren?e._loadedRoutes!==void 0?_({routes:e._loadedRoutes,injector:e._loadedInjector}):Th(t,e,n,this.urlSerializer).pipe(q(i=>i?this.configLoader.loadChildren(t,e).pipe(V(s=>{e._loadedRoutes=s.routes,e._loadedInjector=s.injector})):Oh(e))):_({routes:[],injector:t})}};function $h(r){r.sort((t,e)=>t.value.outlet===w?-1:e.value.outlet===w?1:t.value.outlet.localeCompare(e.value.outlet))}function Bh(r){let t=r.value.routeConfig;return t&&t.path===""}function Ga(r){let t=[],e=new Set;for(let n of r){if(!Bh(n)){t.push(n);continue}let i=t.find(s=>n.value.routeConfig===s.value.routeConfig);i!==void 0?(i.children.push(...n.children),e.add(i)):t.push(n)}for(let n of e){let i=Ga(n.children);t.push(new K(n.value,i))}return t.filter(n=>!e.has(n))}function zh(r){return r.data||{}}function Gh(r){return r.resolve||{}}function qh(r,t,e,n,i,s){return q(o=>Vh(r,t,e,n,o.extractedUrl,i,s).pipe(R(({state:a,tree:l})=>P(m({},o),{targetSnapshot:a,urlAfterRedirects:l}))))}function Hh(r,t){return q(e=>{let{targetSnapshot:n,guards:{canActivateChecks:i}}=e;if(!i.length)return _(e);let s=new Set(i.map(l=>l.route)),o=new Set;for(let l of s)if(!o.has(l))for(let c of qa(l))o.add(c);let a=0;return U(o).pipe(Ce(l=>s.has(l)?Wh(l,n,r,t):(l.data=fs(l,l.parent,r).resolve,_(void 0))),V(()=>a++),mi(1),q(l=>a===o.size?_(e):be))})}function qa(r){let t=r.children.map(e=>qa(e)).flat();return[r,...t]}function Wh(r,t,e,n){let i=r.routeConfig,s=r._resolve;return i?.title!==void 0&&!Fa(i)&&(s[or]=i.title),Jh(s,r,t,n).pipe(R(o=>(r._resolvedData=o,r.data=fs(r,r.parent,e).resolve,null)))}function Jh(r,t,e,n){let i=Bi(r);if(i.length===0)return _({});let s={};return U(i).pipe(q(o=>Kh(r[o],t,e,n).pipe(Ee(),V(a=>{s[o]=a}))),mi(1),uo(s),Qe(o=>Ba(o)?be:Ot(o)))}function Kh(r,t,e,n){let i=cr(t)??n,s=gt(r,i),o=s.resolve?s.resolve(t,e):le(i,()=>s(t,e));return Pe(o)}function Li(r){return H(t=>{let e=r(t);return e?U(e).pipe(R(()=>t)):_(t)})}var Ha=(()=>{class r{buildTitle(e){let n,i=e.root;for(;i!==void 0;)n=this.getResolvedTitleForRoute(i)??n,i=i.children.find(s=>s.outlet===w);return n}getResolvedTitleForRoute(e){return e.data[or]}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:()=>y(Xh),providedIn:"root"})}}return r})(),Xh=(()=>{class r extends Ha{constructor(e){super(),this.title=e}updateTitle(e){let n=this.buildTitle(e);n!==void 0&&this.title.setTitle(n)}static{this.\u0275fac=function(n){return new(n||r)(E(da))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),hr=new O("",{providedIn:"root",factory:()=>({})}),sr=new O(""),vs=(()=>{class r{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=y(Xr)}loadComponent(e){if(this.componentLoaders.get(e))return this.componentLoaders.get(e);if(e._loadedComponent)return _(e._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(e);let n=Pe(e.loadComponent()).pipe(R(Wa),V(s=>{this.onLoadEndListener&&this.onLoadEndListener(e),e._loadedComponent=s}),tt(()=>{this.componentLoaders.delete(e)})),i=new di(n,()=>new we).pipe(hi());return this.componentLoaders.set(e,i),i}loadChildren(e,n){if(this.childrenLoaders.get(n))return this.childrenLoaders.get(n);if(n._loadedRoutes)return _({routes:n._loadedRoutes,injector:n._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(n);let s=Zh(n,this.compiler,e,this.onLoadEndListener).pipe(tt(()=>{this.childrenLoaders.delete(n)})),o=new di(s,()=>new we).pipe(hi());return this.childrenLoaders.set(n,o),o}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function Zh(r,t,e,n){return Pe(r.loadChildren()).pipe(R(Wa),q(i=>i instanceof No||Array.isArray(i)?_(i):U(t.compileModuleAsync(i))),R(i=>{n&&n(r);let s,o,a=!1;return Array.isArray(i)?(o=i,a=!0):(s=i.create(e).injector,o=s.get(sr,[],{optional:!0,self:!0}).flat()),{routes:o.map(gs),injector:s}}))}function Yh(r){return r&&typeof r=="object"&&"default"in r}function Wa(r){return Yh(r)?r.default:r}var ys=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:()=>y(Qh),providedIn:"root"})}}return r})(),Qh=(()=>{class r{shouldProcessUrl(e){return!0}extract(e){return e}merge(e,n){return e}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ja=new O(""),Ka=new O("");function ed(r,t,e){let n=r.get(Ka),i=r.get(z);return r.get(te).runOutsideAngular(()=>{if(!i.startViewTransition||n.skipNextTransition)return n.skipNextTransition=!1,new Promise(c=>setTimeout(c));let s,o=new Promise(c=>{s=c}),a=i.startViewTransition(()=>(s(),td(r))),{onViewTransitionCreated:l}=n;return l&&le(r,()=>l({transition:a,from:t,to:e})),o})}function td(r){return new Promise(t=>{Ci(t,{injector:r})})}var _s=(()=>{class r{get hasRequestedNavigation(){return this.navigationId!==0}constructor(){this.currentNavigation=null,this.currentTransition=null,this.lastSuccessfulNavigation=null,this.events=new we,this.transitionAbortSubject=new we,this.configLoader=y(vs),this.environmentInjector=y(Re),this.urlSerializer=y(ar),this.rootContexts=y(lr),this.location=y(Ut),this.inputBindingEnabled=y(Tn,{optional:!0})!==null,this.titleStrategy=y(Ha),this.options=y(hr,{optional:!0})||{},this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlHandlingStrategy=y(ys),this.createViewTransition=y(Ja,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>_(void 0),this.rootComponentType=null;let e=i=>this.events.next(new Xi(i)),n=i=>this.events.next(new Zi(i));this.configLoader.onLoadEndListener=n,this.configLoader.onLoadStartListener=e}complete(){this.transitions?.complete()}handleNavigationRequest(e){let n=++this.navigationId;this.transitions?.next(P(m(m({},this.transitions.value),e),{id:n}))}setupNavigations(e,n,i){return this.transitions=new Q({id:0,currentUrlTree:n,currentRawUrl:n,extractedUrl:this.urlHandlingStrategy.extract(n),urlAfterRedirects:this.urlHandlingStrategy.extract(n),rawUrl:n,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Kt,restoredState:null,currentSnapshot:i.snapshot,targetSnapshot:null,currentRouterState:i,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(me(s=>s.id!==0),R(s=>P(m({},s),{extractedUrl:this.urlHandlingStrategy.extract(s.rawUrl)})),H(s=>{let o=!1,a=!1;return _(s).pipe(H(l=>{if(this.navigationId>s.id)return this.cancelNavigationTransition(s,"",X.SupersededByNewNavigation),be;this.currentTransition=s,this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?P(m({},this.lastSuccessfulNavigation),{previousNavigation:null}):null};let c=!e.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl(),u=l.extras.onSameUrlNavigation??e.onSameUrlNavigation;if(!c&&u!=="reload"){let h="";return this.events.next(new xe(l.id,this.urlSerializer.serialize(l.rawUrl),h,yn.IgnoredSameUrlNavigation)),l.resolve(null),be}if(this.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return _(l).pipe(H(h=>{let f=this.transitions?.getValue();return this.events.next(new ft(h.id,this.urlSerializer.serialize(h.extractedUrl),h.source,h.restoredState)),f!==this.transitions?.getValue()?be:Promise.resolve(h)}),qh(this.environmentInjector,this.configLoader,this.rootComponentType,e.config,this.urlSerializer,this.paramsInheritanceStrategy),V(h=>{s.targetSnapshot=h.targetSnapshot,s.urlAfterRedirects=h.urlAfterRedirects,this.currentNavigation=P(m({},this.currentNavigation),{finalUrl:h.urlAfterRedirects});let f=new _n(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(f)}));if(c&&this.urlHandlingStrategy.shouldProcessUrl(l.currentRawUrl)){let{id:h,extractedUrl:f,source:p,restoredState:C,extras:g}=l,v=new ft(h,this.urlSerializer.serialize(f),p,C);this.events.next(v);let T=Na(this.rootComponentType).snapshot;return this.currentTransition=s=P(m({},l),{targetSnapshot:T,urlAfterRedirects:f,extras:P(m({},g),{skipLocationChange:!1,replaceUrl:!1})}),this.currentNavigation.finalUrl=f,_(s)}else{let h="";return this.events.next(new xe(l.id,this.urlSerializer.serialize(l.extractedUrl),h,yn.IgnoredByUrlHandlingStrategy)),l.resolve(null),be}}),V(l=>{let c=new Hi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(c)}),R(l=>(this.currentTransition=s=P(m({},l),{guards:ch(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),s)),_h(this.environmentInjector,l=>this.events.next(l)),V(l=>{if(s.guardsResult=l.guardsResult,dt(l.guardsResult))throw Va(this.urlSerializer,l.guardsResult);let c=new Wi(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(c)}),me(l=>l.guardsResult?!0:(this.cancelNavigationTransition(l,"",X.GuardRejected),!1)),Li(l=>{if(l.guards.canActivateChecks.length)return _(l).pipe(V(c=>{let u=new Ji(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}),H(c=>{let u=!1;return _(c).pipe(Hh(this.paramsInheritanceStrategy,this.environmentInjector),V({next:()=>u=!0,complete:()=>{u||this.cancelNavigationTransition(c,"",X.NoDataFromResolver)}}))}),V(c=>{let u=new Ki(c.id,this.urlSerializer.serialize(c.extractedUrl),this.urlSerializer.serialize(c.urlAfterRedirects),c.targetSnapshot);this.events.next(u)}))}),Li(l=>{let c=u=>{let h=[];u.routeConfig?.loadComponent&&!u.routeConfig._loadedComponent&&h.push(this.configLoader.loadComponent(u.routeConfig).pipe(V(f=>{u.component=f}),R(()=>{})));for(let f of u.children)h.push(...c(f));return h};return zr(c(l.targetSnapshot.root)).pipe(gi(null),et(1))}),Li(()=>this.afterPreactivation()),H(()=>{let{currentSnapshot:l,targetSnapshot:c}=s,u=this.createViewTransition?.(this.environmentInjector,l.root,c.root);return u?U(u).pipe(R(()=>s)):_(s)}),R(l=>{let c=th(e.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return this.currentTransition=s=P(m({},l),{targetRouterState:c}),this.currentNavigation.targetRouterState=c,s}),V(()=>{this.events.next(new er)}),lh(this.rootContexts,e.routeReuseStrategy,l=>this.events.next(l),this.inputBindingEnabled),et(1),V({next:l=>{o=!0,this.lastSuccessfulNavigation=this.currentNavigation,this.events.next(new he(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects))),this.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{o=!0}}),go(this.transitionAbortSubject.pipe(V(l=>{throw l}))),tt(()=>{!o&&!a&&this.cancelNavigationTransition(s,"",X.SupersededByNewNavigation),this.currentTransition?.id===s.id&&(this.currentNavigation=null,this.currentTransition=null)}),Qe(l=>{if(a=!0,$a(l))this.events.next(new Me(s.id,this.urlSerializer.serialize(s.extractedUrl),l.message,l.cancellationCode)),ih(l)?this.events.next(new tr(l.url)):s.resolve(!1);else{this.events.next(new Qt(s.id,this.urlSerializer.serialize(s.extractedUrl),l,s.targetSnapshot??void 0));try{s.resolve(e.errorHandler(l))}catch(c){this.options.resolveNavigationPromiseOnError?s.resolve(!1):s.reject(c)}}return be}))}))}cancelNavigationTransition(e,n,i){let s=new Me(e.id,this.urlSerializer.serialize(e.extractedUrl),n,i);this.events.next(s),e.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){return this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))).toString()!==this.currentTransition?.extractedUrl.toString()&&!this.currentTransition?.extras.skipLocationChange}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function rd(r){return r!==Kt}var nd=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:()=>y(id),providedIn:"root"})}}return r})(),ds=class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}},id=(()=>{class r extends ds{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Xa=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:()=>y(sd),providedIn:"root"})}}return r})(),sd=(()=>{class r extends Xa{constructor(){super(...arguments),this.location=y(Ut),this.urlSerializer=y(ar),this.options=y(hr,{optional:!0})||{},this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.urlHandlingStrategy=y(ys),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.currentUrlTree=new Oe,this.rawUrlTree=this.currentUrlTree,this.currentPageId=0,this.lastSuccessfulId=-1,this.routerState=Na(null),this.stateMemento=this.createStateMemento()}getCurrentUrlTree(){return this.currentUrlTree}getRawUrlTree(){return this.rawUrlTree}restoredState(){return this.location.getState()}get browserPageId(){return this.canceledNavigationResolution!=="computed"?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}getRouterState(){return this.routerState}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}registerNonRouterCurrentEntryChangeListener(e){return this.location.subscribe(n=>{n.type==="popstate"&&e(n.url,n.state)})}handleRouterEvent(e,n){if(e instanceof ft)this.stateMemento=this.createStateMemento();else if(e instanceof xe)this.rawUrlTree=n.initialUrl;else if(e instanceof _n){if(this.urlUpdateStrategy==="eager"&&!n.extras.skipLocationChange){let i=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl);this.setBrowserUrl(i,n)}}else e instanceof er?(this.currentUrlTree=n.finalUrl,this.rawUrlTree=this.urlHandlingStrategy.merge(n.finalUrl,n.initialUrl),this.routerState=n.targetRouterState,this.urlUpdateStrategy==="deferred"&&(n.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,n))):e instanceof Me&&(e.code===X.GuardRejected||e.code===X.NoDataFromResolver)?this.restoreHistory(n):e instanceof Qt?this.restoreHistory(n,!0):e instanceof he&&(this.lastSuccessfulId=e.id,this.currentPageId=this.browserPageId)}setBrowserUrl(e,n){let i=this.urlSerializer.serialize(e);if(this.location.isCurrentPathEqualTo(i)||n.extras.replaceUrl){let s=this.browserPageId,o=m(m({},n.extras.state),this.generateNgRouterState(n.id,s));this.location.replaceState(i,"",o)}else{let s=m(m({},n.extras.state),this.generateNgRouterState(n.id,this.browserPageId+1));this.location.go(i,"",s)}}restoreHistory(e,n=!1){if(this.canceledNavigationResolution==="computed"){let i=this.browserPageId,s=this.currentPageId-i;s!==0?this.location.historyGo(s):this.currentUrlTree===e.finalUrl&&s===0&&(this.resetState(e),this.resetUrlToCurrentUrlTree())}else this.canceledNavigationResolution==="replace"&&(n&&this.resetState(e),this.resetUrlToCurrentUrlTree())}resetState(e){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,e.finalUrl??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(e,n){return this.canceledNavigationResolution==="computed"?{navigationId:e,\u0275routerPageId:n}:{navigationId:e}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Wt=function(r){return r[r.COMPLETE=0]="COMPLETE",r[r.FAILED=1]="FAILED",r[r.REDIRECTING=2]="REDIRECTING",r}(Wt||{});function Za(r,t){r.events.pipe(me(e=>e instanceof he||e instanceof Me||e instanceof Qt||e instanceof xe),R(e=>e instanceof he||e instanceof xe?Wt.COMPLETE:(e instanceof Me?e.code===X.Redirect||e.code===X.SupersededByNewNavigation:!1)?Wt.REDIRECTING:Wt.FAILED),me(e=>e!==Wt.REDIRECTING),et(1)).subscribe(()=>{t()})}function od(r){throw r}var ad={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},ld={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"},oe=(()=>{class r{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}constructor(){this.disposed=!1,this.isNgZoneEnabled=!1,this.console=y(Hr),this.stateManager=y(Xa),this.options=y(hr,{optional:!0})||{},this.pendingTasks=y(qr),this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.navigationTransitions=y(_s),this.urlSerializer=y(ar),this.location=y(Ut),this.urlHandlingStrategy=y(ys),this._events=new we,this.errorHandler=this.options.errorHandler||od,this.navigated=!1,this.routeReuseStrategy=y(nd),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.config=y(sr,{optional:!0})?.flat()??[],this.componentInputBindingEnabled=!!y(Tn,{optional:!0}),this.eventsSubscription=new no,this.isNgZoneEnabled=y(te)instanceof te&&te.isInAngularZone(),this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this,this.currentUrlTree,this.routerState).subscribe({error:e=>{this.console.warn(e)}}),this.subscribeToNavigationEvents()}subscribeToNavigationEvents(){let e=this.navigationTransitions.events.subscribe(n=>{try{let i=this.navigationTransitions.currentTransition,s=this.navigationTransitions.currentNavigation;if(i!==null&&s!==null){if(this.stateManager.handleRouterEvent(n,s),n instanceof Me&&n.code!==X.Redirect&&n.code!==X.SupersededByNewNavigation)this.navigated=!0;else if(n instanceof he)this.navigated=!0;else if(n instanceof tr){let o=this.urlHandlingStrategy.merge(n.url,i.currentRawUrl),a={info:i.extras.info,skipLocationChange:i.extras.skipLocationChange,replaceUrl:this.urlUpdateStrategy==="eager"||rd(i.source)};this.scheduleNavigation(o,Kt,null,a,{resolve:i.resolve,reject:i.reject,promise:i.promise})}}ud(n)&&this._events.next(n)}catch(i){this.navigationTransitions.transitionAbortSubject.next(i)}});this.eventsSubscription.add(e)}resetRootComponentType(e){this.routerState.root.component=e,this.navigationTransitions.rootComponentType=e}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Kt,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((e,n)=>{setTimeout(()=>{this.navigateToSyncWithBrowser(e,"popstate",n)},0)})}navigateToSyncWithBrowser(e,n,i){let s={replaceUrl:!0},o=i?.navigationId?i:null;if(i){let l=m({},i);delete l.navigationId,delete l.\u0275routerPageId,Object.keys(l).length!==0&&(s.state=l)}let a=this.parseUrl(e);this.scheduleNavigation(a,n,o,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(e){this.config=e.map(gs),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription&&(this.nonRouterCurrentEntryChangeSubscription.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0),this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(e,n={}){let{relativeTo:i,queryParams:s,fragment:o,queryParamsHandling:a,preserveFragment:l}=n,c=l?this.currentUrlTree.fragment:o,u=null;switch(a){case"merge":u=m(m({},this.currentUrlTree.queryParams),s);break;case"preserve":u=this.currentUrlTree.queryParams;break;default:u=s||null}u!==null&&(u=this.removeEmptyProps(u));let h;try{let f=i?i.snapshot:this.routerState.snapshot.root;h=Ma(f)}catch{(typeof e[0]!="string"||!e[0].startsWith("/"))&&(e=[]),h=this.currentUrlTree.root}return xa(h,e,u,c??null)}navigateByUrl(e,n={skipLocationChange:!1}){let i=dt(e)?e:this.parseUrl(e),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Kt,null,n)}navigate(e,n={skipLocationChange:!1}){return cd(e),this.navigateByUrl(this.createUrlTree(e,n),n)}serializeUrl(e){return this.urlSerializer.serialize(e)}parseUrl(e){try{return this.urlSerializer.parse(e)}catch{return this.urlSerializer.parse("/")}}isActive(e,n){let i;if(n===!0?i=m({},ad):n===!1?i=m({},ld):i=n,dt(e))return fa(this.currentUrlTree,e,i);let s=this.parseUrl(e);return fa(this.currentUrlTree,s,i)}removeEmptyProps(e){return Object.entries(e).reduce((n,[i,s])=>(s!=null&&(n[i]=s),n),{})}scheduleNavigation(e,n,i,s,o){if(this.disposed)return Promise.resolve(!1);let a,l,c;o?(a=o.resolve,l=o.reject,c=o.promise):c=new Promise((h,f)=>{a=h,l=f});let u=this.pendingTasks.add();return Za(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(u))}),this.navigationTransitions.handleNavigationRequest({source:n,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:e,extras:s,resolve:a,reject:l,promise:c,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),c.catch(h=>Promise.reject(h))}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();function cd(r){for(let t=0;t<r.length;t++)if(r[t]==null)throw new M(4008,!1)}function ud(r){return!(r instanceof er)&&!(r instanceof tr)}var og=(()=>{class r{constructor(e,n,i,s,o,a){this.router=e,this.route=n,this.tabIndexAttribute=i,this.renderer=s,this.el=o,this.locationStrategy=a,this.href=null,this.commands=null,this.onChanges=new we,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;let l=o.nativeElement.tagName?.toLowerCase();this.isAnchorElement=l==="a"||l==="area",this.isAnchorElement?this.subscription=e.events.subscribe(c=>{c instanceof he&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(e){this.tabIndexAttribute!=null||this.isAnchorElement||this.applyAttributeValue("tabindex",e)}ngOnChanges(e){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(e){e!=null?(this.commands=Array.isArray(e)?e:[e],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(e,n,i,s,o){let a=this.urlTree;if(a===null||this.isAnchorElement&&(e!==0||n||i||s||o||typeof this.target=="string"&&this.target!="_self"))return!0;let l={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,l),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){let e=this.urlTree;this.href=e!==null&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(e)):null;let n=this.href===null?null:Oo(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",n)}applyAttributeValue(e,n){let i=this.renderer,s=this.el.nativeElement;n!==null?i.setAttribute(s,e,n):i.removeAttribute(s,e)}get urlTree(){return this.commands===null?null:this.router.createUrlTree(this.commands,{relativeTo:this.relativeTo!==void 0?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static{this.\u0275fac=function(n){return new(n||r)(D(oe),D(ke),wo("tabindex"),D(Nt),D(kt),D(Ft))}}static{this.\u0275dir=j({type:r,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(n,i){n&1&&De("click",function(o){return i.onClick(o.button,o.ctrlKey,o.shiftKey,o.altKey,o.metaKey)}),n&2&&jt("target",i.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[W.HasDecoratorInputTransform,"preserveFragment","preserveFragment",it],skipLocationChange:[W.HasDecoratorInputTransform,"skipLocationChange","skipLocationChange",it],replaceUrl:[W.HasDecoratorInputTransform,"replaceUrl","replaceUrl",it],routerLink:"routerLink"},standalone:!0,features:[Po,Te]})}}return r})();var Rn=class{};var hd=(()=>{class r{constructor(e,n,i,s,o){this.router=e,this.injector=i,this.preloadingStrategy=s,this.loader=o}setUpPreloading(){this.subscription=this.router.events.pipe(me(e=>e instanceof he),Ce(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(e,n){let i=[];for(let s of n){s.providers&&!s._injector&&(s._injector=Ei(s.providers,e,`Route: ${s.path}`));let o=s._injector??e,a=s._loadedInjector??o;(s.loadChildren&&!s._loadedRoutes&&s.canLoad===void 0||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(o,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(a,s.children??s._loadedRoutes))}return U(i).pipe(fi())}preloadConfig(e,n){return this.preloadingStrategy.preload(n,()=>{let i;n.loadChildren&&n.canLoad===void 0?i=this.loader.loadChildren(e,n):i=_(null);let s=i.pipe(q(o=>o===null?_(void 0):(n._loadedRoutes=o.routes,n._loadedInjector=o.injector,this.processRoutes(o.injector??e,o.routes))));if(n.loadComponent&&!n._loadedComponent){let o=this.loader.loadComponent(n);return U([s,o]).pipe(fi())}else return s})}static{this.\u0275fac=function(n){return new(n||r)(E(oe),E(Xr),E(Re),E(Rn),E(vs))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})(),Ya=new O(""),dd=(()=>{class r{constructor(e,n,i,s,o={}){this.urlSerializer=e,this.transitions=n,this.viewportScroller=i,this.zone=s,this.options=o,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},this.environmentInjector=y(Re),o.scrollPositionRestoration||="disabled",o.anchorScrolling||="disabled"}init(){this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof ft?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=e.navigationTrigger,this.restoredId=e.restoredState?e.restoredState.navigationId:0):e instanceof he?(this.lastId=e.id,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.urlAfterRedirects).fragment)):e instanceof xe&&e.code===yn.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(e,this.urlSerializer.parse(e.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(e=>{e instanceof wn&&(e.position?this.options.scrollPositionRestoration==="top"?this.viewportScroller.scrollToPosition([0,0]):this.options.scrollPositionRestoration==="enabled"&&this.viewportScroller.scrollToPosition(e.position):e.anchor&&this.options.anchorScrolling==="enabled"?this.viewportScroller.scrollToAnchor(e.anchor):this.options.scrollPositionRestoration!=="disabled"&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(e,n){this.zone.runOutsideAngular(()=>d(this,null,function*(){yield new Promise(i=>{setTimeout(()=>{i()}),Ci(()=>{i()},{injector:this.environmentInjector})}),this.zone.run(()=>{this.transitions.events.next(new wn(e,this.lastSource==="popstate"?this.store[this.restoredId]:null,n))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static{this.\u0275fac=function(n){Mo()}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac})}}return r})();function ag(r,...t){return xt([{provide:sr,multi:!0,useValue:r},[],{provide:ke,useFactory:Qa,deps:[oe]},{provide:Jr,multi:!0,useFactory:el},t.map(e=>e.\u0275providers)])}function Qa(r){return r.routerState.root}function dr(r,t){return{\u0275kind:r,\u0275providers:t}}function el(){let r=y(Gr);return t=>{let e=r.get(Kr);if(t!==e.components[0])return;let n=r.get(oe),i=r.get(tl);r.get(ws)===1&&n.initialNavigation(),r.get(rl,null,vi.Optional)?.setUpPreloading(),r.get(Ya,null,vi.Optional)?.init(),n.resetRootComponentType(e.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}var tl=new O("",{factory:()=>new we}),ws=new O("",{providedIn:"root",factory:()=>1});function fd(){return dr(2,[{provide:ws,useValue:0},{provide:Ai,multi:!0,deps:[Gr],useFactory:t=>{let e=t.get(Bo,Promise.resolve());return()=>e.then(()=>new Promise(n=>{let i=t.get(oe),s=t.get(tl);Za(i,()=>{n(!0)}),t.get(_s).afterPreactivation=()=>(n(!0),s.closed?_(void 0):s),i.initialNavigation()}))}}])}function pd(){return dr(3,[{provide:Ai,multi:!0,useFactory:()=>{let t=y(oe);return()=>{t.setUpLocationChangeListener()}}},{provide:ws,useValue:2}])}var rl=new O("");function gd(r){return dr(0,[{provide:rl,useExisting:hd},{provide:Rn,useExisting:r}])}function md(){return dr(8,[va,{provide:Tn,useExisting:va}])}function vd(r){let t=[{provide:Ja,useValue:ed},{provide:Ka,useValue:m({skipNextTransition:!!r?.skipInitialTransition},r)}];return dr(9,t)}var _a=new O("ROUTER_FORROOT_GUARD"),yd=[Ut,{provide:ar,useClass:Zt},oe,lr,{provide:ke,useFactory:Qa,deps:[oe]},vs,[]],lg=(()=>{class r{constructor(e){}static forRoot(e,n){return{ngModule:r,providers:[yd,[],{provide:sr,multi:!0,useValue:e},{provide:_a,useFactory:Cd,deps:[[oe,new yi,new vo]]},{provide:hr,useValue:n||{}},n?.useHash?wd():bd(),_d(),n?.preloadingStrategy?gd(n.preloadingStrategy).\u0275providers:[],n?.initialNavigation?Ed(n):[],n?.bindToComponentInputs?md().\u0275providers:[],n?.enableViewTransitions?vd().\u0275providers:[],Sd()]}}static forChild(e){return{ngModule:r,providers:[{provide:sr,multi:!0,useValue:e}]}}static{this.\u0275fac=function(n){return new(n||r)(E(_a,8))}}static{this.\u0275mod=Ae({type:r})}static{this.\u0275inj=Se({})}}return r})();function _d(){return{provide:Ya,useFactory:()=>{let r=y(Ho),t=y(te),e=y(hr),n=y(_s),i=y(ar);return e.scrollOffset&&r.setOffset(e.scrollOffset),new dd(i,n,r,t,e)}}}function wd(){return{provide:Ft,useClass:Go}}function bd(){return{provide:Ft,useClass:zo}}function Cd(r){return"guarded"}function Ed(r){return[r.initialNavigation==="disabled"?pd().\u0275providers:[],r.initialNavigation==="enabledBlocking"?fd().\u0275providers:[]]}var wa=new O("");function Sd(){return[{provide:wa,useFactory:el},{provide:Jr,multi:!0,useExisting:wa}]}var nl=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-MXHTO7MR.js").then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)};var fr=class extends Error{constructor(t,e="FunctionsError",n){super(t),this.name=e,this.context=n}},In=class extends fr{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}},On=class extends fr{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}},Mn=class extends fr{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}},bs=function(r){return r.Any="any",r.ApNortheast1="ap-northeast-1",r.ApNortheast2="ap-northeast-2",r.ApSouth1="ap-south-1",r.ApSoutheast1="ap-southeast-1",r.ApSoutheast2="ap-southeast-2",r.CaCentral1="ca-central-1",r.EuCentral1="eu-central-1",r.EuWest1="eu-west-1",r.EuWest2="eu-west-2",r.EuWest3="eu-west-3",r.SaEast1="sa-east-1",r.UsEast1="us-east-1",r.UsWest1="us-west-1",r.UsWest2="us-west-2",r}(bs||{});var Rd=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},pr=class{constructor(t,{headers:e={},customFetch:n,region:i=bs.Any}={}){this.url=t,this.headers=e,this.region=i,this.fetch=nl(n)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t,e={}){var n;return Rd(this,void 0,void 0,function*(){try{let{headers:i,method:s,body:o}=e,a={},{region:l}=e;l||(l=this.region),l&&l!=="any"&&(a["x-region"]=l);let c;o&&(i&&!Object.prototype.hasOwnProperty.call(i,"Content-Type")||!i)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",c=o):typeof o=="string"?(a["Content-Type"]="text/plain",c=o):typeof FormData<"u"&&o instanceof FormData?c=o:(a["Content-Type"]="application/json",c=JSON.stringify(o)));let u=yield this.fetch(`${this.url}/${t}`,{method:s||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),i),body:c}).catch(C=>{throw new In(C)}),h=u.headers.get("x-relay-error");if(h&&h==="true")throw new On(u);if(!u.ok)throw new Mn(u);let f=((n=u.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return f==="application/json"?p=yield u.json():f==="application/octet-stream"?p=yield u.blob():f==="text/event-stream"?p=u:f==="multipart/form-data"?p=yield u.formData():p=yield u.text(),{data:p,error:null}}catch(i){return{data:null,error:i}}})}};var ml=kc(gl(),1),{PostgrestClient:vl,PostgrestQueryBuilder:Tg,PostgrestFilterBuilder:Dg,PostgrestTransformBuilder:Ig,PostgrestBuilder:Og}=ml.default;var yl="2.10.2";var _l={"X-Client-Info":`realtime-js/${yl}`},wl="1.0.0",Nn=1e4,bl=1e3,mt=function(r){return r[r.connecting=0]="connecting",r[r.open=1]="open",r[r.closing=2]="closing",r[r.closed=3]="closed",r}(mt||{}),Z=function(r){return r.closed="closed",r.errored="errored",r.joined="joined",r.joining="joining",r.leaving="leaving",r}(Z||{}),ne=function(r){return r.close="phx_close",r.error="phx_error",r.join="phx_join",r.reply="phx_reply",r.leave="phx_leave",r.access_token="access_token",r}(ne||{}),xs=function(r){return r.websocket="websocket",r}(xs||{}),ze=function(r){return r.Connecting="connecting",r.Open="open",r.Closing="closing",r.Closed="closed",r}(ze||{});var jn=class{constructor(){this.HEADER_LENGTH=1}decode(t,e){return t.constructor===ArrayBuffer?e(this._binaryDecode(t)):e(typeof t=="string"?JSON.parse(t):{})}_binaryDecode(t){let e=new DataView(t),n=new TextDecoder;return this._decodeBroadcast(t,e,n)}_decodeBroadcast(t,e,n){let i=e.getUint8(1),s=e.getUint8(2),o=this.HEADER_LENGTH+2,a=n.decode(t.slice(o,o+i));o=o+i;let l=n.decode(t.slice(o,o+s));o=o+s;let c=JSON.parse(n.decode(t.slice(o,t.byteLength)));return{ref:null,topic:a,event:l,payload:c}}};var vt=class{constructor(t,e){this.callback=t,this.timerCalc=e,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=e}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}};var x=function(r){return r.abstime="abstime",r.bool="bool",r.date="date",r.daterange="daterange",r.float4="float4",r.float8="float8",r.int2="int2",r.int4="int4",r.int4range="int4range",r.int8="int8",r.int8range="int8range",r.json="json",r.jsonb="jsonb",r.money="money",r.numeric="numeric",r.oid="oid",r.reltime="reltime",r.text="text",r.time="time",r.timestamp="timestamp",r.timestamptz="timestamptz",r.timetz="timetz",r.tsrange="tsrange",r.tstzrange="tstzrange",r}(x||{}),Ps=(r,t,e={})=>{var n;let i=(n=e.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(t).reduce((s,o)=>(s[o]=Ud(o,r,t,i),s),{})},Ud=(r,t,e,n)=>{let i=t.find(a=>a.name===r),s=i?.type,o=e[r];return s&&!n.includes(s)?Cl(s,o):ks(o)},Cl=(r,t)=>{if(r.charAt(0)==="_"){let e=r.slice(1,r.length);return Bd(t,e)}switch(r){case x.bool:return Vd(t);case x.float4:case x.float8:case x.int2:case x.int4:case x.int8:case x.numeric:case x.oid:return Ld(t);case x.json:case x.jsonb:return $d(t);case x.timestamp:return zd(t);case x.abstime:case x.date:case x.daterange:case x.int4range:case x.int8range:case x.money:case x.reltime:case x.text:case x.time:case x.timestamptz:case x.timetz:case x.tsrange:case x.tstzrange:return ks(t);default:return ks(t)}},ks=r=>r,Vd=r=>{switch(r){case"t":return!0;case"f":return!1;default:return r}},Ld=r=>{if(typeof r=="string"){let t=parseFloat(r);if(!Number.isNaN(t))return t}return r},$d=r=>{if(typeof r=="string")try{return JSON.parse(r)}catch(t){return console.log(`JSON parse error: ${t}`),r}return r},Bd=(r,t)=>{if(typeof r!="string")return r;let e=r.length-1,n=r[e];if(r[0]==="{"&&n==="}"){let s,o=r.slice(1,e);try{s=JSON.parse("["+o+"]")}catch{s=o?o.split(","):[]}return s.map(a=>Cl(t,a))}return r},zd=r=>typeof r=="string"?r.replace(" ","T"):r,Fn=r=>{let t=r;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};var yt=class{constructor(t,e,n={},i=Nn){this.channel=t,this.event=e,this.payload=n,this.timeout=i,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,e){var n;return this._hasReceived(t)&&e((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:t,callback:e}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);let t=e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,e){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:e})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:e}){this.recHooks.filter(n=>n.status===t).forEach(n=>n.callback(e))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}};var Cr=class r{constructor(t,e){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};let n=e?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=r.syncState(this.state,i,s,o),this.pendingDiffs.forEach(l=>{this.state=r.syncDiff(this.state,l,s,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},i=>{let{onJoin:s,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(i):(this.state=r.syncDiff(this.state,i,s,o),a())}),this.onJoin((i,s,o)=>{this.channel._trigger("presence",{event:"join",key:i,currentPresences:s,newPresences:o})}),this.onLeave((i,s,o)=>{this.channel._trigger("presence",{event:"leave",key:i,currentPresences:s,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,e,n,i){let s=this.cloneDeep(t),o=this.transformState(e),a={},l={};return this.map(s,(c,u)=>{o[c]||(l[c]=u)}),this.map(o,(c,u)=>{let h=s[c];if(h){let f=u.map(v=>v.presence_ref),p=h.map(v=>v.presence_ref),C=u.filter(v=>p.indexOf(v.presence_ref)<0),g=h.filter(v=>f.indexOf(v.presence_ref)<0);C.length>0&&(a[c]=C),g.length>0&&(l[c]=g)}else a[c]=u}),this.syncDiff(s,{joins:a,leaves:l},n,i)}static syncDiff(t,e,n,i){let{joins:s,leaves:o}={joins:this.transformState(e.joins),leaves:this.transformState(e.leaves)};return n||(n=()=>{}),i||(i=()=>{}),this.map(s,(a,l)=>{var c;let u=(c=t[a])!==null&&c!==void 0?c:[];if(t[a]=this.cloneDeep(l),u.length>0){let h=t[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);t[a].unshift(...f)}n(a,u,l)}),this.map(o,(a,l)=>{let c=t[a];if(!c)return;let u=l.map(h=>h.presence_ref);c=c.filter(h=>u.indexOf(h.presence_ref)<0),t[a]=c,i(a,c,l),c.length===0&&delete t[a]}),t}static map(t,e){return Object.getOwnPropertyNames(t).map(n=>e(n,t[n]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((e,n)=>{let i=t[n];return"metas"in i?e[n]=i.metas.map(s=>(s.presence_ref=s.phx_ref,delete s.phx_ref,delete s.phx_ref_prev,s)):e[n]=i,e},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}};var Er=class r{constructor(t,e={config:{}},n){this.topic=t,this.params=e,this.socket=n,this.bindings={},this.state=Z.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},e.config),this.timeout=this.socket.timeout,this.joinPush=new yt(this,ne.join,this.params,this.timeout),this.rejoinTimer=new vt(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Z.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(i=>i.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Z.closed,this.socket._remove(this)}),this._onError(i=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,i),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Z.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ne.reply,{},(i,s)=>{this._trigger(this._replyEventName(s),i)}),this.presence=new Cr(this),this.broadcastEndpointURL=Fn(this.socket.endPoint)+"/api/broadcast"}subscribe(t,e=this.timeout){var n,i;if(this.socket.isConnected()||this.socket.connect(),this.joinedOnce)throw"tried to subscribe multiple times. 'subscribe' can only be called a single time per channel instance";{let{config:{broadcast:s,presence:o,private:a}}=this.params;this._onError(u=>t&&t("CHANNEL_ERROR",u)),this._onClose(()=>t&&t("CLOSED"));let l={},c={broadcast:s,presence:o,postgres_changes:(i=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&i!==void 0?i:[],private:a};this.socket.accessToken&&(l.access_token=this.socket.accessToken),this.updateJoinPayload(Object.assign({config:c},l)),this.joinedOnce=!0,this._rejoin(e),this.joinPush.receive("ok",({postgres_changes:u})=>{var h;if(this.socket.accessToken&&this.socket.setAuth(this.socket.accessToken),u===void 0){t&&t("SUBSCRIBED");return}else{let f=this.bindings.postgres_changes,p=(h=f?.length)!==null&&h!==void 0?h:0,C=[];for(let g=0;g<p;g++){let v=f[g],{filter:{event:T,schema:Y,table:k,filter:$}}=v,L=u&&u[g];if(L&&L.event===T&&L.schema===Y&&L.table===k&&L.filter===$)C.push(Object.assign(Object.assign({},v),{id:L.id}));else{this.unsubscribe(),t&&t("CHANNEL_ERROR",new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=C,t&&t("SUBSCRIBED");return}}).receive("error",u=>{t&&t("CHANNEL_ERROR",new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{t&&t("TIMED_OUT")})}return this}presenceState(){return this.presence.state}track(n){return d(this,arguments,function*(t,e={}){return yield this.send({type:"presence",event:"track",payload:t},e.timeout||this.timeout)})}untrack(){return d(this,arguments,function*(t={}){return yield this.send({type:"presence",event:"untrack"},t)})}on(t,e,n){return this._on(t,e,n)}send(n){return d(this,arguments,function*(t,e={}){var i,s;if(!this._canPush()&&t.type==="broadcast"){let{event:o,payload:a}=t,l={method:"POST",headers:{Authorization:this.socket.accessToken?`Bearer ${this.socket.accessToken}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:o,payload:a}]})};try{let c=yield this._fetchWithTimeout(this.broadcastEndpointURL,l,(i=e.timeout)!==null&&i!==void 0?i:this.timeout);return yield(s=c.body)===null||s===void 0?void 0:s.cancel(),c.ok?"ok":"error"}catch(c){return c.name==="AbortError"?"timed out":"error"}}else return new Promise(o=>{var a,l,c;let u=this._push(t.type,t,e.timeout||this.timeout);t.type==="broadcast"&&!(!((c=(l=(a=this.params)===null||a===void 0?void 0:a.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&o("ok"),u.receive("ok",()=>o("ok")),u.receive("error",()=>o("error")),u.receive("timeout",()=>o("timed out"))})})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Z.leaving;let e=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ne.close,"leave",this._joinRef())};return this.rejoinTimer.reset(),this.joinPush.destroy(),new Promise(n=>{let i=new yt(this,ne.leave,{},t);i.receive("ok",()=>{e(),n("ok")}).receive("timeout",()=>{e(),n("timed out")}).receive("error",()=>{n("error")}),i.send(),this._canPush()||i.trigger("ok",{})})}_fetchWithTimeout(t,e,n){return d(this,null,function*(){let i=new AbortController,s=setTimeout(()=>i.abort(),n),o=yield this.socket.fetch(t,Object.assign(Object.assign({},e),{signal:i.signal}));return clearTimeout(s),o})}_push(t,e,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let i=new yt(this,t,e,n);return this._canPush()?i.send():(i.startTimeout(),this.pushBuffer.push(i)),i}_onMessage(t,e,n){return e}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,e,n){var i,s;let o=t.toLocaleLowerCase(),{close:a,error:l,leave:c,join:u}=ne;if(n&&[a,l,c,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,e,n);if(e&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(i=this.bindings.postgres_changes)===null||i===void 0||i.filter(p=>{var C,g,v;return((C=p.filter)===null||C===void 0?void 0:C.event)==="*"||((v=(g=p.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(s=this.bindings[o])===null||s===void 0||s.filter(p=>{var C,g,v,T,Y,k;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){let $=p.id,L=(C=p.filter)===null||C===void 0?void 0:C.event;return $&&((g=e.ids)===null||g===void 0?void 0:g.includes($))&&(L==="*"||L?.toLocaleLowerCase()===((v=e.data)===null||v===void 0?void 0:v.type.toLocaleLowerCase()))}else{let $=(Y=(T=p?.filter)===null||T===void 0?void 0:T.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase();return $==="*"||$===((k=e?.event)===null||k===void 0?void 0:k.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){let C=f.data,{schema:g,table:v,commit_timestamp:T,type:Y,errors:k}=C;f=Object.assign(Object.assign({},{schema:g,table:v,commit_timestamp:T,eventType:Y,new:{},old:{},errors:k}),this._getPayloadRecords(C))}p.callback(f,n)})}_isClosed(){return this.state===Z.closed}_isJoined(){return this.state===Z.joined}_isJoining(){return this.state===Z.joining}_isLeaving(){return this.state===Z.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,e,n){let i=t.toLocaleLowerCase(),s={type:i,filter:e,callback:n};return this.bindings[i]?this.bindings[i].push(s):this.bindings[i]=[s],this}_off(t,e){let n=t.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(i=>{var s;return!(((s=i.type)===null||s===void 0?void 0:s.toLocaleLowerCase())===n&&r.isEqual(i.filter,e))}),this}static isEqual(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(let n in t)if(t[n]!==e[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(ne.close,{},t)}_onError(t){this._on(ne.error,{},e=>t(e))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Z.joining,this.joinPush.resend(t))}_getPayloadRecords(t){let e={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(e.new=Ps(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(e.old=Ps(t.columns,t.old_record)),e}};var qd=()=>{},Hd=typeof WebSocket<"u",Sr=class{constructor(t,e){var n;this.accessToken=null,this.apiKey=null,this.channels=[],this.endPoint="",this.httpEndpoint="",this.headers=_l,this.params={},this.timeout=Nn,this.heartbeatIntervalMs=3e4,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.ref=0,this.logger=qd,this.conn=null,this.sendBuffer=[],this.serializer=new jn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this._resolveFetch=s=>{let o;return s?o=s:typeof fetch>"u"?o=(...a)=>import("./chunk-MXHTO7MR.js").then(({default:l})=>l(...a)):o=fetch,(...a)=>o(...a)},this.endPoint=`${t}/${xs.websocket}`,this.httpEndpoint=Fn(t),e?.transport?this.transport=e.transport:this.transport=null,e?.params&&(this.params=e.params),e?.headers&&(this.headers=Object.assign(Object.assign({},this.headers),e.headers)),e?.timeout&&(this.timeout=e.timeout),e?.logger&&(this.logger=e.logger),e?.heartbeatIntervalMs&&(this.heartbeatIntervalMs=e.heartbeatIntervalMs);let i=(n=e?.params)===null||n===void 0?void 0:n.apikey;i&&(this.accessToken=i,this.apiKey=i),this.reconnectAfterMs=e?.reconnectAfterMs?e.reconnectAfterMs:s=>[1e3,2e3,5e3,1e4][s-1]||1e4,this.encode=e?.encode?e.encode:(s,o)=>o(JSON.stringify(s)),this.decode=e?.decode?e.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new vt(()=>d(this,null,function*(){this.disconnect(),this.connect()}),this.reconnectAfterMs),this.fetch=this._resolveFetch(e?.fetch)}connect(){if(!this.conn){if(this.transport){this.conn=new this.transport(this._endPointURL(),void 0,{headers:this.headers});return}if(Hd){this.conn=new WebSocket(this._endPointURL()),this.setupConnection();return}this.conn=new Ns(this._endPointURL(),void 0,{close:()=>{this.conn=null}}),import("./chunk-X6RNDD3M.js").then(({default:t})=>{this.conn=new t(this._endPointURL(),void 0,{headers:this.headers}),this.setupConnection()})}}disconnect(t,e){this.conn&&(this.conn.onclose=function(){},t?this.conn.close(t,e??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset())}getChannels(){return this.channels}removeChannel(t){return d(this,null,function*(){let e=yield t.unsubscribe();return this.channels.length===0&&this.disconnect(),e})}removeAllChannels(){return d(this,null,function*(){let t=yield Promise.all(this.channels.map(e=>e.unsubscribe()));return this.disconnect(),t})}log(t,e,n){this.logger(t,e,n)}connectionState(){switch(this.conn&&this.conn.readyState){case mt.connecting:return ze.Connecting;case mt.open:return ze.Open;case mt.closing:return ze.Closing;default:return ze.Closed}}isConnected(){return this.connectionState()===ze.Open}channel(t,e={config:{}}){let n=new Er(`realtime:${t}`,e,this);return this.channels.push(n),n}push(t){let{topic:e,event:n,payload:i,ref:s}=t,o=()=>{this.encode(t,a=>{var l;(l=this.conn)===null||l===void 0||l.send(a)})};this.log("push",`${e} ${n} (${s})`,i),this.isConnected()?o():this.sendBuffer.push(o)}setAuth(t){this.accessToken=t,this.channels.forEach(e=>{t&&e.updateJoinPayload({access_token:t}),e.joinedOnce&&e._isJoined()&&e._push(ne.access_token,{access_token:t})})}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let e=this.channels.find(n=>n.topic===t&&(n._isJoined()||n._isJoining()));e&&(this.log("transport",`leaving duplicate topic "${t}"`),e.unsubscribe())}_remove(t){this.channels=this.channels.filter(e=>e._joinRef()!==t._joinRef())}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_endPointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:wl}))}_onConnMessage(t){this.decode(t.data,e=>{let{topic:n,event:i,payload:s,ref:o}=e;(o&&o===this.pendingHeartbeatRef||i===s?.type)&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${n} ${i} ${o&&"("+o+")"||""}`,s),this.channels.filter(a=>a._isMember(n)).forEach(a=>a._trigger(i,s,o)),this.stateChangeCallbacks.message.forEach(a=>a(e))})}_onConnOpen(){this.log("transport",`connected to ${this._endPointURL()}`),this._flushSendBuffer(),this.reconnectTimer.reset(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this._sendHeartbeat(),this.heartbeatIntervalMs),this.stateChangeCallbacks.open.forEach(t=>t())}_onConnClose(t){this.log("transport","close",t),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(e=>e(t))}_onConnError(t){this.log("transport",t.message),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(e=>e(t))}_triggerChanError(){this.channels.forEach(t=>t._trigger(ne.error))}_appendParams(t,e){if(Object.keys(e).length===0)return t;let n=t.match(/\?/)?"&":"?",i=new URLSearchParams(e);return`${t}${n}${i}`}_flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_sendHeartbeat(){var t;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),(t=this.conn)===null||t===void 0||t.close(bl,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.setAuth(this.accessToken)}}};var Ns=class{constructor(t,e,n){this.binaryType="arraybuffer",this.onclose=()=>{},this.onerror=()=>{},this.onmessage=()=>{},this.onopen=()=>{},this.readyState=mt.connecting,this.send=()=>{},this.url=null,this.url=t,this.close=n.close}};var _t=class extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}};function N(r){return typeof r=="object"&&r!==null&&"__isStorageError"in r}var Un=class extends _t{constructor(t,e){super(t),this.name="StorageApiError",this.status=e}toJSON(){return{name:this.name,message:this.message,status:this.status}}},Ge=class extends _t{constructor(t,e){super(t),this.name="StorageUnknownError",this.originalError=e}};var Wd=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},Ln=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-MXHTO7MR.js").then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)},El=()=>Wd(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield import("./chunk-MXHTO7MR.js")).Response:Response}),Vn=r=>{if(Array.isArray(r))return r.map(e=>Vn(e));if(typeof r=="function"||r!==Object(r))return r;let t={};return Object.entries(r).forEach(([e,n])=>{let i=e.replace(/([-_][a-z])/gi,s=>s.toUpperCase().replace(/[-_]/g,""));t[i]=Vn(n)}),t};var qe=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},js=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),Jd=(r,t,e)=>qe(void 0,void 0,void 0,function*(){let n=yield El();r instanceof n&&!e?.noResolveJson?r.json().then(i=>{t(new Un(js(i),r.status||500))}).catch(i=>{t(new Ge(js(i),i))}):t(new Ge(js(r),r))}),Kd=(r,t,e,n)=>{let i={method:r,headers:t?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json"},t?.headers),n&&(i.body=JSON.stringify(n)),Object.assign(Object.assign({},i),e))};function Ar(r,t,e,n,i,s){return qe(this,void 0,void 0,function*(){return new Promise((o,a)=>{r(e,Kd(t,n,i,s)).then(l=>{if(!l.ok)throw l;return n?.noResolveJson?l:l.json()}).then(l=>o(l)).catch(l=>Jd(l,a,n))})})}function wt(r,t,e,n){return qe(this,void 0,void 0,function*(){return Ar(r,"GET",t,e,n)})}function fe(r,t,e,n,i){return qe(this,void 0,void 0,function*(){return Ar(r,"POST",t,n,i,e)})}function Sl(r,t,e,n,i){return qe(this,void 0,void 0,function*(){return Ar(r,"PUT",t,n,i,e)})}function Al(r,t,e,n){return qe(this,void 0,void 0,function*(){return Ar(r,"HEAD",t,Object.assign(Object.assign({},e),{noResolveJson:!0}),n)})}function $n(r,t,e,n,i){return qe(this,void 0,void 0,function*(){return Ar(r,"DELETE",t,n,i,e)})}var G=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},Xd={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Rl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1},Bn=class{constructor(t,e={},n,i){this.url=t,this.headers=e,this.bucketId=n,this.fetch=Ln(i)}uploadOrUpdate(t,e,n,i){return G(this,void 0,void 0,function*(){try{let s,o=Object.assign(Object.assign({},Rl),i),a=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(o.upsert)}),l=o.metadata;typeof Blob<"u"&&n instanceof Blob?(s=new FormData,s.append("cacheControl",o.cacheControl),s.append("",n),l&&s.append("metadata",this.encodeMetadata(l))):typeof FormData<"u"&&n instanceof FormData?(s=n,s.append("cacheControl",o.cacheControl),l&&s.append("metadata",this.encodeMetadata(l))):(s=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,l&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(l)))),i?.headers&&(a=Object.assign(Object.assign({},a),i.headers));let c=this._removeEmptyFolders(e),u=this._getFinalPath(c),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:t,body:s,headers:a},o?.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:c,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(s){if(N(s))return{data:null,error:s};throw s}})}upload(t,e,n){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,e,n)})}uploadToSignedUrl(t,e,n,i){return G(this,void 0,void 0,function*(){let s=this._removeEmptyFolders(t),o=this._getFinalPath(s),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",e);try{let l,c=Object.assign({upsert:Rl.upsert},i),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(c.upsert)});typeof Blob<"u"&&n instanceof Blob?(l=new FormData,l.append("cacheControl",c.cacheControl),l.append("",n)):typeof FormData<"u"&&n instanceof FormData?(l=n,l.append("cacheControl",c.cacheControl)):(l=n,u["cache-control"]=`max-age=${c.cacheControl}`,u["content-type"]=c.contentType);let h=yield this.fetch(a.toString(),{method:"PUT",body:l,headers:u}),f=yield h.json();return h.ok?{data:{path:s,fullPath:f.Key},error:null}:{data:null,error:f}}catch(l){if(N(l))return{data:null,error:l};throw l}})}createSignedUploadUrl(t,e){return G(this,void 0,void 0,function*(){try{let n=this._getFinalPath(t),i=Object.assign({},this.headers);e?.upsert&&(i["x-upsert"]="true");let s=yield fe(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:i}),o=new URL(this.url+s.url),a=o.searchParams.get("token");if(!a)throw new _t("No token returned by API");return{data:{signedUrl:o.toString(),path:t,token:a},error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}update(t,e,n){return G(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,e,n)})}move(t,e,n){return G(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:this.headers}),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}copy(t,e,n){return G(this,void 0,void 0,function*(){try{return{data:{path:(yield fe(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:e,destinationBucket:n?.destinationBucket},{headers:this.headers})).Key},error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}createSignedUrl(t,e,n){return G(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t),s=yield fe(this.fetch,`${this.url}/object/sign/${i}`,Object.assign({expiresIn:e},n?.transform?{transform:n.transform}:{}),{headers:this.headers}),o=n?.download?`&download=${n.download===!0?"":n.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${o}`)},{data:s,error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}createSignedUrls(t,e,n){return G(this,void 0,void 0,function*(){try{let i=yield fe(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:e,paths:t},{headers:this.headers}),s=n?.download?`&download=${n.download===!0?"":n.download}`:"";return{data:i.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${s}`):null})),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}download(t,e){return G(this,void 0,void 0,function*(){let i=typeof e?.transform<"u"?"render/image/authenticated":"object",s=this.transformOptsToQueryString(e?.transform||{}),o=s?`?${s}`:"";try{let a=this._getFinalPath(t);return{data:yield(yield wt(this.fetch,`${this.url}/${i}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(N(a))return{data:null,error:a};throw a}})}info(t){return G(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{let n=yield wt(this.fetch,`${this.url}/object/info/${e}`,{headers:this.headers});return{data:Vn(n),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}exists(t){return G(this,void 0,void 0,function*(){let e=this._getFinalPath(t);try{return yield Al(this.fetch,`${this.url}/object/${e}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(N(n)&&n instanceof Ge){let i=n.originalError;if([400,404].includes(i?.status))return{data:!1,error:n}}throw n}})}getPublicUrl(t,e){let n=this._getFinalPath(t),i=[],s=e?.download?`download=${e.download===!0?"":e.download}`:"";s!==""&&i.push(s);let a=typeof e?.transform<"u"?"render/image":"object",l=this.transformOptsToQueryString(e?.transform||{});l!==""&&i.push(l);let c=i.join("&");return c!==""&&(c=`?${c}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${c}`)}}}remove(t){return G(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}list(t,e,n){return G(this,void 0,void 0,function*(){try{let i=Object.assign(Object.assign(Object.assign({},Xd),e),{prefix:t||""});return{data:yield fe(this.fetch,`${this.url}/object/list/${this.bucketId}`,i,{headers:this.headers},n),error:null}}catch(i){if(N(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){let e=[];return t.width&&e.push(`width=${t.width}`),t.height&&e.push(`height=${t.height}`),t.resize&&e.push(`resize=${t.resize}`),t.format&&e.push(`format=${t.format}`),t.quality&&e.push(`quality=${t.quality}`),e.join("&")}};var Tl="2.7.0";var Dl={"X-Client-Info":`storage-js/${Tl}`};var bt=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},zn=class{constructor(t,e={},n){this.url=t,this.headers=Object.assign(Object.assign({},Dl),e),this.fetch=Ln(n)}listBuckets(){return bt(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(t){if(N(t))return{data:null,error:t};throw t}})}getBucket(t){return bt(this,void 0,void 0,function*(){try{return{data:yield wt(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}createBucket(t,e={public:!1}){return bt(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}updateBucket(t,e){return bt(this,void 0,void 0,function*(){try{return{data:yield Sl(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:e.public,file_size_limit:e.fileSizeLimit,allowed_mime_types:e.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(N(n))return{data:null,error:n};throw n}})}emptyBucket(t){return bt(this,void 0,void 0,function*(){try{return{data:yield fe(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}deleteBucket(t){return bt(this,void 0,void 0,function*(){try{return{data:yield $n(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(e){if(N(e))return{data:null,error:e};throw e}})}};var Rr=class extends zn{constructor(t,e={},n){super(t,e,n)}from(t){return new Bn(this.url,this.headers,t,this.fetch)}};var Il="2.45.4";var Tr="";typeof Deno<"u"?Tr="deno":typeof document<"u"?Tr="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Tr="react-native":Tr="node";var Zd={"X-Client-Info":`supabase-js-${Tr}/${Il}`},Ol={headers:Zd},Ml={schema:"public"},xl={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},kl={};Ko();var Yd=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},Qd=r=>{let t;return r?t=r:typeof fetch>"u"?t=Wo:t=fetch,(...e)=>t(...e)},ef=()=>typeof Headers>"u"?Jo:Headers,Pl=(r,t,e)=>{let n=Qd(e),i=ef();return(s,o)=>Yd(void 0,void 0,void 0,function*(){var a;let l=(a=yield t())!==null&&a!==void 0?a:r,c=new i(o?.headers);return c.has("apikey")||c.set("apikey",r),c.has("Authorization")||c.set("Authorization",`Bearer ${l}`),n(s,Object.assign(Object.assign({},o),{headers:c}))})};var tf=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})};function Nl(r){return r.replace(/\/$/,"")}function jl(r,t){let{db:e,auth:n,realtime:i,global:s}=r,{db:o,auth:a,realtime:l,global:c}=t,u={db:Object.assign(Object.assign({},o),e),auth:Object.assign(Object.assign({},a),n),realtime:Object.assign(Object.assign({},l),i),global:Object.assign(Object.assign({},c),s),accessToken:()=>tf(this,void 0,void 0,function*(){return""})};return r.accessToken?u.accessToken=r.accessToken:delete u.accessToken,u}var Gn="2.65.0";var Fl="http://localhost:9999",Ul="supabase.auth.token";var Vl={"X-Client-Info":`gotrue-js/${Gn}`},Fs=10;var Dr="X-Supabase-Api-Version",Us={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}};function Ll(r){return Math.round(Date.now()/1e3)+r}function $l(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){let t=Math.random()*16|0;return(r=="x"?t:t&3|8).toString(16)})}var ie=()=>typeof document<"u",He={tested:!1,writable:!1},Ne=()=>{if(!ie())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(He.tested)return He.writable;let r=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(r,r),globalThis.localStorage.removeItem(r),He.tested=!0,He.writable=!0}catch{He.tested=!0,He.writable=!1}return He.writable};function qn(r){let t={},e=new URL(r);if(e.hash&&e.hash[0]==="#")try{new URLSearchParams(e.hash.substring(1)).forEach((i,s)=>{t[s]=i})}catch{}return e.searchParams.forEach((n,i)=>{t[i]=n}),t}var Hn=r=>{let t;return r?t=r:typeof fetch>"u"?t=(...e)=>import("./chunk-MXHTO7MR.js").then(({default:n})=>n(...e)):t=fetch,(...e)=>t(...e)},Bl=r=>typeof r=="object"&&r!==null&&"status"in r&&"ok"in r&&"json"in r&&typeof r.json=="function",Vs=(r,t,e)=>d(void 0,null,function*(){yield r.setItem(t,JSON.stringify(e))}),Or=(r,t)=>d(void 0,null,function*(){let e=yield r.getItem(t);if(!e)return null;try{return JSON.parse(e)}catch{return e}}),Mr=(r,t)=>d(void 0,null,function*(){yield r.removeItem(t)});function rf(r){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",e="",n,i,s,o,a,l,c,u=0;for(r=r.replace("-","+").replace("_","/");u<r.length;)o=t.indexOf(r.charAt(u++)),a=t.indexOf(r.charAt(u++)),l=t.indexOf(r.charAt(u++)),c=t.indexOf(r.charAt(u++)),n=o<<2|a>>4,i=(a&15)<<4|l>>2,s=(l&3)<<6|c,e=e+String.fromCharCode(n),l!=64&&i!=0&&(e=e+String.fromCharCode(i)),c!=64&&s!=0&&(e=e+String.fromCharCode(s));return e}var Ir=class r{constructor(){this.promise=new r.promiseConstructor((t,e)=>{this.resolve=t,this.reject=e})}};Ir.promiseConstructor=Promise;function Ls(r){let t=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}=?$|[a-z0-9_-]{2}(==)?$)$/i,e=r.split(".");if(e.length!==3)throw new Error("JWT is not valid: not a JWT structure");if(!t.test(e[1]))throw new Error("JWT is not valid: payload is not in base64url format");let n=e[1];return JSON.parse(rf(n))}function zl(r){return d(this,null,function*(){return yield new Promise(t=>{setTimeout(()=>t(null),r)})})}function Gl(r,t){return new Promise((n,i)=>{d(this,null,function*(){for(let s=0;s<1/0;s++)try{let o=yield r(s);if(!t(s,null,o)){n(o);return}}catch(o){if(!t(s,o)){i(o);return}}})})}function nf(r){return("0"+r.toString(16)).substr(-2)}function sf(){let t=new Uint32Array(56);if(typeof crypto>"u"){let e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=e.length,i="";for(let s=0;s<56;s++)i+=e.charAt(Math.floor(Math.random()*n));return i}return crypto.getRandomValues(t),Array.from(t,nf).join("")}function of(r){return d(this,null,function*(){let e=new TextEncoder().encode(r),n=yield crypto.subtle.digest("SHA-256",e),i=new Uint8Array(n);return Array.from(i).map(s=>String.fromCharCode(s)).join("")})}function af(r){return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}function lf(r){return d(this,null,function*(){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),r;let e=yield of(r);return af(e)})}function We(r,t,e=!1){return d(this,null,function*(){let n=sf(),i=n;e&&(i+="/PASSWORD_RECOVERY"),yield Vs(r,`${t}-code-verifier`,i);let s=yield lf(n);return[s,n===s?"plain":"s256"]})}var cf=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ql(r){let t=r.headers.get(Dr);if(!t||!t.match(cf))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}var xr=class extends Error{constructor(t,e,n){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=e,this.code=n}};function b(r){return typeof r=="object"&&r!==null&&"__isAuthError"in r}var Wn=class extends xr{constructor(t,e,n){super(t,e,n),this.name="AuthApiError",this.status=e,this.code=n}};function Hl(r){return b(r)&&r.name==="AuthApiError"}var Ct=class extends xr{constructor(t,e){super(t),this.name="AuthUnknownError",this.originalError=e}},ye=class extends xr{constructor(t,e,n,i){super(t,n,i),this.name=e,this.status=n}},se=class extends ye{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}};function Wl(r){return b(r)&&r.name==="AuthSessionMissingError"}var Et=class extends ye{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}},Je=class extends ye{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}},Ke=class extends ye{constructor(t,e=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},kr=class extends ye{constructor(t,e=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=e}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}},St=class extends ye{constructor(t,e){super(t,"AuthRetryableFetchError",e,void 0)}};function Jn(r){return b(r)&&r.name==="AuthRetryableFetchError"}var Pr=class extends ye{constructor(t,e,n){super(t,"AuthWeakPasswordError",e,"weak_password"),this.reasons=n}};var uf=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},Xe=r=>r.msg||r.message||r.error_description||r.error||JSON.stringify(r),hf=[502,503,504];function Jl(r){return d(this,null,function*(){var t;if(!Bl(r))throw new St(Xe(r),0);if(hf.includes(r.status))throw new St(Xe(r),r.status);let e;try{e=yield r.json()}catch(s){throw new Ct(Xe(s),s)}let n,i=ql(r);if(i&&i.getTime()>=Us["2024-01-01"].timestamp&&typeof e=="object"&&e&&typeof e.code=="string"?n=e.code:typeof e=="object"&&e&&typeof e.error_code=="string"&&(n=e.error_code),n){if(n==="weak_password")throw new Pr(Xe(e),r.status,((t=e.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(n==="session_not_found")throw new se}else if(typeof e=="object"&&e&&typeof e.weak_password=="object"&&e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.reasons.reduce((s,o)=>s&&typeof o=="string",!0))throw new Pr(Xe(e),r.status,e.weak_password.reasons);throw new Wn(Xe(e),r.status||500,n)})}var df=(r,t,e,n)=>{let i={method:r,headers:t?.headers||{}};return r==="GET"?i:(i.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t?.headers),i.body=JSON.stringify(n),Object.assign(Object.assign({},i),e))};function S(r,t,e,n){return d(this,null,function*(){var i;let s=Object.assign({},n?.headers);s[Dr]||(s[Dr]=Us["2024-01-01"].name),n?.jwt&&(s.Authorization=`Bearer ${n.jwt}`);let o=(i=n?.query)!==null&&i!==void 0?i:{};n?.redirectTo&&(o.redirect_to=n.redirectTo);let a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",l=yield ff(r,t,e+a,{headers:s,noResolveJson:n?.noResolveJson},{},n?.body);return n?.xform?n?.xform(l):{data:Object.assign({},l),error:null}})}function ff(r,t,e,n,i,s){return d(this,null,function*(){let o=df(t,n,i,s),a;try{a=yield r(e,Object.assign({},o))}catch(l){throw console.error(l),new St(Xe(l),0)}if(a.ok||(yield Jl(a)),n?.noResolveJson)return a;try{return yield a.json()}catch(l){yield Jl(l)}})}function _e(r){var t;let e=null;pf(r)&&(e=Object.assign({},r),r.expires_at||(e.expires_at=Ll(r.expires_in)));let n=(t=r.user)!==null&&t!==void 0?t:r;return{data:{session:e,user:n},error:null}}function $s(r){let t=_e(r);return!t.error&&r.weak_password&&typeof r.weak_password=="object"&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.message&&typeof r.weak_password.message=="string"&&r.weak_password.reasons.reduce((e,n)=>e&&typeof n=="string",!0)&&(t.data.weak_password=r.weak_password),t}function pe(r){var t;return{data:{user:(t=r.user)!==null&&t!==void 0?t:r},error:null}}function Kl(r){return{data:r,error:null}}function Xl(r){let{action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:s}=r,o=uf(r,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:t,email_otp:e,hashed_token:n,redirect_to:i,verification_type:s},l=Object.assign({},o);return{data:{properties:a,user:l},error:null}}function Zl(r){return r}function pf(r){return r.access_token&&r.refresh_token&&r.expires_in}var gf=function(r,t){var e={};for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&t.indexOf(n)<0&&(e[n]=r[n]);if(r!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,n=Object.getOwnPropertySymbols(r);i<n.length;i++)t.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(r,n[i])&&(e[n[i]]=r[n[i]]);return e},At=class{constructor({url:t="",headers:e={},fetch:n}){this.url=t,this.headers=e,this.fetch=Hn(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}signOut(t,e="global"){return d(this,null,function*(){try{return yield S(this.fetch,"POST",`${this.url}/logout?scope=${e}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(n){if(b(n))return{data:null,error:n};throw n}})}inviteUserByEmail(n){return d(this,arguments,function*(t,e={}){try{return yield S(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:e.data},headers:this.headers,redirectTo:e.redirectTo,xform:pe})}catch(i){if(b(i))return{data:{user:null},error:i};throw i}})}generateLink(t){return d(this,null,function*(){try{let{options:e}=t,n=gf(t,["options"]),i=Object.assign(Object.assign({},n),e);return"newEmail"in n&&(i.new_email=n?.newEmail,delete i.newEmail),yield S(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:i,headers:this.headers,xform:Xl,redirectTo:e?.redirectTo})}catch(e){if(b(e))return{data:{properties:null,user:null},error:e};throw e}})}createUser(t){return d(this,null,function*(){try{return yield S(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:pe})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}listUsers(t){return d(this,null,function*(){var e,n,i,s,o,a,l;try{let c={nextPage:null,lastPage:0,total:0},u=yield S(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(e=t?.page)===null||e===void 0?void 0:e.toString())!==null&&n!==void 0?n:"",per_page:(s=(i=t?.perPage)===null||i===void 0?void 0:i.toString())!==null&&s!==void 0?s:""},xform:Zl});if(u.error)throw u.error;let h=yield u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(l=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&l!==void 0?l:[];return p.length>0&&(p.forEach(C=>{let g=parseInt(C.split(";")[0].split("=")[1].substring(0,1)),v=JSON.parse(C.split(";")[1].split("=")[1]);c[`${v}Page`]=g}),c.total=parseInt(f)),{data:Object.assign(Object.assign({},h),c),error:null}}catch(c){if(b(c))return{data:{users:[]},error:c};throw c}})}getUserById(t){return d(this,null,function*(){try{return yield S(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:pe})}catch(e){if(b(e))return{data:{user:null},error:e};throw e}})}updateUserById(t,e){return d(this,null,function*(){try{return yield S(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:e,headers:this.headers,xform:pe})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}})}deleteUser(t,e=!1){return d(this,null,function*(){try{return yield S(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:e},xform:pe})}catch(n){if(b(n))return{data:{user:null},error:n};throw n}})}_listFactors(t){return d(this,null,function*(){try{let{data:e,error:n}=yield S(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:i=>({data:{factors:i},error:null})});return{data:e,error:n}}catch(e){if(b(e))return{data:null,error:e};throw e}})}_deleteFactor(t){return d(this,null,function*(){try{return{data:yield S(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(e){if(b(e))return{data:null,error:e};throw e}})}};var Yl={getItem:r=>Ne()?globalThis.localStorage.getItem(r):null,setItem:(r,t)=>{Ne()&&globalThis.localStorage.setItem(r,t)},removeItem:r=>{Ne()&&globalThis.localStorage.removeItem(r)}};function Bs(r={}){return{getItem:t=>r[t]||null,setItem:(t,e)=>{r[t]=e},removeItem:t=>{delete r[t]}}}function Ql(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}var Ze={debug:!!(globalThis&&Ne()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")},Nr=class extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}},Kn=class extends Nr{};function zs(r,t,e){return d(this,null,function*(){Ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",r,t);let n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort(),Ze.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",r)},t),yield globalThis.navigator.locks.request(r,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},i=>d(this,null,function*(){if(i){Ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",r,i.name);try{return yield e()}finally{Ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",r,i.name)}}else{if(t===0)throw Ze.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",r),new Kn(`Acquiring an exclusive Navigator LockManager lock "${r}" immediately failed`);if(Ze.debug)try{let s=yield globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(s,null,"  "))}catch(s){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",s)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),yield e()}}))})}Ql();var mf={url:Fl,storageKey:Ul,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Vl,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1},jr=30*1e3,ec=3;function tc(r,t,e){return d(this,null,function*(){return yield e()})}var Gs=(()=>{class r{constructor(e){var n,i;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=r.nextInstanceID,r.nextInstanceID+=1,this.instanceID>0&&ie()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");let s=Object.assign(Object.assign({},mf),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new At({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Hn(s.fetch),this.lock=s.lock||tc,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:ie()&&(!((n=globalThis?.navigator)===null||n===void 0)&&n.locks)?this.lock=zs:this.lock=tc,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ne()?this.storage=Yl:(this.memoryStorage={},this.storage=Bs(this.memoryStorage)):(this.memoryStorage={},this.storage=Bs(this.memoryStorage)),ie()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(o){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",o)}(i=this.broadcastChannel)===null||i===void 0||i.addEventListener("message",o=>d(this,null,function*(){this._debug("received broadcast notification from other tab or client",o),yield this._notifyAllSubscribers(o.data.event,o.data.session,!1)}))}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Gn}) ${new Date().toISOString()}`,...e),this}initialize(){return d(this,null,function*(){return this.initializePromise?yield this.initializePromise:(this.initializePromise=d(this,null,function*(){return yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._initialize()}))}),yield this.initializePromise)})}_initialize(){return d(this,null,function*(){try{let e=ie()?yield this._isPKCEFlow():!1;if(this._debug("#_initialize()","begin","is PKCE flow",e),e||this.detectSessionInUrl&&this._isImplicitGrantFlow()){let{data:n,error:i}=yield this._getSessionFromURL(e);if(i)return this._debug("#_initialize()","error detecting session from URL",i),i?.message==="Identity is already linked"||i?.message==="Identity is already linked to another user"?{error:i}:(yield this._removeSession(),{error:i});let{session:s,redirectType:o}=n;return this._debug("#_initialize()","detected session in URL",s,"redirect type",o),yield this._saveSession(s),setTimeout(()=>d(this,null,function*(){o==="recovery"?yield this._notifyAllSubscribers("PASSWORD_RECOVERY",s):yield this._notifyAllSubscribers("SIGNED_IN",s)}),0),{error:null}}return yield this._recoverAndRefresh(),{error:null}}catch(e){return b(e)?{error:e}:{error:new Ct("Unexpected error during initialization",e)}}finally{yield this._handleVisibilityChange(),this._debug("#_initialize()","end")}})}signInAnonymously(e){return d(this,null,function*(){var n,i,s;try{let o=yield S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(n=e?.options)===null||n===void 0?void 0:n.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(s=e?.options)===null||s===void 0?void 0:s.captchaToken}},xform:_e}),{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}})}signUp(e){return d(this,null,function*(){var n,i,s;try{let o;if("email"in e){let{email:h,password:f,options:p}=e,C=null,g=null;this.flowType==="pkce"&&([C,g]=yield We(this.storage,this.storageKey)),o=yield S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:p?.emailRedirectTo,body:{email:h,password:f,data:(n=p?.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:p?.captchaToken},code_challenge:C,code_challenge_method:g},xform:_e})}else if("phone"in e){let{phone:h,password:f,options:p}=e;o=yield S(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:h,password:f,data:(i=p?.data)!==null&&i!==void 0?i:{},channel:(s=p?.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:p?.captchaToken}},xform:_e})}else throw new Je("You must provide either an email or phone number and a password");let{data:a,error:l}=o;if(l||!a)return{data:{user:null,session:null},error:l};let c=a.session,u=a.user;return a.session&&(yield this._saveSession(a.session),yield this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(o){if(b(o))return{data:{user:null,session:null},error:o};throw o}})}signInWithPassword(e){return d(this,null,function*(){try{let n;if("email"in e){let{email:o,password:a,options:l}=e;n=yield S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:$s})}else if("phone"in e){let{phone:o,password:a,options:l}=e;n=yield S(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:o,password:a,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:$s})}else throw new Je("You must provide either an email or phone number and a password");let{data:i,error:s}=n;return s?{data:{user:null,session:null},error:s}:!i||!i.session||!i.user?{data:{user:null,session:null},error:new Et}:(i.session&&(yield this._saveSession(i.session),yield this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:s})}catch(n){if(b(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOAuth(e){return d(this,null,function*(){var n,i,s,o;return yield this._handleProviderSignIn(e.provider,{redirectTo:(n=e.options)===null||n===void 0?void 0:n.redirectTo,scopes:(i=e.options)===null||i===void 0?void 0:i.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(o=e.options)===null||o===void 0?void 0:o.skipBrowserRedirect})})}exchangeCodeForSession(e){return d(this,null,function*(){return yield this.initializePromise,this._acquireLock(-1,()=>d(this,null,function*(){return this._exchangeCodeForSession(e)}))})}_exchangeCodeForSession(e){return d(this,null,function*(){let n=yield Or(this.storage,`${this.storageKey}-code-verifier`),[i,s]=(n??"").split("/");try{let{data:o,error:a}=yield S(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:i},xform:_e});if(yield Mr(this.storage,`${this.storageKey}-code-verifier`),a)throw a;return!o||!o.session||!o.user?{data:{user:null,session:null,redirectType:null},error:new Et}:(o.session&&(yield this._saveSession(o.session),yield this._notifyAllSubscribers("SIGNED_IN",o.session)),{data:Object.assign(Object.assign({},o),{redirectType:s??null}),error:a})}catch(o){if(b(o))return{data:{user:null,session:null,redirectType:null},error:o};throw o}})}signInWithIdToken(e){return d(this,null,function*(){try{let{options:n,provider:i,token:s,access_token:o,nonce:a}=e,l=yield S(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:s,access_token:o,nonce:a,gotrue_meta_security:{captcha_token:n?.captchaToken}},xform:_e}),{data:c,error:u}=l;return u?{data:{user:null,session:null},error:u}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Et}:(c.session&&(yield this._saveSession(c.session),yield this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:u})}catch(n){if(b(n))return{data:{user:null,session:null},error:n};throw n}})}signInWithOtp(e){return d(this,null,function*(){var n,i,s,o,a;try{if("email"in e){let{email:l,options:c}=e,u=null,h=null;this.flowType==="pkce"&&([u,h]=yield We(this.storage,this.storageKey));let{error:f}=yield S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(n=c?.data)!==null&&n!==void 0?n:{},create_user:(i=c?.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},code_challenge:u,code_challenge_method:h},redirectTo:c?.emailRedirectTo});return{data:{user:null,session:null},error:f}}if("phone"in e){let{phone:l,options:c}=e,{data:u,error:h}=yield S(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(s=c?.data)!==null&&s!==void 0?s:{},create_user:(o=c?.shouldCreateUser)!==null&&o!==void 0?o:!0,gotrue_meta_security:{captcha_token:c?.captchaToken},channel:(a=c?.channel)!==null&&a!==void 0?a:"sms"}});return{data:{user:null,session:null,messageId:u?.message_id},error:h}}throw new Je("You must provide either an email or phone number.")}catch(l){if(b(l))return{data:{user:null,session:null},error:l};throw l}})}verifyOtp(e){return d(this,null,function*(){var n,i;try{let s,o;"options"in e&&(s=(n=e.options)===null||n===void 0?void 0:n.redirectTo,o=(i=e.options)===null||i===void 0?void 0:i.captchaToken);let{data:a,error:l}=yield S(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:o}}),redirectTo:s,xform:_e});if(l)throw l;if(!a)throw new Error("An error occurred on token verification.");let c=a.session,u=a.user;return c?.access_token&&(yield this._saveSession(c),yield this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:u,session:c},error:null}}catch(s){if(b(s))return{data:{user:null,session:null},error:s};throw s}})}signInWithSSO(e){return d(this,null,function*(){var n,i,s;try{let o=null,a=null;return this.flowType==="pkce"&&([o,a]=yield We(this.storage,this.storageKey)),yield S(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(i=(n=e.options)===null||n===void 0?void 0:n.redirectTo)!==null&&i!==void 0?i:void 0}),!((s=e?.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:o,code_challenge_method:a}),headers:this.headers,xform:Kl})}catch(o){if(b(o))return{data:null,error:o};throw o}})}reauthenticate(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._reauthenticate()}))})}_reauthenticate(){return d(this,null,function*(){try{return yield this._useSession(e=>d(this,null,function*(){let{data:{session:n},error:i}=e;if(i)throw i;if(!n)throw new se;let{error:s}=yield S(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:n.access_token});return{data:{user:null,session:null},error:s}}))}catch(e){if(b(e))return{data:{user:null,session:null},error:e};throw e}})}resend(e){return d(this,null,function*(){try{let n=`${this.url}/resend`;if("email"in e){let{email:i,type:s,options:o}=e,{error:a}=yield S(this.fetch,"POST",n,{headers:this.headers,body:{email:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}},redirectTo:o?.emailRedirectTo});return{data:{user:null,session:null},error:a}}else if("phone"in e){let{phone:i,type:s,options:o}=e,{data:a,error:l}=yield S(this.fetch,"POST",n,{headers:this.headers,body:{phone:i,type:s,gotrue_meta_security:{captcha_token:o?.captchaToken}}});return{data:{user:null,session:null,messageId:a?.message_id},error:l}}throw new Je("You must provide either an email or phone number and a type")}catch(n){if(b(n))return{data:{user:null,session:null},error:n};throw n}})}getSession(){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return this._useSession(n=>d(this,null,function*(){return n}))}))})}_acquireLock(e,n){return d(this,null,function*(){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){let i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=d(this,null,function*(){return yield i,yield n()});return this.pendingInLock.push(d(this,null,function*(){try{yield s}catch{}})),s}return yield this.lock(`lock:${this.storageKey}`,e,()=>d(this,null,function*(){this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;let i=n();for(this.pendingInLock.push(d(this,null,function*(){try{yield i}catch{}})),yield i;this.pendingInLock.length;){let s=[...this.pendingInLock];yield Promise.all(s),this.pendingInLock.splice(0,s.length)}return yield i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}}))}finally{this._debug("#_acquireLock","end")}})}_useSession(e){return d(this,null,function*(){this._debug("#_useSession","begin");try{let n=yield this.__loadSession();return yield e(n)}finally{this._debug("#_useSession","end")}})}__loadSession(){return d(this,null,function*(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null,n=yield Or(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",n),n!==null&&(this._isValidSession(n)?e=n:(this._debug("#getSession()","session from storage is not valid"),yield this._removeSession())),!e)return{data:{session:null},error:null};let i=e.expires_at?e.expires_at<=Date.now()/1e3:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",e.expires_at),!i){if(this.storage.isServer){let a=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,u,h)=>(!a&&u==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and many not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),a=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,u,h))})}return{data:{session:e},error:null}}let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{session:null},error:o}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}})}getUser(e){return d(this,null,function*(){return e?yield this._getUser(e):(yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._getUser()})))})}_getUser(e){return d(this,null,function*(){try{return e?yield S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:pe}):yield this._useSession(n=>d(this,null,function*(){var i,s,o;let{data:a,error:l}=n;if(l)throw l;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new se}:yield S(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(o=(s=a.session)===null||s===void 0?void 0:s.access_token)!==null&&o!==void 0?o:void 0,xform:pe})}))}catch(n){if(b(n))return Wl(n)&&(yield this._removeSession(),yield Mr(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{data:{user:null},error:n};throw n}})}updateUser(i){return d(this,arguments,function*(e,n={}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._updateUser(e,n)}))})}_updateUser(i){return d(this,arguments,function*(e,n={}){try{return yield this._useSession(s=>d(this,null,function*(){let{data:o,error:a}=s;if(a)throw a;if(!o.session)throw new se;let l=o.session,c=null,u=null;this.flowType==="pkce"&&e.email!=null&&([c,u]=yield We(this.storage,this.storageKey));let{data:h,error:f}=yield S(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:n?.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:c,code_challenge_method:u}),jwt:l.access_token,xform:pe});if(f)throw f;return l.user=h.user,yield this._saveSession(l),yield this._notifyAllSubscribers("USER_UPDATED",l),{data:{user:l.user},error:null}}))}catch(s){if(b(s))return{data:{user:null},error:s};throw s}})}_decodeJWT(e){return Ls(e)}setSession(e){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._setSession(e)}))})}_setSession(e){return d(this,null,function*(){try{if(!e.access_token||!e.refresh_token)throw new se;let n=Date.now()/1e3,i=n,s=!0,o=null,a=Ls(e.access_token);if(a.exp&&(i=a.exp,s=i<=n),s){let{session:l,error:c}=yield this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};o=l}else{let{data:l,error:c}=yield this._getUser(e.access_token);if(c)throw c;o={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:i-n,expires_at:i},yield this._saveSession(o),yield this._notifyAllSubscribers("SIGNED_IN",o)}return{data:{user:o.user,session:o},error:null}}catch(n){if(b(n))return{data:{session:null,user:null},error:n};throw n}})}refreshSession(e){return d(this,null,function*(){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._refreshSession(e)}))})}_refreshSession(e){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i;if(!e){let{data:a,error:l}=n;if(l)throw l;e=(i=a.session)!==null&&i!==void 0?i:void 0}if(!e?.refresh_token)throw new se;let{session:s,error:o}=yield this._callRefreshToken(e.refresh_token);return o?{data:{user:null,session:null},error:o}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}}))}catch(n){if(b(n))return{data:{user:null,session:null},error:n};throw n}})}_getSessionFromURL(e){return d(this,null,function*(){try{if(!ie())throw new Ke("No browser detected.");if(this.flowType==="implicit"&&!this._isImplicitGrantFlow())throw new Ke("Not a valid implicit grant flow url.");if(this.flowType=="pkce"&&!e)throw new kr("Not a valid PKCE flow url.");let n=qn(window.location.href);if(e){if(!n.code)throw new kr("No code detected.");let{data:k,error:$}=yield this._exchangeCodeForSession(n.code);if($)throw $;let L=new URL(window.location.href);return L.searchParams.delete("code"),window.history.replaceState(window.history.state,"",L.toString()),{data:{session:k.session,redirectType:null},error:null}}if(n.error||n.error_description||n.error_code)throw new Ke(n.error_description||"Error in URL with unspecified error_description",{error:n.error||"unspecified_error",code:n.error_code||"unspecified_code"});let{provider_token:i,provider_refresh_token:s,access_token:o,refresh_token:a,expires_in:l,expires_at:c,token_type:u}=n;if(!o||!l||!a||!u)throw new Ke("No session defined in URL");let h=Math.round(Date.now()/1e3),f=parseInt(l),p=h+f;c&&(p=parseInt(c));let C=p-h;C*1e3<=jr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${C}s, should have been closer to ${f}s`);let g=p-f;h-g>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",g,p,h):h-g<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",g,p,h);let{data:v,error:T}=yield this._getUser(o);if(T)throw T;let Y={provider_token:i,provider_refresh_token:s,access_token:o,expires_in:f,expires_at:p,refresh_token:a,token_type:u,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:Y,redirectType:n.type},error:null}}catch(n){if(b(n))return{data:{session:null,redirectType:null},error:n};throw n}})}_isImplicitGrantFlow(){let e=qn(window.location.href);return!!(ie()&&(e.access_token||e.error_description))}_isPKCEFlow(){return d(this,null,function*(){let e=qn(window.location.href),n=yield Or(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&n)})}signOut(){return d(this,arguments,function*(e={scope:"global"}){return yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){return yield this._signOut(e)}))})}_signOut(){return d(this,arguments,function*({scope:e}={scope:"global"}){return yield this._useSession(n=>d(this,null,function*(){var i;let{data:s,error:o}=n;if(o)return{error:o};let a=(i=s.session)===null||i===void 0?void 0:i.access_token;if(a){let{error:l}=yield this.admin.signOut(a,e);if(l&&!(Hl(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(yield this._removeSession(),yield Mr(this.storage,`${this.storageKey}-code-verifier`),yield this._notifyAllSubscribers("SIGNED_OUT",null)),{error:null}}))})}onAuthStateChange(e){let n=$l(),i={id:n,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",n),this.stateChangeEmitters.delete(n)}};return this._debug("#onAuthStateChange()","registered callback with id",n),this.stateChangeEmitters.set(n,i),d(this,null,function*(){yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){this._emitInitialSession(n)}))}),{data:{subscription:i}}}_emitInitialSession(e){return d(this,null,function*(){return yield this._useSession(n=>d(this,null,function*(){var i,s;try{let{data:{session:o},error:a}=n;if(a)throw a;yield(i=this.stateChangeEmitters.get(e))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",o),this._debug("INITIAL_SESSION","callback id",e,"session",o)}catch(o){yield(s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null),this._debug("INITIAL_SESSION","callback id",e,"error",o),console.error(o)}}))})}resetPasswordForEmail(i){return d(this,arguments,function*(e,n={}){let s=null,o=null;this.flowType==="pkce"&&([s,o]=yield We(this.storage,this.storageKey,!0));try{return yield S(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:s,code_challenge_method:o,gotrue_meta_security:{captcha_token:n.captchaToken}},headers:this.headers,redirectTo:n.redirectTo})}catch(a){if(b(a))return{data:null,error:a};throw a}})}getUserIdentities(){return d(this,null,function*(){var e;try{let{data:n,error:i}=yield this.getUser();if(i)throw i;return{data:{identities:(e=n.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(n){if(b(n))return{data:null,error:n};throw n}})}linkIdentity(e){return d(this,null,function*(){var n;try{let{data:i,error:s}=yield this._useSession(o=>d(this,null,function*(){var a,l,c,u,h;let{data:f,error:p}=o;if(p)throw p;let C=yield this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(a=e.options)===null||a===void 0?void 0:a.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return yield S(this.fetch,"GET",C,{headers:this.headers,jwt:(h=(u=f.session)===null||u===void 0?void 0:u.access_token)!==null&&h!==void 0?h:void 0})}));if(s)throw s;return ie()&&!(!((n=e.options)===null||n===void 0)&&n.skipBrowserRedirect)&&window.location.assign(i?.url),{data:{provider:e.provider,url:i?.url},error:null}}catch(i){if(b(i))return{data:{provider:e.provider,url:null},error:i};throw i}})}unlinkIdentity(e){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i,s;let{data:o,error:a}=n;if(a)throw a;return yield S(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(i=o.session)===null||i===void 0?void 0:i.access_token)!==null&&s!==void 0?s:void 0})}))}catch(n){if(b(n))return{data:null,error:n};throw n}})}_refreshAccessToken(e){return d(this,null,function*(){let n=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{let i=Date.now();return yield Gl(s=>d(this,null,function*(){return s>0&&(yield zl(200*Math.pow(2,s-1))),this._debug(n,"refreshing attempt",s),yield S(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:_e})}),(s,o)=>{let a=200*Math.pow(2,s);return o&&Jn(o)&&Date.now()+a-i<jr})}catch(i){if(this._debug(n,"error",i),b(i))return{data:{session:null,user:null},error:i};throw i}finally{this._debug(n,"end")}})}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}_handleProviderSignIn(e,n){return d(this,null,function*(){let i=yield this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:n.redirectTo,scopes:n.scopes,queryParams:n.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",n,"url",i),ie()&&!n.skipBrowserRedirect&&window.location.assign(i),{data:{provider:e,url:i},error:null}})}_recoverAndRefresh(){return d(this,null,function*(){var e;let n="#_recoverAndRefresh()";this._debug(n,"begin");try{let i=yield Or(this.storage,this.storageKey);if(this._debug(n,"session from storage",i),!this._isValidSession(i)){this._debug(n,"session is not valid"),i!==null&&(yield this._removeSession());return}let s=Math.round(Date.now()/1e3),o=((e=i.expires_at)!==null&&e!==void 0?e:1/0)<s+Fs;if(this._debug(n,`session has${o?"":" not"} expired with margin of ${Fs}s`),o){if(this.autoRefreshToken&&i.refresh_token){let{error:a}=yield this._callRefreshToken(i.refresh_token);a&&(console.error(a),Jn(a)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",a),yield this._removeSession()))}}else yield this._notifyAllSubscribers("SIGNED_IN",i)}catch(i){this._debug(n,"error",i),console.error(i);return}finally{this._debug(n,"end")}})}_callRefreshToken(e){return d(this,null,function*(){var n,i;if(!e)throw new se;if(this.refreshingDeferred)return this.refreshingDeferred.promise;let s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Ir;let{data:o,error:a}=yield this._refreshAccessToken(e);if(a)throw a;if(!o.session)throw new se;yield this._saveSession(o.session),yield this._notifyAllSubscribers("TOKEN_REFRESHED",o.session);let l={session:o.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(o){if(this._debug(s,"error",o),b(o)){let a={session:null,error:o};return Jn(o)||(yield this._removeSession(),yield this._notifyAllSubscribers("SIGNED_OUT",null)),(n=this.refreshingDeferred)===null||n===void 0||n.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(o),o}finally{this.refreshingDeferred=null,this._debug(s,"end")}})}_notifyAllSubscribers(e,n,i=!0){return d(this,null,function*(){let s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",n,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:e,session:n});let o=[],a=Array.from(this.stateChangeEmitters.values()).map(l=>d(this,null,function*(){try{yield l.callback(e,n)}catch(c){o.push(c)}}));if(yield Promise.all(a),o.length>0){for(let l=0;l<o.length;l+=1)console.error(o[l]);throw o[0]}}finally{this._debug(s,"end")}})}_saveSession(e){return d(this,null,function*(){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,yield Vs(this.storage,this.storageKey,e)})}_removeSession(){return d(this,null,function*(){this._debug("#_removeSession()"),yield Mr(this.storage,this.storageKey)})}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");let e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&ie()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",e)}catch(n){console.error("removing visibilitychange callback failed",n)}}_startAutoRefresh(){return d(this,null,function*(){yield this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");let e=setInterval(()=>this._autoRefreshTokenTick(),jr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(()=>d(this,null,function*(){yield this.initializePromise,yield this._autoRefreshTokenTick()}),0)})}_stopAutoRefresh(){return d(this,null,function*(){this._debug("#_stopAutoRefresh()");let e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)})}startAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._startAutoRefresh()})}stopAutoRefresh(){return d(this,null,function*(){this._removeVisibilityChangedCallback(),yield this._stopAutoRefresh()})}_autoRefreshTokenTick(){return d(this,null,function*(){this._debug("#_autoRefreshTokenTick()","begin");try{yield this._acquireLock(0,()=>d(this,null,function*(){try{let e=Date.now();try{return yield this._useSession(n=>d(this,null,function*(){let{data:{session:i}}=n;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}let s=Math.floor((i.expires_at*1e3-e)/jr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${jr}ms, refresh threshold is ${ec} ticks`),s<=ec&&(yield this._callRefreshToken(i.refresh_token))}))}catch(n){console.error("Auto refresh tick failed with error. This is likely a transient error.",n)}}finally{this._debug("#_autoRefreshTokenTick()","end")}}))}catch(e){if(e.isAcquireTimeout||e instanceof Nr)this._debug("auto refresh token tick lock not available");else throw e}})}_handleVisibilityChange(){return d(this,null,function*(){if(this._debug("#_handleVisibilityChange()"),!ie()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=()=>d(this,null,function*(){return yield this._onVisibilityChanged(!1)}),window?.addEventListener("visibilitychange",this.visibilityChangedCallback),yield this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}})}_onVisibilityChanged(e){return d(this,null,function*(){let n=`#_onVisibilityChanged(${e})`;this._debug(n,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(yield this.initializePromise,yield this._acquireLock(-1,()=>d(this,null,function*(){if(document.visibilityState!=="visible"){this._debug(n,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}yield this._recoverAndRefresh()})))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()})}_getUrlForProvider(e,n,i){return d(this,null,function*(){let s=[`provider=${encodeURIComponent(n)}`];if(i?.redirectTo&&s.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i?.scopes&&s.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){let[o,a]=yield We(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(o)}`,code_challenge_method:`${encodeURIComponent(a)}`});s.push(l.toString())}if(i?.queryParams){let o=new URLSearchParams(i.queryParams);s.push(o.toString())}return i?.skipBrowserRedirect&&s.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${e}?${s.join("&")}`})}_unenroll(e){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i;let{data:s,error:o}=n;return o?{data:null,error:o}:yield S(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(n){if(b(n))return{data:null,error:n};throw n}})}_enroll(e){return d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i,s;let{data:o,error:a}=n;if(a)return{data:null,error:a};let l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:u}=yield S(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(i=o?.session)===null||i===void 0?void 0:i.access_token});return u?{data:null,error:u}:(e.factorType==="phone"&&delete c.totp,e.factorType==="totp"&&(!((s=c?.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})}))}catch(n){if(b(n))return{data:null,error:n};throw n}})}_verify(e){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i;let{data:s,error:o}=n;if(o)return{data:null,error:o};let{data:a,error:l}=yield S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token});return l?{data:null,error:l}:(yield this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+a.expires_in},a)),yield this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",a),{data:a,error:l})}))}catch(n){if(b(n))return{data:null,error:n};throw n}}))})}_challenge(e){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){try{return yield this._useSession(n=>d(this,null,function*(){var i;let{data:s,error:o}=n;return o?{data:null,error:o}:yield S(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(i=s?.session)===null||i===void 0?void 0:i.access_token})}))}catch(n){if(b(n))return{data:null,error:n};throw n}}))})}_challengeAndVerify(e){return d(this,null,function*(){let{data:n,error:i}=yield this._challenge({factorId:e.factorId});return i?{data:null,error:i}:yield this._verify({factorId:e.factorId,challengeId:n.id,code:e.code})})}_listFactors(){return d(this,null,function*(){let{data:{user:e},error:n}=yield this.getUser();if(n)return{data:null,error:n};let i=e?.factors||[],s=i.filter(a=>a.factor_type==="totp"&&a.status==="verified"),o=i.filter(a=>a.factor_type==="phone"&&a.status==="verified");return{data:{all:i,totp:s,phone:o},error:null}})}_getAuthenticatorAssuranceLevel(){return d(this,null,function*(){return this._acquireLock(-1,()=>d(this,null,function*(){return yield this._useSession(e=>d(this,null,function*(){var n,i;let{data:{session:s},error:o}=e;if(o)return{data:null,error:o};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};let a=this._decodeJWT(s.access_token),l=null;a.aal&&(l=a.aal);let c=l;((i=(n=s.user.factors)===null||n===void 0?void 0:n.filter(f=>f.status==="verified"))!==null&&i!==void 0?i:[]).length>0&&(c="aal2");let h=a.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:h},error:null}}))}))})}}return r.nextInstanceID=0,r})();var vf=Gs,qs=vf;var Xn=class extends qs{constructor(t){super(t)}};var yf=function(r,t,e,n){function i(s){return s instanceof e?s:new e(function(o){o(s)})}return new(e||(e=Promise))(function(s,o){function a(u){try{c(n.next(u))}catch(h){o(h)}}function l(u){try{c(n.throw(u))}catch(h){o(h)}}function c(u){u.done?s(u.value):i(u.value).then(a,l)}c((n=n.apply(r,t||[])).next())})},Zn=class{constructor(t,e,n){var i,s,o;if(this.supabaseUrl=t,this.supabaseKey=e,!t)throw new Error("supabaseUrl is required.");if(!e)throw new Error("supabaseKey is required.");let a=Nl(t);this.realtimeUrl=`${a}/realtime/v1`.replace(/^http/i,"ws"),this.authUrl=`${a}/auth/v1`,this.storageUrl=`${a}/storage/v1`,this.functionsUrl=`${a}/functions/v1`;let l=`sb-${new URL(this.authUrl).hostname.split(".")[0]}-auth-token`,c={db:Ml,realtime:kl,auth:Object.assign(Object.assign({},xl),{storageKey:l}),global:Ol},u=jl(n??{},c);this.storageKey=(i=u.auth.storageKey)!==null&&i!==void 0?i:"",this.headers=(s=u.global.headers)!==null&&s!==void 0?s:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=Pl(e,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers},u.realtime)),this.rest=new vl(`${a}/rest/v1`,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new pr(this.functionsUrl,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Rr(this.storageUrl,this.headers,this.fetch)}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,e={},n={}){return this.rest.rpc(t,e,n)}channel(t,e={config:{}}){return this.realtime.channel(t,e)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var t,e;return yf(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();let{data:n}=yield this.auth.getSession();return(e=(t=n.session)===null||t===void 0?void 0:t.access_token)!==null&&e!==void 0?e:null})}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,storageKey:s,flowType:o,lock:a,debug:l},c,u){var h;let f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Xn({url:this.authUrl,headers:Object.assign(Object.assign({},f),c),storageKey:s,autoRefreshToken:t,persistSession:e,detectSessionInUrl:n,storage:i,flowType:o,lock:a,debug:l,fetch:u,hasCustomAuthorizationHeader:(h="Authorization"in this.headers)!==null&&h!==void 0?h:!1})}_initRealtimeClient(t){return new Sr(this.realtimeUrl,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,n)=>{this._handleTokenChanged(e,"CLIENT",n?.access_token)})}_handleTokenChanged(t,e,n){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==n?(this.realtime.setAuth(n??null),this.changedAccessToken=n):t==="SIGNED_OUT"&&(this.realtime.setAuth(this.supabaseKey),e=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};var Hs=(r,t,e)=>new Zn(r,t,e);var Fr={production:!1,supabase:{url:"https://tarjkrpuewnjaqckjhkm.supabase.co",key:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InRhcmprcnB1ZXduamFxY2tqaGttIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjQxNTY1MzksImV4cCI6MjAzOTczMjUzOX0.cCkI2RUP0_XrEkRgaPdTuc7xEgcC3KNXBi8YYl77ZH8"}};var Xv=(()=>{class r{constructor(e){this.router=e,this.supabase=Hs(Fr.supabase.url,Fr.supabase.key),this.supabase_client=Hs(Fr.supabase.url,Fr.supabase.key),this.session=this.loadSession()}loadSession(){let e=localStorage.getItem("supabase.auth.session");return e?JSON.parse(e):null}saveSession(e){localStorage.setItem("supabase.auth.session",JSON.stringify(e))}signIn(e,n){return d(this,null,function*(){let{data:i,error:s}=yield this.supabase.auth.signInWithPassword({email:e,password:n});if(s)throw new Error(s.message);this.session=i.session,this.saveSession(this.session);let o=this.session?.user?.id;return console.log("User ID:",o),i})}signUp(e,n){return d(this,null,function*(){let{data:i,error:s}=yield this.supabase.auth.signUp({email:e,password:n});if(s)throw new Error(s.message);return console.log("User signed up:",i.user),i})}getUserId(){return this.session?.user?.id||null}signOut(){return d(this,null,function*(){let{error:e}=yield this.supabase.auth.signOut();return localStorage.removeItem("supabase.auth.session"),this.session=null,{error:e}})}getSession(){return this.session}refreshSession(){return d(this,null,function*(){if(this.session){let{data:e,error:n}=yield this.supabase.auth.refreshSession();if(n)throw new Error(n.message);e.session?(this.session=e.session,this.saveSession(this.session)):(console.warn("Session is null after refresh"),this.session=null)}})}isLoggedIn(){return!!localStorage.getItem("supabase.auth.token")}getInstrumentIdsByIndexName(e){return d(this,null,function*(){let{data:n,error:i}=yield this.supabase.from("indices").select("instrument_id",{count:"exact",head:!1}).eq("index_name",e).order("instrument_id",{ascending:!0});return i?(console.error("Erreur de r\xE9cup\xE9ration des instrument_id:",i),[]):Array.from(new Set(n.map(o=>o.instrument_id))).map(o=>({instrument_id:o}))||[]})}getDates(){return this.supabase.from("indices").select("date")}getMinAndMaxDates(){let e=this.supabase.from("indices").select("date").order("date",{ascending:!0}).limit(1),n=this.supabase.from("indices").select("date").order("date",{ascending:!1}).limit(1);return Promise.all([e,n])}insertData(e){return d(this,null,function*(){let{data:n,error:i}=yield this.supabase.from("parameter").insert([{selected_index:e}]);return i?(console.error("Erreur d'insertion:",i),null):n})}insertData1(e,n){return d(this,null,function*(){let{data:i,error:s}=yield this.supabase.from("parameter").insert([n]);return s?(console.error("Error inserting data:",s),{success:!1,error:s}):{success:!0,data:i}})}insertWeights(e){return d(this,null,function*(){let{data:n,error:i}=yield this.supabase.from("weights").insert(e);if(i)throw console.error("Error inserting data:",i),i;return n})}saveUploadPrices(e){return d(this,null,function*(){try{let{error:n}=yield this.supabase.from("prices").insert(e);if(n)throw new Error(n.message)}catch(n){throw console.error("Error uploading data:",n),n}})}saveUploadWeights(e){return d(this,null,function*(){try{let{error:n}=yield this.supabase.from("weights").insert(e);if(n)throw new Error(n.message)}catch(n){throw console.error("Error uploading data:",n),n}})}static{this.\u0275fac=function(n){return new(n||r)(E(oe))}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var cc=(()=>{class r{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||r)(D(Nt),D(kt))}}static{this.\u0275dir=j({type:r})}}return r})(),Xs=(()=>{class r extends cc{static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275dir=j({type:r,features:[J]})}}return r})(),$r=new O(""),_f={provide:$r,useExisting:ae(()=>wf),multi:!0},wf=(()=>{class r extends Xs{writeValue(e){this.setProperty("checked",e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275dir=j({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(n,i){n&1&&De("change",function(o){return i.onChange(o.target.checked)})("blur",function(){return i.onTouched()})},features:[ce([_f]),J]})}}return r})(),bf={provide:$r,useExisting:ae(()=>uc),multi:!0};function Cf(){let r=st()?st().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}var Ef=new O(""),uc=(()=>{class r extends cc{constructor(e,n,i){super(e,n),this._compositionMode=i,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!Cf())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||r)(D(Nt),D(kt),D(Ef,8))}}static{this.\u0275dir=j({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,i){n&1&&De("input",function(o){return i._handleInput(o.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(o){return i._compositionEnd(o.target.value)})},features:[ce([bf]),J]})}}return r})();function je(r){return r==null||(typeof r=="string"||Array.isArray(r))&&r.length===0}function hc(r){return r!=null&&typeof r.length=="number"}var It=new O(""),li=new O(""),Sf=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,rc=class{static min(t){return dc(t)}static max(t){return Af(t)}static required(t){return fc(t)}static requiredTrue(t){return Rf(t)}static email(t){return Tf(t)}static minLength(t){return Df(t)}static maxLength(t){return If(t)}static pattern(t){return Of(t)}static nullValidator(t){return ei(t)}static compose(t){return _c(t)}static composeAsync(t){return wc(t)}};function dc(r){return t=>{if(je(t.value)||je(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<r?{min:{min:r,actual:t.value}}:null}}function Af(r){return t=>{if(je(t.value)||je(r))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>r?{max:{max:r,actual:t.value}}:null}}function fc(r){return je(r.value)?{required:!0}:null}function Rf(r){return r.value===!0?null:{required:!0}}function Tf(r){return je(r.value)||Sf.test(r.value)?null:{email:!0}}function Df(r){return t=>je(t.value)||!hc(t.value)?null:t.value.length<r?{minlength:{requiredLength:r,actualLength:t.value.length}}:null}function If(r){return t=>hc(t.value)&&t.value.length>r?{maxlength:{requiredLength:r,actualLength:t.value.length}}:null}function Of(r){if(!r)return ei;let t,e;return typeof r=="string"?(e="",r.charAt(0)!=="^"&&(e+="^"),e+=r,r.charAt(r.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=r.toString(),t=r),n=>{if(je(n.value))return null;let i=n.value;return t.test(i)?null:{pattern:{requiredPattern:e,actualValue:i}}}}function ei(r){return null}function pc(r){return r!=null}function gc(r){return Wr(r)?U(r):r}function mc(r){let t={};return r.forEach(e=>{t=e!=null?m(m({},t),e):t}),Object.keys(t).length===0?null:t}function vc(r,t){return t.map(e=>e(r))}function Mf(r){return!r.validate}function yc(r){return r.map(t=>Mf(t)?t:e=>t.validate(e))}function _c(r){if(!r)return null;let t=r.filter(pc);return t.length==0?null:function(e){return mc(vc(e,t))}}function Zs(r){return r!=null?_c(yc(r)):null}function wc(r){if(!r)return null;let t=r.filter(pc);return t.length==0?null:function(e){let n=vc(e,t).map(gc);return co(n).pipe(R(mc))}}function Ys(r){return r!=null?wc(yc(r)):null}function nc(r,t){return r===null?[t]:Array.isArray(r)?[...r,t]:[r,t]}function bc(r){return r._rawValidators}function Cc(r){return r._rawAsyncValidators}function Ws(r){return r?Array.isArray(r)?r:[r]:[]}function ti(r,t){return Array.isArray(r)?r.includes(t):r===t}function ic(r,t){let e=Ws(t);return Ws(r).forEach(i=>{ti(e,i)||e.push(i)}),e}function sc(r,t){return Ws(t).filter(e=>!ti(r,e))}var ri=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=Zs(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=Ys(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},Fe=class extends ri{get formDirective(){return null}get path(){return null}},Ye=class extends ri{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},ni=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},xf={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},py=P(m({},xf),{"[class.ng-submitted]":"isSubmitted"}),gy=(()=>{class r extends ni{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||r)(D(Ye,2))}}static{this.\u0275dir=j({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,i){n&2&&Si("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[J]})}}return r})(),my=(()=>{class r extends ni{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||r)(D(Fe,10))}}static{this.\u0275dir=j({type:r,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,i){n&2&&Si("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)("ng-submitted",i.isSubmitted)},features:[J]})}}return r})();var Ur="VALID",Yn="INVALID",Rt="PENDING",Vr="DISABLED";function Qs(r){return(ci(r)?r.validators:r)||null}function kf(r){return Array.isArray(r)?Zs(r):r||null}function eo(r,t){return(ci(t)?t.asyncValidators:r)||null}function Pf(r){return Array.isArray(r)?Ys(r):r||null}function ci(r){return r!=null&&!Array.isArray(r)&&typeof r=="object"}function Ec(r,t,e){let n=r.controls;if(!(t?Object.keys(n):n).length)throw new M(1e3,"");if(!n[e])throw new M(1001,"")}function Sc(r,t,e){r._forEachChild((n,i)=>{if(e[i]===void 0)throw new M(1002,"")})}var Tt=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===Ur}get invalid(){return this.status===Yn}get pending(){return this.status==Rt}get disabled(){return this.status===Vr}get enabled(){return this.status!==Vr}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(ic(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(ic(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(sc(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(sc(t,this._rawAsyncValidators))}hasValidator(t){return ti(this._rawValidators,t)}hasAsyncValidator(t){return ti(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Rt,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Vr,this.errors=null,this._forEachChild(n=>{n.disable(P(m({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(P(m({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=Ur,this._forEachChild(n=>{n.enable(P(m({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(P(m({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Ur||this.status===Rt)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Vr:Ur}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Rt,this._hasOwnPendingAsyncValidator=!0;let e=gc(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,i)=>n&&n._find(i),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ee,this.statusChanges=new ee}_calculateStatus(){return this._allControlsDisabled()?Vr:this.errors?Yn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rt)?Rt:this._anyControlsHaveStatus(Yn)?Yn:Ur}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){ci(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=kf(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=Pf(this._rawAsyncValidators)}},Dt=class extends Tt{constructor(t,e,n){super(Qs(e),eo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){Sc(this,!0,t),Object.keys(t).forEach(n=>{Ec(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let i=this.controls[n];i&&i.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,i)=>{n.reset(t?t[i]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,i)=>((n.enabled||this.disabled)&&(e[i]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((i,s)=>{n=e(n,i,s)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var Js=class extends Dt{};var Br=new O("CallSetDisabledState",{providedIn:"root",factory:()=>ui}),ui="always";function Nf(r,t){return[...t.path,r]}function ii(r,t,e=ui){to(r,t),t.valueAccessor.writeValue(r.value),(r.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(r.disabled),Ff(r,t),Vf(r,t),Uf(r,t),jf(r,t)}function si(r,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),ai(r,t),r&&(t._invokeOnDestroyCallbacks(),r._registerOnCollectionChange(()=>{}))}function oi(r,t){r.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function jf(r,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};r.registerOnDisabledChange(e),t._registerOnDestroy(()=>{r._unregisterOnDisabledChange(e)})}}function to(r,t){let e=bc(r);t.validator!==null?r.setValidators(nc(e,t.validator)):typeof e=="function"&&r.setValidators([e]);let n=Cc(r);t.asyncValidator!==null?r.setAsyncValidators(nc(n,t.asyncValidator)):typeof n=="function"&&r.setAsyncValidators([n]);let i=()=>r.updateValueAndValidity();oi(t._rawValidators,i),oi(t._rawAsyncValidators,i)}function ai(r,t){let e=!1;if(r!==null){if(t.validator!==null){let i=bc(r);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.validator);s.length!==i.length&&(e=!0,r.setValidators(s))}}if(t.asyncValidator!==null){let i=Cc(r);if(Array.isArray(i)&&i.length>0){let s=i.filter(o=>o!==t.asyncValidator);s.length!==i.length&&(e=!0,r.setAsyncValidators(s))}}}let n=()=>{};return oi(t._rawValidators,n),oi(t._rawAsyncValidators,n),e}function Ff(r,t){t.valueAccessor.registerOnChange(e=>{r._pendingValue=e,r._pendingChange=!0,r._pendingDirty=!0,r.updateOn==="change"&&Ac(r,t)})}function Uf(r,t){t.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,r.updateOn==="blur"&&r._pendingChange&&Ac(r,t),r.updateOn!=="submit"&&r.markAsTouched()})}function Ac(r,t){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Vf(r,t){let e=(n,i)=>{t.valueAccessor.writeValue(n),i&&t.viewToModelUpdate(n)};r.registerOnChange(e),t._registerOnDestroy(()=>{r._unregisterOnChange(e)})}function Rc(r,t){r==null,to(r,t)}function Lf(r,t){return ai(r,t)}function Tc(r,t){if(!r.hasOwnProperty("model"))return!1;let e=r.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function $f(r){return Object.getPrototypeOf(r.constructor)===Xs}function Dc(r,t){r._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function Ic(r,t){if(!t)return null;Array.isArray(t);let e,n,i;return t.forEach(s=>{s.constructor===uc?e=s:$f(s)?n=s:i=s}),i||n||e||null}function Bf(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}var zf={provide:Fe,useExisting:ae(()=>Gf)},Lr=Promise.resolve(),Gf=(()=>{class r extends Fe{constructor(e,n,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ee,this.form=new Dt({},Zs(e),Ys(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){Lr.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),ii(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){Lr.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){Lr.then(()=>{let n=this._findContainer(e.path),i=new Dt({});Rc(i,e),n.registerControl(e.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){Lr.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){Lr.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,Dc(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||r)(D(It,10),D(li,10),D(Br,8))}}static{this.\u0275dir=j({type:r,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,i){n&1&&De("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{options:[W.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ce([zf]),J]})}}return r})();function oc(r,t){let e=r.indexOf(t);e>-1&&r.splice(e,1)}function ac(r){return typeof r=="object"&&r!==null&&Object.keys(r).length===2&&"value"in r&&"disabled"in r}var Qn=class extends Tt{constructor(t=null,e,n){super(Qs(e),eo(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),ci(e)&&(e.nonNullable||e.initialValueIsDefault)&&(ac(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){oc(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){oc(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){ac(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var qf=r=>r instanceof Qn;var yy=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=j({type:r,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return r})(),Hf={provide:$r,useExisting:ae(()=>Wf),multi:!0},Wf=(()=>{class r extends Xs{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275dir=j({type:r,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,i){n&1&&De("input",function(o){return i.onChange(o.target.value)})("blur",function(){return i.onTouched()})},features:[ce([Hf]),J]})}}return r})();var ro=new O(""),Jf={provide:Ye,useExisting:ae(()=>Kf)},Kf=(()=>{class r extends Ye{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,i,s,o){super(),this._ngModelWarningConfig=s,this.callSetDisabledState=o,this.update=new ee,this._ngModelWarningSent=!1,this._setValidators(e),this._setAsyncValidators(n),this.valueAccessor=Ic(this,i)}ngOnChanges(e){if(this._isControlChanged(e)){let n=e.form.previousValue;n&&si(n,this,!1),ii(this.form,this,this.callSetDisabledState),this.form.updateValueAndValidity({emitEvent:!1})}Tc(e,this.viewModel)&&(this.form.setValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.form&&si(this.form,this,!1)}get path(){return[]}get control(){return this.form}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_isControlChanged(e){return e.hasOwnProperty("form")}static{this.\u0275fac=function(n){return new(n||r)(D(It,10),D(li,10),D($r,10),D(ro,8),D(Br,8))}}static{this.\u0275dir=j({type:r,selectors:[["","formControl",""]],inputs:{form:[W.None,"formControl","form"],isDisabled:[W.None,"disabled","isDisabled"],model:[W.None,"ngModel","model"]},outputs:{update:"ngModelChange"},exportAs:["ngForm"],features:[ce([Jf]),J,Te]})}}return r})(),Xf={provide:Fe,useExisting:ae(()=>Zf)},Zf=(()=>{class r extends Fe{constructor(e,n,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ee,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(ai(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return ii(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){si(e.control||null,e,!1),Bf(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,Dc(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,i=this.form.get(e.path);n!==i&&(si(n||null,e),qf(i)&&(ii(i,e,this.callSetDisabledState),e.control=i))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);Rc(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&Lf(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){to(this.form,this),this._oldForm&&ai(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||r)(D(It,10),D(li,10),D(Br,8))}}static{this.\u0275dir=j({type:r,selectors:[["","formGroup",""]],hostBindings:function(n,i){n&1&&De("submit",function(o){return i.onSubmit(o)})("reset",function(){return i.onReset()})},inputs:{form:[W.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[ce([Xf]),J,Te]})}}return r})();var Yf={provide:Ye,useExisting:ae(()=>Qf)},Qf=(()=>{class r extends Ye{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,i,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new ee,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(i),this.valueAccessor=Ic(this,s)}ngOnChanges(e){this._added||this._setUpControl(),Tc(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return Nf(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||r)(D(Fe,13),D(It,10),D(li,10),D($r,10),D(ro,8))}}static{this.\u0275dir=j({type:r,selectors:[["","formControlName",""]],inputs:{name:[W.None,"formControlName","name"],isDisabled:[W.None,"disabled","isDisabled"],model:[W.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[ce([Yf]),J,Te]})}}return r})();function ep(r){return typeof r=="number"?r:parseFloat(r)}var Oc=(()=>{class r{constructor(){this._validator=ei}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):ei,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275dir=j({type:r,features:[Te]})}}return r})();var tp={provide:It,useExisting:ae(()=>rp),multi:!0},rp=(()=>{class r extends Oc{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=e=>ep(e),this.createValidator=e=>dc(e)}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275dir=j({type:r,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(n,i){n&2&&jt("min",i._enabled?i.min:null)},inputs:{min:"min"},features:[ce([tp]),J]})}}return r})(),np={provide:It,useExisting:ae(()=>ip),multi:!0};var ip=(()=>{class r extends Oc{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=it,this.createValidator=e=>fc}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(i){return(e||(e=ve(r)))(i||r)}})()}static{this.\u0275dir=j({type:r,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,i){n&2&&jt("required",i._enabled?"":null)},inputs:{required:"required"},features:[ce([np]),J]})}}return r})();var Mc=(()=>{class r{static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Ae({type:r})}static{this.\u0275inj=Se({})}}return r})(),Ks=class extends Tt{constructor(t,e,n){super(Qs(e),eo(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let i=this._adjustIndex(t);i<0&&(i=0),this.controls[i]&&this.controls[i]._registerOnCollectionChange(()=>{}),this.controls.splice(i,1),e&&(this.controls.splice(i,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){Sc(this,!1,t),t.forEach((n,i)=>{Ec(this,!1,i),this.at(i).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,i)=>{this.at(i)&&this.at(i).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,i)=>{n.reset(t[i],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function lc(r){return!!r&&(r.asyncValidators!==void 0||r.validators!==void 0||r.updateOn!==void 0)}var _y=(()=>{class r{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new r;return e.useNonNullable=!0,e}group(e,n=null){let i=this._reduceControls(e),s={};return lc(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Dt(i,s)}record(e,n=null){let i=this._reduceControls(e);return new Js(i,n)}control(e,n,i){let s={};return this.useNonNullable?(lc(n)?s=n:(s.validators=n,s.asyncValidators=i),new Qn(e,P(m({},s),{nonNullable:!0}))):new Qn(e,n,i)}array(e,n,i){let s=e.map(o=>this._createControl(o));return new Ks(s,n,i)}_reduceControls(e){let n={};return Object.keys(e).forEach(i=>{n[i]=this._createControl(e[i])}),n}_createControl(e){if(e instanceof Qn)return e;if(e instanceof Tt)return e;if(Array.isArray(e)){let n=e[0],i=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(n,i,s)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275prov=A({token:r,factory:r.\u0275fac,providedIn:"root"})}}return r})();var wy=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:Br,useValue:e.callSetDisabledState??ui}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Ae({type:r})}static{this.\u0275inj=Se({imports:[Mc]})}}return r})(),by=(()=>{class r{static withConfig(e){return{ngModule:r,providers:[{provide:ro,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:Br,useValue:e.callSetDisabledState??ui}]}}static{this.\u0275fac=function(n){return new(n||r)}}static{this.\u0275mod=Ae({type:r})}static{this.\u0275inj=Se({imports:[Mc]})}}return r})();export{qc as a,vp as b,ia as c,Up as d,Su as e,eh as f,oe as g,og as h,ag as i,lg as j,Xv as k,$r as l,wf as m,uc as n,It as o,rc as p,Ye as q,gy as r,my as s,Dt as t,Gf as u,Qn as v,yy as w,Wf as x,Kf as y,Zf as z,Qf as A,rp as B,ip as C,_y as D,wy as E,by as F};
